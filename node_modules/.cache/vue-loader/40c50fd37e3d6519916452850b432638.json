{"remainingRequest":"C:\\Users\\Dell\\Desktop\\vost-app\\node_modules\\vue-loader\\dist\\index.js??ruleSet[0].use[1]!C:\\Users\\Dell\\Desktop\\vost-app\\src\\views\\client\\Client.vue?vue&type=style&index=0&id=3b95c8f6&scoped=true&lang=css","dependencies":[{"path":"C:\\Users\\Dell\\Desktop\\vost-app\\src\\views\\client\\Client.vue","mtime":1653911314483},{"path":"C:\\Users\\Dell\\Desktop\\vost-app\\node_modules\\css-loader\\dist\\cjs.js","mtime":1653838183416},{"path":"C:\\Users\\Dell\\Desktop\\vost-app\\node_modules\\vue-loader\\dist\\stylePostLoader.js","mtime":1653838184422},{"path":"C:\\Users\\Dell\\Desktop\\vost-app\\node_modules\\postcss-loader\\dist\\cjs.js","mtime":1653838178185},{"path":"C:\\Users\\Dell\\Desktop\\vost-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1653838178205},{"path":"C:\\Users\\Dell\\Desktop\\vost-app\\node_modules\\vue-loader\\dist\\index.js","mtime":1653838182816}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouZGlhbW9uZCB7DQogIGRpc3BsYXk6IGZsZXg7DQogIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogIGp1c3RpZnktY29udGVudDogY2VudGVyOw0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogIHRyYW5zZm9ybTogcm90YXRlKDQ1ZGVnKTsNCn0NCi5kaWFtb25kID4gZGl2IHsNCiAgdHJhbnNmb3JtOiByb3RhdGUoLTQ1ZGVnKTsNCn0NCg=="},{"version":3,"sources":["C:\\Users\\Dell\\Desktop\\vost-app\\src\\views\\client\\Client.vue"],"names":[],"mappings":";AAkgBA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACvB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC1B;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC3B","file":"C:/Users/Dell/Desktop/vost-app/src/views/client/Client.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div\r\n    class=\"flex flex-col w-full h-screen bg-gray-700 overflow-hidden space-y-1\"\r\n  >\r\n    <div\r\n      class=\"flex self-start w-full items-center space-x-3 h-16 py-1 px-2 md:items-center\"\r\n    >\r\n      <SearchBar ref=\"searchbar\" @search=\"searchfn\" />\r\n      <div class=\"rounded-full py-2 px-2 bg-gray-500\">\r\n        <FilterIcon\r\n          @click=\"mobileFiltersOpen = !mobileFiltersOpen\"\r\n          class=\"h-7 fill-current text-white\"\r\n        />\r\n      </div>\r\n      <div\r\n        class=\"rounded-full py-2 px-2 bg-gray-500\"\r\n        v-if=\"\r\n          currentUser.Profile.Autorisations.find((el) => el.nom == 'add-client')\r\n        \"\r\n      >\r\n        <Icon\r\n          icon=\"ant-design:user-add-outlined\"\r\n          @click=\"openCreateModal\"\r\n          class=\"h-7 w-7 fill-current text-white\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div class=\"bg-blue-900\">\r\n      <div>\r\n        <!-- Mobile filter dialog -->\r\n        <TransitionRoot as=\"template\" :show=\"mobileFiltersOpen\">\r\n          <Dialog\r\n            as=\"div\"\r\n            class=\"fixed inset-0 flex z-40\"\r\n            @close=\"mobileFiltersOpen = false\"\r\n          >\r\n            <TransitionChild\r\n              as=\"template\"\r\n              enter=\"transition-opacity ease-linear duration-300\"\r\n              enter-from=\"opacity-0\"\r\n              enter-to=\"opacity-100\"\r\n              leave=\"transition-opacity ease-linear duration-300\"\r\n              leave-from=\"opacity-100\"\r\n              leave-to=\"opacity-0\"\r\n            >\r\n              <DialogOverlay class=\"fixed inset-0 bg-black bg-opacity-25\" />\r\n            </TransitionChild>\r\n\r\n            <TransitionChild\r\n              as=\"template\"\r\n              enter=\"transition ease-in-out duration-300 transform\"\r\n              enter-from=\"translate-x-full\"\r\n              enter-to=\"translate-x-0\"\r\n              leave=\"transition ease-in-out duration-300 transform\"\r\n              leave-from=\"translate-x-0\"\r\n              leave-to=\"translate-x-full\"\r\n            >\r\n              <div\r\n                class=\"ml-auto relative max-w-xs w-full h-full bg-gray-900 shadow-xl py-4 pb-12 flex flex-col overflow-y-auto\"\r\n              >\r\n                <div class=\"px-4 flex items-center justify-between\">\r\n                  <h2 class=\"text-lg font-medium text-gray-300\">Filters</h2>\r\n                  <button\r\n                    type=\"button\"\r\n                    class=\"-mr-2 w-7 h-7 bg-gray-800 p-1 rounded-md flex items-center justify-center text-gray-400\"\r\n                    @click=\"mobileFiltersOpen = false\"\r\n                  >\r\n                    <span class=\"sr-only text-white\">Close menu</span>\r\n                    <XIcon class=\"h-6 w-6 text-gray-300\" aria-hidden=\"true\" />\r\n                  </button>\r\n                </div>\r\n\r\n                <!-- Filters -->\r\n                <form class=\"mt-4 border-t border-gray-400\">\r\n                  <Disclosure\r\n                    as=\"div\"\r\n                    class=\"border-t border-gray-400 px-4 py-6\"\r\n                    v-slot=\"{ open }\"\r\n                  >\r\n                    <h3 class=\"-mx-2 -my-3 flow-root\">\r\n                      <DisclosureButton as=\"template\">\r\n                        <div\r\n                          class=\"px-2 py-3 bg-gray-700 w-full flex items-center justify-between text-gray-400 hover:text-gray-200\"\r\n                        >\r\n                          <span class=\"font-medium text-gray-400\"> Types </span>\r\n                          <span class=\"ml-6 flex items-center\">\r\n                            <PlusSmIcon\r\n                              v-if=\"!open\"\r\n                              class=\"h-5 w-5\"\r\n                              aria-hidden=\"true\"\r\n                            />\r\n                            <MinusSmIcon\r\n                              v-else\r\n                              class=\"h-5 w-5\"\r\n                              aria-hidden=\"true\"\r\n                            />\r\n                          </span>\r\n                        </div>\r\n                      </DisclosureButton>\r\n                    </h3>\r\n                    <DisclosurePanel class=\"pt-6\">\r\n                      <div v-if=\"types?.length > 0\" class=\"space-y-6\">\r\n                        <div\r\n                          v-for=\"type in types\"\r\n                          :key=\"type.id\"\r\n                          class=\"flex items-center\"\r\n                        >\r\n                          <input\r\n                            :value=\"type.id\"\r\n                            type=\"checkbox\"\r\n                            :checked=\"type.checked\"\r\n                            class=\"h-4 w-4 border-gray-400 rounded text-blue-600 focus:ring-blue-500\"\r\n                            v-model=\"typesel\"\r\n                          />\r\n                          <label class=\"ml-3 min-w-0 flex-1 text-gray-500\">\r\n                            {{ type.type }}\r\n                          </label>\r\n                        </div>\r\n                      </div>\r\n                    </DisclosurePanel>\r\n                  </Disclosure>\r\n                </form>\r\n              </div>\r\n            </TransitionChild>\r\n          </Dialog>\r\n        </TransitionRoot>\r\n      </div>\r\n    </div>\r\n    <div class=\"flex-1 flex flex-col overflow-hidden\">\r\n      <div\r\n        v-if=\"showedClients?.length != 0\"\r\n        class=\"w-full flex flex-1 flex-col overflow-y-auto\"\r\n      >\r\n        <ul\r\n          class=\"w-full h-full overflow-hidden flex flex-row flex-wrap justify-evenly\"\r\n        >\r\n          <ClientRow\r\n            v-for=\"client in showedClients\"\r\n            :key=\"client.id\"\r\n            :client=\"client\"\r\n          />\r\n        </ul>\r\n      </div>\r\n      <Pagination\r\n        ref=\"Pagination\"\r\n        :currentPage=\"currentPage\"\r\n        :pageSize=\"nbperpage\"\r\n        :dataLength=\"clients?.length || 0\"\r\n        @page=\"currentPage = $event\"\r\n        @next=\"currentPage++\"\r\n        @prev=\"currentPage--\"\r\n        @first=\"currentPage = 1\"\r\n        @last=\"currentPage = $refs.Pagination.pageNumber\"\r\n      />\r\n    </div>\r\n  </div>\r\n  <Modal ref=\"createModal\" primaryColor=\"haja\" @submit=\"addClient\">\r\n    <template v-slot:title>Ajouter un client</template>\r\n    <template v-slot:body>\r\n      <div class=\"flex flex-col w-full pt-16 pb-5 overflow-hidden\">\r\n        <div class=\"flex flex-col space-y-3 mt-4 px-2\">\r\n          <div class=\"flex flex-col w-full space-y-2 space-x-2\">\r\n            <label\r\n              class=\"flex items-center text-bold h-full rounded-l-md text-md\"\r\n              >Raison Sociale</label\r\n            >\r\n            <div\r\n              class=\"flex flex-row items-cente w-auto focus-within:ring-1 rounded-md ring-blue-600 overflow-hidden\"\r\n            >\r\n              <input\r\n                type=\"text\"\r\n                name=\"raison_social\"\r\n                id=\"raison_social\"\r\n                v-model=\"newClient.raisonSociale\"\r\n                placeholder=\"Raison social\"\r\n                class=\"rounded-r-md border-0 focus:ring-0\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"flex flex-col w-full space-y-2 space-x-2\">\r\n            <label\r\n              class=\"flex items-center text-bold h-full rounded-l-md text-md\"\r\n              >Username</label\r\n            >\r\n            <div\r\n              class=\"flex flex-row items-cente w-auto focus-within:ring-1 rounded-md ring-blue-600 overflow-hidden\"\r\n            >\r\n              <input\r\n                type=\"text\"\r\n                name=\"username\"\r\n                id=\"username\"\r\n                v-model=\"newClient.username\"\r\n                placeholder=\"Username\"\r\n                class=\"rounded-r-md border-0 focus:ring-0\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"flex flex-col w-full space-y-2 space-x-2\">\r\n            <label\r\n              for=\"numero\"\r\n              class=\"flex items-center text-bold h-full rounded-l-md text-md\"\r\n              >Numero</label\r\n            >\r\n            <div\r\n              class=\"flex flex-row items-cente w-auto focus-within:ring-1 rounded-md ring-blue-600 overflow-hidden\"\r\n            >\r\n              <label\r\n                for=\"numero\"\r\n                class=\"flex items-center uppercase text-bold rounded-l-md px-2 bg-gray-200 text-gray-800 text-md border-t border-l border-b\"\r\n                >+213</label\r\n              >\r\n              <input\r\n                type=\"tel\"\r\n                name=\"numero\"\r\n                id=\"numero\"\r\n                v-model=\"newClient.numero\"\r\n                placeholder=\"Numero de telephone\"\r\n                class=\"rounded-r-md border-0 focus:ring-0\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"flex flex-col w-full space-y-2 space-x-2\">\r\n            <label\r\n              for=\"numero\"\r\n              class=\"flex items-center text-bold h-full rounded-l-md text-md\"\r\n              >Numero secondaire</label\r\n            >\r\n            <div\r\n              class=\"flex flex-row items-cente w-auto focus-within:ring-1 rounded-md ring-blue-600\"\r\n            >\r\n              <label\r\n                for=\"numero\"\r\n                class=\"flex items-center uppercase text-bold flex-1 rounded-l-md px-2 bg-gray-200 text-gray-800 text-md border-t border-l border-b\"\r\n                >+213</label\r\n              >\r\n              <input\r\n                type=\"tel\"\r\n                name=\"numero_secondaire\"\r\n                id=\"numero_secondaire\"\r\n                v-model=\"newClient.numeroSecondaire\"\r\n                placeholder=\"Numero de telephone (optionel)\"\r\n                class=\"rounded-r-md border-0 focus:ring-0\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"flex flex-col w-full\">\r\n            <div class=\"flex flex-col items-start w-full space-y-2 space-x-2\">\r\n              <label\r\n                for=\"passwordConfirm\"\r\n                class=\"flex items-center text-bold h-full rounded-l-md text-md\"\r\n                >Type</label\r\n              >\r\n              <Listbox v-model=\"newClient.TypeClientId\">\r\n                <div class=\"relative w-full mx-1 space-x-auto\">\r\n                  <ListboxButton\r\n                    class=\"h-10 relative w-full py-2 pl-3 pr-10 text-left bg-white rounded-lg cursor-default focus:outline-none focus-visible:ring-2 focus-visible:ring-opacity-75 focus-visible:ring-white focus-visible:ring-offset-orange-300 focus-visible:ring-offset-2 focus-visible:border-indigo-500 sm:text-sm border-1\"\r\n                  >\r\n                    <span class=\"block truncate\">{{\r\n                      types.find((el) => el.id == newClient.TypeClientId)\r\n                        ?.type || \"Type\"\r\n                    }}</span>\r\n                    <span\r\n                      class=\"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none\"\r\n                    >\r\n                      <SelectorIcon\r\n                        class=\"w-5 h-5 text-gray-400\"\r\n                        aria-hidden=\"true\"\r\n                      />\r\n                    </span>\r\n                  </ListboxButton>\r\n\r\n                  <transition\r\n                    leave-active-class=\"transition duration-100 ease-in\"\r\n                    leave-from-class=\"opacity-100\"\r\n                    leave-to-class=\"opacity-0\"\r\n                  >\r\n                    <ListboxOptions\r\n                      class=\"absolute mt-1 w-11/12 overflow-auto text-base bg-white rounded-md shadow-lg max-h-60 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm text-left\"\r\n                    >\r\n                      <ListboxOption\r\n                        v-slot=\"{ active, selected }\"\r\n                        v-for=\"f in types\"\r\n                        :key=\"f.id\"\r\n                        :value=\"f.id\"\r\n                        as=\"template\"\r\n                      >\r\n                        <li\r\n                          :class=\"[\r\n                            active\r\n                              ? 'text-amber-900 bg-amber-100'\r\n                              : 'text-gray-900',\r\n                            'cursor-default select-none relative py-2 pl-10 pr-4',\r\n                          ]\"\r\n                        >\r\n                          <span\r\n                            :class=\"[\r\n                              selected ? 'font-medium' : 'font-normal',\r\n                              'block truncate',\r\n                            ]\"\r\n                            >{{ f.type }}</span\r\n                          >\r\n                          <span\r\n                            v-if=\"selected\"\r\n                            class=\"absolute inset-y-0 left-0 flex items-center pl-3 text-amber-600\"\r\n                          >\r\n                            <CheckIcon class=\"w-5 h-5\" aria-hidden=\"true\" />\r\n                          </span>\r\n                        </li>\r\n                      </ListboxOption>\r\n                    </ListboxOptions>\r\n                  </transition>\r\n                </div>\r\n              </Listbox>\r\n            </div>\r\n          </div>\r\n          <div class=\"flex flex-col w-full\">\r\n            <div class=\"flex flex-col items-start space-y-2 space-x-2 w-full\">\r\n              <label\r\n                for=\"password\"\r\n                class=\"flex items-center text-bold h-full rounded-l-md px-2\"\r\n                >Mot de passe</label\r\n              >\r\n              <input\r\n                type=\"password\"\r\n                name=\"password\"\r\n                id=\"password\"\r\n                v-model=\"newClient.password\"\r\n                placeholder=\"Mot de passe\"\r\n                class=\"rounded-md border-0 w-auto\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div class=\"flex flex-col w-full\">\r\n            <div class=\"flex flex-col items-start w-max space-y-2 space-x-2\">\r\n              <label\r\n                for=\"passwordConfirm\"\r\n                class=\"flex items-center text-bold h-full rounded-l-md text-md\"\r\n                >Confirmation</label\r\n              >\r\n              <input\r\n                type=\"password\"\r\n                name=\"passwordConfirm\"\r\n                id=\"passwordConfirm\"\r\n                v-model=\"newClient.passwordConfirm\"\r\n                placeholder=\"Confirmation\"\r\n                class=\"rounded-md border-0 w-auto\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </template>\r\n    <template v-slot:submit>Ajouter</template>\r\n  </Modal>\r\n</template>\r\n\r\n<script>\r\nimport Modal from \"@/components/Modal\";\r\nimport { debounce } from \"lodash\";\r\nimport Pagination from \"@/components/Pagination\";\r\nimport {\r\n  Dialog,\r\n  DialogOverlay,\r\n  Disclosure,\r\n  DisclosureButton,\r\n  DisclosurePanel,\r\n  TransitionChild,\r\n  TransitionRoot,\r\n  Listbox,\r\n  ListboxButton,\r\n  ListboxOptions,\r\n  ListboxOption,\r\n} from \"@headlessui/vue\";\r\nimport {\r\n  MinusSmIcon,\r\n  PlusSmIcon,\r\n  FilterIcon,\r\n  CheckIcon,\r\n  SelectorIcon,\r\n} from \"@heroicons/vue/solid\";\r\nimport { XIcon } from \"@heroicons/vue/outline\";\r\nimport SearchBar from \"@/components/SearchBar\";\r\n// import UserService from \"@/services/UserService\";\r\nimport ClientRow from \"@/components/ClientRow\";\r\nimport { Icon } from \"@iconify/vue\";\r\nexport default {\r\n  name: \"ClientIndex\",\r\n  components: {\r\n    Pagination,\r\n    SearchBar,\r\n    Dialog,\r\n    DialogOverlay,\r\n    Disclosure,\r\n    DisclosureButton,\r\n    DisclosurePanel,\r\n    ClientRow,\r\n    TransitionChild,\r\n    TransitionRoot,\r\n    FilterIcon,\r\n    MinusSmIcon,\r\n    PlusSmIcon,\r\n    XIcon,\r\n    Modal,\r\n    Icon,\r\n    CheckIcon,\r\n    SelectorIcon,\r\n    Listbox,\r\n    ListboxButton,\r\n    ListboxOptions,\r\n    ListboxOption,\r\n  },\r\n  async beforeMount() {\r\n    // $(window).on('resize',this.)\r\n    await this.$store.dispatch(\"getClients\");\r\n    await this.$store.dispatch(\"getTypeClients\");\r\n  },\r\n  data() {\r\n    return {\r\n      newClient: {\r\n        raisonSociale: null,\r\n        numero: null,\r\n        numeroSecondaire: null,\r\n        email: null,\r\n        password: null,\r\n        paswordConfirm: null,\r\n      },\r\n      typesel: [],\r\n      currentPage: 1,\r\n      mobileFiltersOpen: false,\r\n    };\r\n  },\r\n  methods: {\r\n    searchfn: debounce(function (e) {\r\n      this.$store.dispatch(\"getClients\", {\r\n        TypeClientId: this.fonctionsel,\r\n        raisonSociale: e,\r\n        numero: e,\r\n        numeroSecondaire: e,\r\n        username: e,\r\n      });\r\n    }, 500),\r\n    openModal(client) {\r\n      this.$refs.modal.open = true;\r\n      this.$refs.modal.client = client;\r\n    },\r\n\r\n    pencilCLick() {\r\n      this.$refs.fileInput.click();\r\n    },\r\n    avatarChanged() {\r\n      this.$refs.avatarDisplay.src = URL.createObjectURL(\r\n        this.$refs.fileInput.files[0]\r\n      );\r\n    },\r\n    openCreateModal() {\r\n      this.$refs.createModal.open = true;\r\n    },\r\n    addClient() {\r\n      this.$store.dispatch(\"addClient\", this.newClient).then(() => {\r\n        this.$refs.createModal.open = false;\r\n        this.$store.dispatch(\"getClients\").then(() => {\r\n          this.$refs.searchbar.search = this.newClient.username;\r\n        });\r\n      });\r\n    },\r\n  },\r\n  computed: {\r\n    clients() {\r\n      return this.$store.getters.getClients;\r\n    },\r\n    nbperpage() {\r\n      if (window.innerWidth >= 640 && window.innerWidth < 768) return 2 * 6;\r\n      else if (window.innerWidth >= 768 && window.innerWidth < 1280) return 16;\r\n      else if (window.innerWidth > 1280) return 4 * 6;\r\n      else return 1 * 6;\r\n    },\r\n    filters() {\r\n      return [\r\n        {\r\n          id: \"nom\",\r\n          name: \"Types\",\r\n          options: this.types,\r\n        },\r\n      ];\r\n    },\r\n    showedClients() {\r\n      let cp = this.$refs?.Pagination?.currentPage || 1;\r\n      let clients = this.clients;\r\n      if (!clients) return [];\r\n      return clients.slice((cp - 1) * this.nbperpage, cp * this.nbperpage);\r\n    },\r\n\r\n    types() {\r\n      return this.$store.getters.getTypeClients;\r\n    },\r\n    currentUser() {\r\n      return this.$store.getters.getCurrentUser;\r\n    },\r\n  },\r\n  watch: {\r\n    typesel: function () {\r\n      this.$store.dispatch(\"getClients\", {\r\n        TypeClientId: this.typesel,\r\n        raisonSociale: this.$refs.searchbar.search,\r\n        numero: this.$refs.searchbar.search,\r\n        numeroSecondaire: this.$refs.searchbar.search,\r\n        username: this.$refs.searchbar.search,\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.diamond {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  text-align: center;\r\n  transform: rotate(45deg);\r\n}\r\n.diamond > div {\r\n  transform: rotate(-45deg);\r\n}\r\n</style>\r\n"]}]}