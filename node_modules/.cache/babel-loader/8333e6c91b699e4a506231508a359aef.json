{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar lodash_clonedeep_1 = __importDefault(require(\"lodash.clonedeep\"));\n\nvar lodash_isequal_1 = __importDefault(require(\"lodash.isequal\"));\n\nvar AttributeMap;\n\n(function (AttributeMap) {\n  function compose(a, b, keepNull) {\n    if (a === void 0) {\n      a = {};\n    }\n\n    if (b === void 0) {\n      b = {};\n    }\n\n    if (typeof a !== 'object') {\n      a = {};\n    }\n\n    if (typeof b !== 'object') {\n      b = {};\n    }\n\n    var attributes = lodash_clonedeep_1.default(b);\n\n    if (!keepNull) {\n      attributes = Object.keys(attributes).reduce(function (copy, key) {\n        if (attributes[key] != null) {\n          copy[key] = attributes[key];\n        }\n\n        return copy;\n      }, {});\n    }\n\n    for (var key in a) {\n      if (a[key] !== undefined && b[key] === undefined) {\n        attributes[key] = a[key];\n      }\n    }\n\n    return Object.keys(attributes).length > 0 ? attributes : undefined;\n  }\n\n  AttributeMap.compose = compose;\n\n  function diff(a, b) {\n    if (a === void 0) {\n      a = {};\n    }\n\n    if (b === void 0) {\n      b = {};\n    }\n\n    if (typeof a !== 'object') {\n      a = {};\n    }\n\n    if (typeof b !== 'object') {\n      b = {};\n    }\n\n    var attributes = Object.keys(a).concat(Object.keys(b)).reduce(function (attrs, key) {\n      if (!lodash_isequal_1.default(a[key], b[key])) {\n        attrs[key] = b[key] === undefined ? null : b[key];\n      }\n\n      return attrs;\n    }, {});\n    return Object.keys(attributes).length > 0 ? attributes : undefined;\n  }\n\n  AttributeMap.diff = diff;\n\n  function invert(attr, base) {\n    if (attr === void 0) {\n      attr = {};\n    }\n\n    if (base === void 0) {\n      base = {};\n    }\n\n    attr = attr || {};\n    var baseInverted = Object.keys(base).reduce(function (memo, key) {\n      if (base[key] !== attr[key] && attr[key] !== undefined) {\n        memo[key] = base[key];\n      }\n\n      return memo;\n    }, {});\n    return Object.keys(attr).reduce(function (memo, key) {\n      if (attr[key] !== base[key] && base[key] === undefined) {\n        memo[key] = null;\n      }\n\n      return memo;\n    }, baseInverted);\n  }\n\n  AttributeMap.invert = invert;\n\n  function transform(a, b, priority) {\n    if (priority === void 0) {\n      priority = false;\n    }\n\n    if (typeof a !== 'object') {\n      return b;\n    }\n\n    if (typeof b !== 'object') {\n      return undefined;\n    }\n\n    if (!priority) {\n      return b; // b simply overwrites us without priority\n    }\n\n    var attributes = Object.keys(b).reduce(function (attrs, key) {\n      if (a[key] === undefined) {\n        attrs[key] = b[key]; // null is a valid value\n      }\n\n      return attrs;\n    }, {});\n    return Object.keys(attributes).length > 0 ? attributes : undefined;\n  }\n\n  AttributeMap.transform = transform;\n})(AttributeMap || (AttributeMap = {}));\n\nexports.default = AttributeMap;","map":{"version":3,"sources":["../src/AttributeMap.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar lodash_clonedeep_1 = __importDefault(require(\"lodash.clonedeep\"));\nvar lodash_isequal_1 = __importDefault(require(\"lodash.isequal\"));\nvar AttributeMap;\n(function (AttributeMap) {\n    function compose(a, b, keepNull) {\n        if (a === void 0) { a = {}; }\n        if (b === void 0) { b = {}; }\n        if (typeof a !== 'object') {\n            a = {};\n        }\n        if (typeof b !== 'object') {\n            b = {};\n        }\n        var attributes = lodash_clonedeep_1.default(b);\n        if (!keepNull) {\n            attributes = Object.keys(attributes).reduce(function (copy, key) {\n                if (attributes[key] != null) {\n                    copy[key] = attributes[key];\n                }\n                return copy;\n            }, {});\n        }\n        for (var key in a) {\n            if (a[key] !== undefined && b[key] === undefined) {\n                attributes[key] = a[key];\n            }\n        }\n        return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n    AttributeMap.compose = compose;\n    function diff(a, b) {\n        if (a === void 0) { a = {}; }\n        if (b === void 0) { b = {}; }\n        if (typeof a !== 'object') {\n            a = {};\n        }\n        if (typeof b !== 'object') {\n            b = {};\n        }\n        var attributes = Object.keys(a)\n            .concat(Object.keys(b))\n            .reduce(function (attrs, key) {\n            if (!lodash_isequal_1.default(a[key], b[key])) {\n                attrs[key] = b[key] === undefined ? null : b[key];\n            }\n            return attrs;\n        }, {});\n        return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n    AttributeMap.diff = diff;\n    function invert(attr, base) {\n        if (attr === void 0) { attr = {}; }\n        if (base === void 0) { base = {}; }\n        attr = attr || {};\n        var baseInverted = Object.keys(base).reduce(function (memo, key) {\n            if (base[key] !== attr[key] && attr[key] !== undefined) {\n                memo[key] = base[key];\n            }\n            return memo;\n        }, {});\n        return Object.keys(attr).reduce(function (memo, key) {\n            if (attr[key] !== base[key] && base[key] === undefined) {\n                memo[key] = null;\n            }\n            return memo;\n        }, baseInverted);\n    }\n    AttributeMap.invert = invert;\n    function transform(a, b, priority) {\n        if (priority === void 0) { priority = false; }\n        if (typeof a !== 'object') {\n            return b;\n        }\n        if (typeof b !== 'object') {\n            return undefined;\n        }\n        if (!priority) {\n            return b; // b simply overwrites us without priority\n        }\n        var attributes = Object.keys(b).reduce(function (attrs, key) {\n            if (a[key] === undefined) {\n                attrs[key] = b[key]; // null is a valid value\n            }\n            return attrs;\n        }, {});\n        return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n    AttributeMap.transform = transform;\n})(AttributeMap || (AttributeMap = {}));\nexports.default = AttributeMap;\n//# sourceMappingURL=AttributeMap.js.map"]},"metadata":{},"sourceType":"script"}