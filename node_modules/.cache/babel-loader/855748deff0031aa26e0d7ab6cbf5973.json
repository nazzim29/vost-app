{"ast":null,"code":"import { debounce } from \"lodash\";\nimport Pagination from \"@/components/Pagination\";\nimport CommandeRow from \"@/components/CommandeRow\";\nimport { Dialog, DialogOverlay, Disclosure, DisclosureButton, DisclosurePanel, TransitionChild, TransitionRoot } from \"@headlessui/vue\";\nimport SearchBar from \"@/components/SearchBar\";\nimport { Icon } from \"@iconify/vue\";\nimport { FilterIcon, PlusSmIcon, MinusSmIcon } from \"@heroicons/vue/solid\";\nimport { XIcon } from \"@heroicons/vue/outline\";\nexport default {\n  name: \"Commandes\",\n\n  beforeMount() {\n    this.$store.dispatch(\"getCommandes\");\n  },\n\n  data() {\n    return {\n      mobileFiltersOpen: false,\n      currentPage: 1,\n      etatsel: []\n    };\n  },\n\n  components: {\n    Dialog,\n    Pagination,\n    CommandeRow,\n    DialogOverlay,\n    Disclosure,\n    DisclosureButton,\n    DisclosurePanel,\n    TransitionChild,\n    TransitionRoot,\n    SearchBar,\n    Icon,\n    FilterIcon,\n    XIcon,\n    PlusSmIcon,\n    MinusSmIcon\n  },\n  computed: {\n    nbperpage() {\n      if (window.innerWidth >= 640 && window.innerWidth < 768) return 13;else if (window.innerWidth >= 768 && window.innerWidth < 1280) return 3 * 5;else if (window.innerWidth > 1280) return 4 * 5;else return 8;\n    },\n\n    pageNumber() {\n      let nb = this.commandes.length / this.nbperpage;\n      if (this.commandes.length % this.nbperpage != 0) nb++;\n      return parseInt(nb);\n    },\n\n    commandes() {\n      return this.$store.getters.getCommandes;\n    },\n\n    showedCommandes() {\n      let start = (this.currentPage - 1) * this.nbperpage;\n      let end = start + this.nbperpage;\n      return this.commandes.slice(start, end);\n    },\n\n    currentUser() {\n      return this.$store.getters.getCurrentUser;\n    }\n\n  },\n  methods: {\n    searchfn: debounce(async function () {\n      console.log(this.search);\n      this.$store.dispatch(\"getCommandes\", {\n        etat: this.etatsel,\n        \"$Client.raisonSociale$\": this.$refs.searchbar.search\n      });\n    }, 500),\n\n    openCreateModal() {}\n\n  },\n  watch: {\n    etatsel: function () {\n      this.searchfn();\n    }\n  }\n};","map":{"version":3,"sources":["C:\\Users\\Dell\\Desktop\\vost-app\\src\\views\\commandes\\Commandes.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div\r\n    class=\"flex flex-col w-full justify-center items-center h-full bg-gray-700 overflow-hidden\"\r\n  >\r\n    <div class=\"flex self-start w-full items-center space-x-3 h-16 py-1 px-2\">\r\n      <SearchBar ref=\"searchbar\" @search=\"searchfn\" />\r\n      <div\r\n        class=\"rounded-full py-2 px-2 bg-gray-500\"\r\n        :class=\"{ hidden: refs?.searchbar?.open }\"\r\n      >\r\n        <FilterIcon\r\n          @click=\"mobileFiltersOpen = !mobileFiltersOpen\"\r\n          class=\"h-7 fill-current text-white\"\r\n        />\r\n      </div>\r\n      <div\r\n        class=\"rounded-full py-2 px-2 bg-gray-500\"\r\n        @click=\"$router.push({ name: 'Commande', params: { id: 'new' } })\"\r\n        v-if=\"\r\n          currentUser.Profile.Autorisations.find(\r\n            (el) => el.nom == 'add-commande'\r\n          )\r\n        \"\r\n      >\r\n        <Icon\r\n          icon=\"ant-design:file-add-filled\"\r\n          @click=\"openCreateModal\"\r\n          class=\"h-7 w-7 fill-current text-white\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div class=\"bg-blue-900\">\r\n      <div>\r\n        <!-- Mobile filter dialog -->\r\n        <TransitionRoot as=\"template\" :show=\"mobileFiltersOpen\">\r\n          <Dialog\r\n            as=\"div\"\r\n            class=\"fixed inset-0 flex z-40\"\r\n            @close=\"mobileFiltersOpen = false\"\r\n          >\r\n            <TransitionChild\r\n              as=\"template\"\r\n              enter=\"transition-opacity ease-linear duration-300\"\r\n              enter-from=\"opacity-0\"\r\n              enter-to=\"opacity-100\"\r\n              leave=\"transition-opacity ease-linear duration-300\"\r\n              leave-from=\"opacity-100\"\r\n              leave-to=\"opacity-0\"\r\n            >\r\n              <DialogOverlay class=\"fixed inset-0 bg-black bg-opacity-25\" />\r\n            </TransitionChild>\r\n\r\n            <TransitionChild\r\n              as=\"template\"\r\n              enter=\"transition ease-in-out duration-300 transform\"\r\n              enter-from=\"translate-x-full\"\r\n              enter-to=\"translate-x-0\"\r\n              leave=\"transition ease-in-out duration-300 transform\"\r\n              leave-from=\"translate-x-0\"\r\n              leave-to=\"translate-x-full\"\r\n            >\r\n              <div\r\n                class=\"ml-auto relative max-w-xs w-full h-full bg-gray-900 shadow-xl py-4 pb-12 flex flex-col overflow-y-auto\"\r\n              >\r\n                <div class=\"px-4 flex items-center justify-between\">\r\n                  <h2 class=\"text-lg font-medium text-gray-300\">Filters</h2>\r\n                  <button\r\n                    type=\"button\"\r\n                    class=\"-mr-2 w-7 h-7 bg-gray-800 p-1 rounded-md flex items-center justify-center text-gray-400\"\r\n                    @click=\"mobileFiltersOpen = false\"\r\n                  >\r\n                    <span class=\"sr-only text-white\">Close menu</span>\r\n                    <XIcon class=\"h-6 w-6 text-gray-300\" aria-hidden=\"true\" />\r\n                  </button>\r\n                </div>\r\n                <Disclosure\r\n                  as=\"div\"\r\n                  class=\"border-t border-gray-400 px-4 py-6\"\r\n                  v-slot=\"{ open }\"\r\n                >\r\n                  <h3 class=\"-mx-2 -my-3 flow-root\">\r\n                    <DisclosureButton as=\"template\">\r\n                      <div\r\n                        class=\"px-2 py-3 bg-gray-700 w-full flex items-center justify-between text-gray-400 hover:text-gray-200\"\r\n                      >\r\n                        <span class=\"font-medium text-gray-400\"> Etat </span>\r\n                        <span class=\"ml-6 flex items-center\">\r\n                          <PlusSmIcon\r\n                            v-if=\"!open\"\r\n                            class=\"h-5 w-5\"\r\n                            aria-hidden=\"true\"\r\n                          />\r\n                          <MinusSmIcon\r\n                            v-else\r\n                            class=\"h-5 w-5\"\r\n                            aria-hidden=\"true\"\r\n                          />\r\n                        </span>\r\n                      </div>\r\n                    </DisclosureButton>\r\n                  </h3>\r\n                  <DisclosurePanel class=\"pt-6\">\r\n                    <div class=\"space-y-6\">\r\n                      <div class=\"flex items-center\">\r\n                        <input\r\n                          value=\"en attente\"\r\n                          type=\"checkbox\"\r\n                          class=\"h-4 w-4 border-gray-400 rounded text-blue-600 focus:ring-blue-500\"\r\n                          v-model=\"etatsel\"\r\n                        />\r\n                        <label class=\"ml-3 min-w-0 flex-1 text-gray-500\">\r\n                          En attente\r\n                        </label>\r\n                      </div>\r\n                      <div class=\"flex items-center\">\r\n                        <input\r\n                          value=\"valide\"\r\n                          type=\"checkbox\"\r\n                          class=\"h-4 w-4 border-gray-400 rounded text-blue-600 focus:ring-blue-500\"\r\n                          v-model=\"etatsel\"\r\n                        />\r\n                        <label class=\"ml-3 min-w-0 flex-1 text-gray-500\">\r\n                          Valid√©\r\n                        </label>\r\n                      </div>\r\n                    </div>\r\n                  </DisclosurePanel>\r\n                </Disclosure>\r\n                <Disclosure\r\n                  as=\"div\"\r\n                  class=\"border-t border-gray-400 px-4 py-6\"\r\n                  v-slot=\"{ open }\"\r\n                >\r\n                  <h3 class=\"-mx-2 -my-3 flow-root\">\r\n                    <DisclosureButton as=\"template\">\r\n                      <div\r\n                        class=\"px-2 py-3 bg-gray-700 w-full flex items-center justify-between text-gray-400 hover:text-gray-200\"\r\n                      >\r\n                        <span class=\"font-medium text-gray-400\">\r\n                          Couleurs\r\n                        </span>\r\n                        <span class=\"ml-6 flex items-center\">\r\n                          <PlusSmIcon\r\n                            v-if=\"!open\"\r\n                            class=\"h-5 w-5\"\r\n                            aria-hidden=\"true\"\r\n                          />\r\n                          <MinusSmIcon\r\n                            v-else\r\n                            class=\"h-5 w-5\"\r\n                            aria-hidden=\"true\"\r\n                          />\r\n                        </span>\r\n                      </div>\r\n                    </DisclosureButton>\r\n                  </h3>\r\n                  <DisclosurePanel class=\"pt-6\">\r\n                    <div v-if=\"couleurs.length > 0\" class=\"space-y-6\">\r\n                      <div\r\n                        v-for=\"couleur in couleurs\"\r\n                        :key=\"couleur.id\"\r\n                        class=\"flex items-center\"\r\n                      >\r\n                        <input\r\n                          :value=\"couleur.id\"\r\n                          type=\"checkbox\"\r\n                          :checked=\"couleur.checked\"\r\n                          class=\"h-4 w-4 border-gray-400 rounded\"\r\n                          :style=\"{\r\n                            '--tw-ring-color': `#${couleur.code}`,\r\n                            color: `#${couleur.code}`,\r\n                          }\"\r\n                          v-model=\"couleursel\"\r\n                        />\r\n                        <label\r\n                          class=\"ml-3 min-w-0 flex-1\"\r\n                          :style=\"{ color: `#${couleur.code}` }\"\r\n                        >\r\n                          {{ couleur.nom }}\r\n                        </label>\r\n                      </div>\r\n                    </div>\r\n                  </DisclosurePanel>\r\n                </Disclosure>\r\n              </div>\r\n            </TransitionChild>\r\n          </Dialog>\r\n        </TransitionRoot>\r\n      </div>\r\n    </div>\r\n    <div class=\"flex-1 flex flex-col h-full w-full overflow-hidden\">\r\n      <div\r\n        class=\"h-full md:justify-center aligned-center m-4 overflow-auto overflow-x-hidden py-3\"\r\n      >\r\n        <div class=\"text-white text-2xl m-2 mb-4 font-bold\">\r\n          <h1>Liste de commandes</h1>\r\n        </div>\r\n        <table\r\n          class=\"bg-white rounded-md mx-1 grid grid-flow-row overflow-hidden text-black top-0\"\r\n        >\r\n          <thead>\r\n            <tr class=\"w-full grid grid-flow-col\">\r\n              <th class=\"px-2 py-2 col-span-1 hidden md:block\"></th>\r\n              <th class=\"px-4 py-2 col-span-1\">Client</th>\r\n              <th class=\"px-4 py-2 col-span-1\">Total</th>\r\n              <th class=\"px-4 py-2 col-span-1\">Etat</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody class=\"w-full grid grid-flow-row overflow-auto\">\r\n            <CommandeRow\r\n              v-for=\"commande in showedCommandes\"\r\n              :key=\"commande.id\"\r\n              :commande=\"commande\"\r\n            />\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      <Pagination\r\n        ref=\"Pagination\"\r\n        :currentPage=\"currentPage\"\r\n        :pageSize=\"nbperpage\"\r\n        :dataLength=\"commandes.length\"\r\n        @page=\"currentPage = $event\"\r\n        @next=\"currentPage++\"\r\n        @prev=\"currentPage--\"\r\n        @first=\"currentPage = 1\"\r\n        @last=\"currentPage = $refs.Pagination.pageNumber\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { debounce } from \"lodash\";\r\nimport Pagination from \"@/components/Pagination\";\r\nimport CommandeRow from \"@/components/CommandeRow\";\r\nimport {\r\n  Dialog,\r\n  DialogOverlay,\r\n  Disclosure,\r\n  DisclosureButton,\r\n  DisclosurePanel,\r\n  TransitionChild,\r\n  TransitionRoot,\r\n} from \"@headlessui/vue\";\r\nimport SearchBar from \"@/components/SearchBar\";\r\nimport { Icon } from \"@iconify/vue\";\r\nimport { FilterIcon, PlusSmIcon, MinusSmIcon } from \"@heroicons/vue/solid\";\r\nimport { XIcon } from \"@heroicons/vue/outline\";\r\nexport default {\r\n  name: \"Commandes\",\r\n  beforeMount() {\r\n    this.$store.dispatch(\"getCommandes\");\r\n  },\r\n  data() {\r\n    return {\r\n      mobileFiltersOpen: false,\r\n      currentPage: 1,\r\n      etatsel: [],\r\n    };\r\n  },\r\n  components: {\r\n    Dialog,\r\n    Pagination,\r\n    CommandeRow,\r\n    DialogOverlay,\r\n    Disclosure,\r\n    DisclosureButton,\r\n    DisclosurePanel,\r\n    TransitionChild,\r\n    TransitionRoot,\r\n    SearchBar,\r\n    Icon,\r\n    FilterIcon,\r\n    XIcon,\r\n    PlusSmIcon,\r\n    MinusSmIcon,\r\n  },\r\n  computed: {\r\n    nbperpage() {\r\n      if (window.innerWidth >= 640 && window.innerWidth < 768) return 13;\r\n      else if (window.innerWidth >= 768 && window.innerWidth < 1280)\r\n        return 3 * 5;\r\n      else if (window.innerWidth > 1280) return 4 * 5;\r\n      else return 8;\r\n    },\r\n    pageNumber() {\r\n      let nb = this.commandes.length / this.nbperpage;\r\n      if (this.commandes.length % this.nbperpage != 0) nb++;\r\n      return parseInt(nb);\r\n    },\r\n    commandes() {\r\n      return this.$store.getters.getCommandes;\r\n    },\r\n    showedCommandes() {\r\n      let start = (this.currentPage - 1) * this.nbperpage;\r\n      let end = start + this.nbperpage;\r\n      return this.commandes.slice(start, end);\r\n    },\r\n    currentUser() {\r\n      return this.$store.getters.getCurrentUser;\r\n    },\r\n  },\r\n  methods: {\r\n    searchfn: debounce(async function () {\r\n      console.log(this.search);\r\n      this.$store.dispatch(\"getCommandes\", {\r\n        etat: this.etatsel,\r\n        \"$Client.raisonSociale$\": this.$refs.searchbar.search,\r\n      });\r\n    }, 500),\r\n    openCreateModal() {},\r\n  },\r\n  watch: {\r\n    etatsel: function () {\r\n      this.searchfn();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style></style>\r\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}