{"ast":null,"code":"import Modal from \"@/components/Modal\";\nimport Pagination from \"@/components/Pagination\";\nimport { debounce } from \"lodash\";\nimport { Dialog, DialogOverlay, Disclosure, DisclosureButton, DisclosurePanel, TransitionChild, TransitionRoot } from \"@headlessui/vue\";\nimport { MinusSmIcon, PlusSmIcon, FilterIcon } from \"@heroicons/vue/solid\";\nimport { XIcon } from \"@heroicons/vue/outline\";\nimport SearchBar from \"@/components/SearchBar\";\nimport MatiereRow from \"@/components/MatiereRow\";\nimport { Icon } from \"@iconify/vue\";\nexport default {\n  name: \"MatieresPremiere\",\n  components: {\n    Pagination,\n    Icon,\n    SearchBar,\n    Dialog,\n    DialogOverlay,\n    Disclosure,\n    DisclosureButton,\n    DisclosurePanel,\n    TransitionChild,\n    TransitionRoot,\n    FilterIcon,\n    MatiereRow,\n    MinusSmIcon,\n    PlusSmIcon,\n    XIcon,\n    Modal\n  },\n\n  async beforeMount() {\n    await this.$store.dispatch(\"getMatieres\");\n  },\n\n  data() {\n    return {\n      arrivage: [],\n      newArrivage: {},\n      currentPage: 1,\n      newMatiere: {\n        designation: ''\n      },\n      mobileFiltersOpen: false\n    };\n  },\n\n  methods: {\n    achat() {\n      this.$store.dispatch(\"arrivageMatieres\", this.arrivage).then(() => {\n        this.arrivage = [];\n        this.$refs.arrivagemodal.open = false;\n      });\n    },\n\n    addArrivage() {\n      if (this.newArrivage.MatiereId && this.newArrivage.prixUnitaire && this.newArrivage.quantite) {\n        this.arrivage.push(this.newArrivage);\n        this.newArrivage = {};\n      }\n    },\n\n    create() {\n      this.$store.dispatch(\"addMatiere\", this.newMatiere);\n      this.$refs.createmodal.open = false;\n    },\n\n    openCreateModal() {\n      this.$refs.createmodal.open = true;\n    },\n\n    searchfn: debounce(async function (e) {\n      this.$store.dispatch(\"getMatieres\", {\n        designation: e\n      });\n    }, 500),\n\n    opendeletemodal() {\n      this.$refs.deletemodal.open = true;\n    }\n\n  },\n  computed: {\n    matieres() {\n      return this.$store.getters.getMatieres;\n    },\n\n    nbperpage() {\n      if (window.innerWidth >= 640 && window.innerWidth < 768) return 2 * 5;else if (window.innerWidth >= 768 && window.innerWidth < 1280) return 3 * 5;else if (window.innerWidth > 1280) return 4 * 5;else return 6;\n    },\n\n    showedMatieres() {\n      let matieres = this.matieres;\n      if (matieres.length % this.nbperpage != 0 && parseInt(matieres.length / this.nbperpage) == this.currentPage - 1) return matieres.slice((this.currentPage - 1) * this.nbperpage);\n      return matieres.slice((this.currentPage - 1) * this.nbperpage, (this.currentPage - 1) * this.nbperpage + this.nbperpage);\n    },\n\n    currentUser() {\n      return this.$store.getters.getCurrentUser;\n    }\n\n  },\n  watch: {}\n};","map":{"version":3,"sources":["C:\\Users\\Dell\\Desktop\\vost-app\\src\\views\\produits\\MatierePremiere.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div\r\n\t\tclass=\"flex flex-col w-full justify-center items-center h-full bg-gray-700 overflow-hidden\"\r\n\t>\r\n\t\t<div class=\"flex self-start w-full items-center space-x-3 h-16 py-1 px-2\">\r\n\t\t\t<SearchBar ref=\"searchbar\" @search=\"searchfn\" />\r\n\t\t\t<div\r\n\t\t\t\tclass=\"rounded-full py-2 px-2 bg-gray-500\"\r\n\t\t\t\t:class=\"{ hidden: $refs?.searchbar?.open }\"\r\n\t\t\t>\r\n\t\t\t\t<FilterIcon\r\n\t\t\t\t\t@click=\"this.$refs.arrivagemodal.open = true\"\r\n\t\t\t\t\tclass=\"h-7 fill-current text-white\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"rounded-full py-2 px-2 bg-gray-500\" v-if=\"currentUser.Profile.Autorisations.find(el=>el.nom == 'add-matiere')\">\r\n\t\t\t\t<Icon\r\n\t\t\t\t\ticon=\"ant-design:file-add-filled\"\r\n\t\t\t\t\t@click=\"openCreateModal\"\r\n\t\t\t\t\tclass=\"h-7 w-7 fill-current text-white\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"bg-blue-900\">\r\n\t\t\t<div>\r\n\t\t\t\t<!-- Mobile filter dialog -->\r\n\t\t\t\t<TransitionRoot as=\"template\" :show=\"mobileFiltersOpen\">\r\n\t\t\t\t\t<Dialog\r\n\t\t\t\t\t\tas=\"div\"\r\n\t\t\t\t\t\tclass=\"fixed inset-0 flex z-40\"\r\n\t\t\t\t\t\t@close=\"mobileFiltersOpen = false\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TransitionChild\r\n\t\t\t\t\t\t\tas=\"template\"\r\n\t\t\t\t\t\t\tenter=\"transition-opacity ease-linear duration-300\"\r\n\t\t\t\t\t\t\tenter-from=\"opacity-0\"\r\n\t\t\t\t\t\t\tenter-to=\"opacity-100\"\r\n\t\t\t\t\t\t\tleave=\"transition-opacity ease-linear duration-300\"\r\n\t\t\t\t\t\t\tleave-from=\"opacity-100\"\r\n\t\t\t\t\t\t\tleave-to=\"opacity-0\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<DialogOverlay class=\"fixed inset-0 bg-black bg-opacity-25\" />\r\n\t\t\t\t\t\t</TransitionChild>\r\n\r\n\t\t\t\t\t\t<TransitionChild\r\n\t\t\t\t\t\t\tas=\"template\"\r\n\t\t\t\t\t\t\tenter=\"transition ease-in-out duration-300 transform\"\r\n\t\t\t\t\t\t\tenter-from=\"translate-x-full\"\r\n\t\t\t\t\t\t\tenter-to=\"translate-x-0\"\r\n\t\t\t\t\t\t\tleave=\"transition ease-in-out duration-300 transform\"\r\n\t\t\t\t\t\t\tleave-from=\"translate-x-0\"\r\n\t\t\t\t\t\t\tleave-to=\"translate-x-full\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\"ml-auto relative max-w-xs w-full h-full bg-gray-900 shadow-xl py-4 pb-12 flex flex-col overflow-y-auto\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<div class=\"px-4 flex items-center justify-between\">\r\n\t\t\t\t\t\t\t\t\t<h2 class=\"text-lg font-medium text-gray-300\">Filters</h2>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"-mr-2 w-7 h-7 bg-gray-800 p-1 rounded-md flex items-center justify-center text-gray-400\"\r\n\t\t\t\t\t\t\t\t\t\t@click=\"mobileFiltersOpen = false\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"sr-only text-white\">Close menu</span>\r\n\t\t\t\t\t\t\t\t\t\t<XIcon class=\"h-6 w-6 text-gray-300\" aria-hidden=\"true\" />\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<Disclosure\r\n\t\t\t\t\t\t\t\t\tas=\"div\"\r\n\t\t\t\t\t\t\t\t\tclass=\"border-t border-gray-400 px-4 py-6\"\r\n\t\t\t\t\t\t\t\t\tv-slot=\"{ open }\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<h3 class=\"-mx-2 -my-3 flow-root\">\r\n\t\t\t\t\t\t\t\t\t\t<DisclosureButton as=\"template\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"px-2 py-3 bg-gray-700 w-full flex items-center justify-between text-gray-400 hover:text-gray-200\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"font-medium text-gray-400\"> Types </span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"ml-6 flex items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<PlusSmIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"!open\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-5 w-5\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MinusSmIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-else\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-5 w-5\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</DisclosureButton>\r\n\t\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t\t<DisclosurePanel class=\"pt-6\">\r\n\t\t\t\t\t\t\t\t\t\t<div v-if=\"types.length > 0\" class=\"space-y-6\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\tv-for=\"type in types\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:key=\"type.id\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flex items-center\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t:value=\"type.id\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t:checked=\"type.checked\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 border-gray-400 rounded text-blue-600 focus:ring-blue-500\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"typesel\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"ml-3 min-w-0 flex-1 text-gray-500\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{ type.nom }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</DisclosurePanel>\r\n\t\t\t\t\t\t\t\t</Disclosure>\r\n\t\t\t\t\t\t\t\t<Disclosure\r\n\t\t\t\t\t\t\t\t\tas=\"div\"\r\n\t\t\t\t\t\t\t\t\tclass=\"border-t border-gray-400 px-4 py-6\"\r\n\t\t\t\t\t\t\t\t\tv-slot=\"{ open }\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<h3 class=\"-mx-2 -my-3 flow-root\">\r\n\t\t\t\t\t\t\t\t\t\t<DisclosureButton as=\"template\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"px-2 py-3 bg-gray-700 w-full flex items-center justify-between text-gray-400 hover:text-gray-200\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"font-medium text-gray-400\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tCouleurs\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"ml-6 flex items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<PlusSmIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"!open\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-5 w-5\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MinusSmIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-else\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-5 w-5\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</DisclosureButton>\r\n\t\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t\t<DisclosurePanel class=\"pt-6\">\r\n\t\t\t\t\t\t\t\t\t\t<div v-if=\"couleurs.length > 0\" class=\"space-y-6\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\tv-for=\"couleur in couleurs\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:key=\"couleur.id\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flex items-center\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t:value=\"couleur.id\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t:checked=\"couleur.checked\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 border-gray-400 rounded\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t:style=\"{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'--tw-ring-color': `#${couleur.code}`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: `#${couleur.code}`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"couleursel\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"ml-3 min-w-0 flex-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t:style=\"{ color: `#${couleur.code}` }\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{ couleur.nom }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</DisclosurePanel>\r\n\t\t\t\t\t\t\t\t</Disclosure>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</TransitionChild>\r\n\t\t\t\t\t</Dialog>\r\n\t\t\t\t</TransitionRoot>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"flex-1 flex flex-col h-full w-full overflow-hidden\">\r\n\t\t\t<div\r\n\t\t\t\tclass=\"h-full md:justify-center aligned-center w-full flex flex-1 flex-col overflow-auto overflow-x-hidden py-3\"\r\n\t\t\t>\r\n\t\t\t\t<ul\r\n\t\t\t\t\tclass=\"w-full h-full grid grid-flow-row gap-4 grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 justify-center items-center\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<MatiereRow\r\n\t\t\t\t\t\tv-for=\"matiere in showedMatieres\"\r\n\t\t\t\t\t\t:key=\"matiere.id\"\r\n\t\t\t\t\t\t:matiere=\"matiere\"\r\n\t\t\t\t\t\t@delete=\"opendeletemodal\"\r\n\t\t\t\t\t\t@show=\"showProduct\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<Pagination\r\n\t\t\t\tref=\"Pagination\"\r\n\t\t\t\t:currentPage=\"currentPage\"\r\n\t\t\t\t:pageSize=\"nbperpage\"\r\n\t\t\t\t:dataLength=\"matieres.length\"\r\n\t\t\t\t@page=\"currentPage = $event\"\r\n\t\t\t\t@next=\"currentPage++\"\r\n\t\t\t\t@prev=\"currentPage--\"\r\n\t\t\t\t@first=\"currentPage = 1\"\r\n\t\t\t\t@last=\"currentPage = $refs.Pagination.pageNumber\"\r\n\t\t\t/>\r\n\t\t</div>\r\n\t</div>\r\n\t<Modal ref=\"createmodal\" primaryColor=\"haja\" @submit=\"create\">\r\n\t\t<template v-slot:title>Ajouter une matiere premiere</template>\r\n\t\t<template v-slot:body>\r\n\t\t\t<div class=\"flex flex-col w-full flex-1\">\r\n\t\t\t\t<div class=\"flex flex-col mt-4 px-2 py-3\">\r\n\t\t\t\t\t<div class=\"flex flex-col w-full\">\r\n\t\t\t\t\t\t<div class=\"flex flex-col items-start space-y-2 space-x-2 w-ful\">\r\n\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\tfor=\"nom\"\r\n\t\t\t\t\t\t\t\tclass=\"flex items-center text-bold h-full rounded-l-md text-md\"\r\n\t\t\t\t\t\t\t\t>Nom</label\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tname=\"designation\"\r\n\t\t\t\t\t\t\t\tid=\"designation\"\r\n\t\t\t\t\t\t\t\tv-model=\"newMatiere.designation\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Nom\"\r\n\t\t\t\t\t\t\t\tclass=\"rounded-md border-0 w-3/4\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</template>\r\n\t\t<template v-slot:submit>Ajouter</template>\r\n\t</Modal>\r\n    <Modal ref=\"arrivagemodal\" primaryColor=\"haja\" @submit=\"achat\">\r\n        <template v-slot:title>Arrivage Matiere premiere</template>\r\n        <template v-slot:body>\r\n            <!-- show a table with columns matiere,prix unitaire,quantite, total -->\r\n            <table class=\"table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th>Matiere</th>\r\n                        <th>Prix unitaire</th>\r\n                        <th>Quantite</th>\r\n                        <th>Total</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"(matiere,index) in arrivage\" :key=\"index\">\r\n                        <td>{{ matieres.find(el=>el.id == matiere.MatiereId).designation}}</td>\r\n                        <td>{{ matiere.prixUnitaire }} Da</td>\r\n                        <td>{{ matiere.quantite }}</td>\r\n                        <td>{{ matiere.prixUnitaire * matiere.quantite }} Da</td>\r\n                    </tr>\r\n                    <!-- add row for entring infos -->\r\n                    <tr class=\"py-3\">\r\n                        <td class=\"form-control\">\r\n                            <select v-model=\"newArrivage.MatiereId\" class=\"select select-sm py-0 align-middle\">\r\n                                <option v-for=\"matiere in matieres\" :key=\"matiere.id\" :value=\"matiere.id\">\r\n                                    {{ matiere.designation }}\r\n                                </option>\r\n                            </select>\r\n                        </td>\r\n                        <td>\r\n                            <input type=\"number\" name=\"prix\" id=\"prix\" v-model=\"newArrivage.prixUnitaire\" placeholder=\"Prix unitaire\" class=\"rounded-md border-0 w-3/4\" />\r\n                        </td>\r\n                        <td>\r\n                            <input type=\"number\" name=\"quantite\" id=\"quantite\" v-model=\"newArrivage.quantite\" placeholder=\"Quantite\" class=\"rounded-md border-0 w-3/4\" />\r\n                        </td>\r\n                        <td>\r\n                           <!-- daisyui button -->\r\n                            <button @click=\"addArrivage\" class=\"btn btn-primary btn-sm\">Ajouter</button>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </template> \r\n            <template v-slot:submit>Enregistrer</template>\r\n\r\n    </Modal>\r\n</template>\r\n\r\n<script>\r\nimport Modal from \"@/components/Modal\";\r\nimport Pagination from \"@/components/Pagination\";\r\nimport { debounce } from \"lodash\";\r\nimport {\r\n\tDialog,\r\n\tDialogOverlay,\r\n\tDisclosure,\r\n\tDisclosureButton,\r\n\tDisclosurePanel,\r\n\tTransitionChild,\r\n\tTransitionRoot,\r\n} from \"@headlessui/vue\";\r\nimport {\r\n\tMinusSmIcon,\r\n\tPlusSmIcon,\r\n\tFilterIcon,\r\n} from \"@heroicons/vue/solid\";\r\nimport { XIcon } from \"@heroicons/vue/outline\";\r\nimport SearchBar from \"@/components/SearchBar\";\r\nimport MatiereRow from \"@/components/MatiereRow\";\r\nimport { Icon } from \"@iconify/vue\";\r\nexport default {\r\n\tname: \"MatieresPremiere\",\r\n\tcomponents: {\r\n\t\tPagination,\r\n\t\tIcon,\r\n\t\tSearchBar,\r\n\t\tDialog,\r\n\t\tDialogOverlay,\r\n\t\tDisclosure,\r\n\t\tDisclosureButton,\r\n\t\tDisclosurePanel,\r\n\t\tTransitionChild,\r\n\t\tTransitionRoot,\r\n\t\tFilterIcon,\r\n        MatiereRow,\r\n\t\tMinusSmIcon,\r\n\t\tPlusSmIcon,\r\n\t\tXIcon,\r\n\t\tModal,\r\n\t},\r\n\tasync beforeMount() {\r\n\t\tawait this.$store.dispatch(\"getMatieres\");\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n            arrivage:[],\r\n            newArrivage:{},\r\n\t\t\tcurrentPage: 1,\r\n\t\t\tnewMatiere: {\r\n\t\t\t\tdesignation: ''\r\n\t\t\t},\r\n\t\t\tmobileFiltersOpen: false,\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n        achat(){\r\n            this.$store.dispatch(\"arrivageMatieres\",this.arrivage).then(()=>{\r\n                this.arrivage = [];\r\n                this.$refs.arrivagemodal.open = false;\r\n            })\r\n        },\r\n        addArrivage() {\r\n            if(this.newArrivage.MatiereId && this.newArrivage.prixUnitaire && this.newArrivage.quantite){\r\n                this.arrivage.push(this.newArrivage);\r\n                this.newArrivage = {};\r\n            }\r\n        },\r\n\t\tcreate() {\r\n\t\t\tthis.$store.dispatch(\"addMatiere\", this.newMatiere);\r\n\t\t\tthis.$refs.createmodal.open = false;\r\n\t\t},\r\n\t\topenCreateModal() {\r\n\t\t\tthis.$refs.createmodal.open = true;\r\n\t\t},\r\n\r\n\t\tsearchfn: debounce(async function (e) {\r\n\t\t\tthis.$store.dispatch(\"getMatieres\", {\r\n\t\t\t\tdesignation: e,\r\n\t\t\t});\r\n\t\t}, 500),\r\n\t\topendeletemodal() {\r\n\t\t\tthis.$refs.deletemodal.open = true;\r\n\t\t},\r\n\t},\r\n\tcomputed: {\r\n\t\tmatieres() {\r\n\t\t\treturn this.$store.getters.getMatieres;\r\n\t\t},\r\n\t\tnbperpage() {\r\n\t\t\tif (window.innerWidth >= 640 && window.innerWidth < 768) return 2 * 5;\r\n\t\t\telse if (window.innerWidth >= 768 && window.innerWidth < 1280)\r\n\t\t\t\treturn 3 * 5;\r\n\t\t\telse if (window.innerWidth > 1280) return 4 * 5;\r\n\t\t\telse return 6;\r\n\t\t},\r\n\t\tshowedMatieres() {\r\n\t\t\tlet matieres = this.matieres;\r\n\t\t\tif (\r\n\t\t\t\tmatieres.length % this.nbperpage != 0 &&\r\n\t\t\t\tparseInt(matieres.length / this.nbperpage) == this.currentPage - 1\r\n\t\t\t)\r\n\t\t\t\treturn matieres.slice((this.currentPage - 1) * this.nbperpage);\r\n\t\t\treturn matieres.slice(\r\n\t\t\t\t(this.currentPage - 1) * this.nbperpage,\r\n\t\t\t\t(this.currentPage - 1) * this.nbperpage + this.nbperpage\r\n\t\t\t);\r\n\t\t},\r\n\t\tcurrentUser() {\r\n\t\t\treturn this.$store.getters.getCurrentUser;\r\n\t\t},\r\n\t},\r\n\twatch: {\r\n\t},\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.diamond {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\ttext-align: center;\r\n\ttransform: rotate(45deg);\r\n}\r\n.diamond > div {\r\n\ttransform: rotate(-45deg);\r\n}\r\n.diamond.hidden {\r\n\tdisplay: none;\r\n}\r\n@media screen and (min-width: 640px) {\r\n\t.diamond.sm\\:flex {\r\n\t\tdisplay: flex;\r\n\t}\r\n}\r\n</style>\r\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}