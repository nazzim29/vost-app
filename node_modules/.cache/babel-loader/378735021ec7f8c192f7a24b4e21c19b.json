{"ast":null,"code":"import { debounce } from \"lodash\";\nimport Pagination from \"@/components/Pagination\";\nimport CommandeRow from \"@/components/CommandeRow\";\nimport { Dialog, DialogOverlay, Disclosure, DisclosureButton, DisclosurePanel, TransitionChild, TransitionRoot } from \"@headlessui/vue\";\nimport SearchBar from \"@/components/SearchBar\";\nimport { Icon } from \"@iconify/vue\";\nimport { FilterIcon, PlusSmIcon, MinusSmIcon } from \"@heroicons/vue/solid\";\nimport { XIcon } from \"@heroicons/vue/outline\";\nexport default {\n  name: \"Commandes\",\n\n  beforeMount() {\n    this.$store.dispatch(\"getCommandes\");\n  },\n\n  data() {\n    return {\n      mobileFiltersOpen: false,\n      currentPage: 1,\n      etatsel: []\n    };\n  },\n\n  components: {\n    Dialog,\n    Pagination,\n    CommandeRow,\n    DialogOverlay,\n    Disclosure,\n    DisclosureButton,\n    DisclosurePanel,\n    TransitionChild,\n    TransitionRoot,\n    SearchBar,\n    Icon,\n    FilterIcon,\n    XIcon,\n    PlusSmIcon,\n    MinusSmIcon\n  },\n  computed: {\n    nbperpage() {\n      if (window.innerWidth >= 640 && window.innerWidth < 768) return 13;else if (window.innerWidth >= 768 && window.innerWidth < 1280) return 3 * 5;else if (window.innerWidth > 1280) return 4 * 5;else return 8;\n    },\n\n    pageNumber() {\n      let nb = this.commandes.length / this.nbperpage;\n      if (this.commandes.length % this.nbperpage != 0) nb++;\n      return parseInt(nb);\n    },\n\n    commandes() {\n      return this.$store.getters.getCommandes;\n    },\n\n    showedCommandes() {\n      let start = (this.currentPage - 1) * this.nbperpage;\n      let end = start + this.nbperpage;\n      return this.commandes.slice(start, end);\n    },\n\n    currentUser() {\n      return this.$store.getters.getCurrentUser;\n    }\n\n  },\n  methods: {\n    searchfn: debounce(async function () {\n      console.log(this.search);\n      this.$store.dispatch(\"getCommandes\", {\n        etat: this.etatsel,\n        \"$Client.raisonSociale$\": this.$refs.searchbar.search\n      });\n    }, 500),\n\n    openCreateModal() {}\n\n  },\n  watch: {\n    etatsel: function () {\n      this.searchfn();\n    }\n  }\n};","map":{"version":3,"sources":["C:\\Users\\Dell\\Desktop\\vost-app\\src\\views\\commandes\\Commandes.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div\r\n\t\tclass=\"flex flex-col w-full justify-center items-center h-full bg-gray-700 overflow-hidden\"\r\n\t>\r\n\t\t<div class=\"flex self-start w-full items-center space-x-3 h-16 py-1 px-2\">\r\n\t\t\t<SearchBar ref=\"searchbar\" @search=\"searchfn\" />\r\n\t\t\t<div\r\n\t\t\t\tclass=\"rounded-full py-2 px-2 bg-gray-500\"\r\n\t\t\t\t:class=\"{ hidden: refs?.searchbar?.open }\"\r\n\t\t\t>\r\n\t\t\t\t<FilterIcon\r\n\t\t\t\t\t@click=\"mobileFiltersOpen = !mobileFiltersOpen\"\r\n\t\t\t\t\tclass=\"h-7 fill-current text-white\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<div\r\n\t\t\t\tclass=\"rounded-full py-2 px-2 bg-gray-500\"\r\n\t\t\t\t@click=\"$router.push({ name: 'Commande', params: { id: 'new' } })\"\r\n\t\t\t\tv-if=\"currentUser.Profile.Autorisations.find(el=>el.nom == 'add-commande')\"\r\n\t\t\t>\r\n\t\t\t\t<Icon\r\n\t\t\t\t\ticon=\"ant-design:file-add-filled\"\r\n\t\t\t\t\t@click=\"openCreateModal\"\r\n\t\t\t\t\tclass=\"h-7 w-7 fill-current text-white\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"bg-blue-900\">\r\n\t\t\t<div>\r\n\t\t\t\t<!-- Mobile filter dialog -->\r\n\t\t\t\t<TransitionRoot as=\"template\" :show=\"mobileFiltersOpen\">\r\n\t\t\t\t\t<Dialog\r\n\t\t\t\t\t\tas=\"div\"\r\n\t\t\t\t\t\tclass=\"fixed inset-0 flex z-40\"\r\n\t\t\t\t\t\t@close=\"mobileFiltersOpen = false\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TransitionChild\r\n\t\t\t\t\t\t\tas=\"template\"\r\n\t\t\t\t\t\t\tenter=\"transition-opacity ease-linear duration-300\"\r\n\t\t\t\t\t\t\tenter-from=\"opacity-0\"\r\n\t\t\t\t\t\t\tenter-to=\"opacity-100\"\r\n\t\t\t\t\t\t\tleave=\"transition-opacity ease-linear duration-300\"\r\n\t\t\t\t\t\t\tleave-from=\"opacity-100\"\r\n\t\t\t\t\t\t\tleave-to=\"opacity-0\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<DialogOverlay class=\"fixed inset-0 bg-black bg-opacity-25\" />\r\n\t\t\t\t\t\t</TransitionChild>\r\n\r\n\t\t\t\t\t\t<TransitionChild\r\n\t\t\t\t\t\t\tas=\"template\"\r\n\t\t\t\t\t\t\tenter=\"transition ease-in-out duration-300 transform\"\r\n\t\t\t\t\t\t\tenter-from=\"translate-x-full\"\r\n\t\t\t\t\t\t\tenter-to=\"translate-x-0\"\r\n\t\t\t\t\t\t\tleave=\"transition ease-in-out duration-300 transform\"\r\n\t\t\t\t\t\t\tleave-from=\"translate-x-0\"\r\n\t\t\t\t\t\t\tleave-to=\"translate-x-full\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\"ml-auto relative max-w-xs w-full h-full bg-gray-900 shadow-xl py-4 pb-12 flex flex-col overflow-y-auto\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<div class=\"px-4 flex items-center justify-between\">\r\n\t\t\t\t\t\t\t\t\t<h2 class=\"text-lg font-medium text-gray-300\">Filters</h2>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"-mr-2 w-7 h-7 bg-gray-800 p-1 rounded-md flex items-center justify-center text-gray-400\"\r\n\t\t\t\t\t\t\t\t\t\t@click=\"mobileFiltersOpen = false\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"sr-only text-white\">Close menu</span>\r\n\t\t\t\t\t\t\t\t\t\t<XIcon class=\"h-6 w-6 text-gray-300\" aria-hidden=\"true\" />\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<Disclosure\r\n\t\t\t\t\t\t\t\t\tas=\"div\"\r\n\t\t\t\t\t\t\t\t\tclass=\"border-t border-gray-400 px-4 py-6\"\r\n\t\t\t\t\t\t\t\t\tv-slot=\"{ open }\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<h3 class=\"-mx-2 -my-3 flow-root\">\r\n\t\t\t\t\t\t\t\t\t\t<DisclosureButton as=\"template\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"px-2 py-3 bg-gray-700 w-full flex items-center justify-between text-gray-400 hover:text-gray-200\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"font-medium text-gray-400\"> Etat </span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"ml-6 flex items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<PlusSmIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"!open\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-5 w-5\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MinusSmIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-else\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-5 w-5\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</DisclosureButton>\r\n\t\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t\t<DisclosurePanel class=\"pt-6\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"space-y-6\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"flex items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"en attente\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 border-gray-400 rounded text-blue-600 focus:ring-blue-500\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"etatsel\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"ml-3 min-w-0 flex-1 text-gray-500\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tEn attente\r\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"flex items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue=\"valide\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 border-gray-400 rounded text-blue-600 focus:ring-blue-500\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"etatsel\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"ml-3 min-w-0 flex-1 text-gray-500\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tValid√©\r\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</DisclosurePanel>\r\n\t\t\t\t\t\t\t\t</Disclosure>\r\n\t\t\t\t\t\t\t\t<Disclosure\r\n\t\t\t\t\t\t\t\t\tas=\"div\"\r\n\t\t\t\t\t\t\t\t\tclass=\"border-t border-gray-400 px-4 py-6\"\r\n\t\t\t\t\t\t\t\t\tv-slot=\"{ open }\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<h3 class=\"-mx-2 -my-3 flow-root\">\r\n\t\t\t\t\t\t\t\t\t\t<DisclosureButton as=\"template\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"px-2 py-3 bg-gray-700 w-full flex items-center justify-between text-gray-400 hover:text-gray-200\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"font-medium text-gray-400\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tCouleurs\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"ml-6 flex items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<PlusSmIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"!open\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-5 w-5\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<MinusSmIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-else\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-5 w-5\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</DisclosureButton>\r\n\t\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t\t<DisclosurePanel class=\"pt-6\">\r\n\t\t\t\t\t\t\t\t\t\t<div v-if=\"couleurs.length > 0\" class=\"space-y-6\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\tv-for=\"couleur in couleurs\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:key=\"couleur.id\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flex items-center\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t:value=\"couleur.id\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t:checked=\"couleur.checked\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 border-gray-400 rounded\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t:style=\"{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'--tw-ring-color': `#${couleur.code}`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: `#${couleur.code}`,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"couleursel\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"ml-3 min-w-0 flex-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t:style=\"{ color: `#${couleur.code}` }\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{ couleur.nom }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</DisclosurePanel>\r\n\t\t\t\t\t\t\t\t</Disclosure>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</TransitionChild>\r\n\t\t\t\t\t</Dialog>\r\n\t\t\t\t</TransitionRoot>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"flex-1 flex flex-col h-full w-full overflow-hidden\">\r\n\t\t\t<div\r\n\t\t\t\tclass=\"h-full md:justify-center aligned-center w-full flex flex-1 flex-col overflow-auto overflow-x-hidden py-3\"\r\n\t\t\t>\r\n\t\t\t\t<table\r\n\t\t\t\t\tclass=\"bg-white rounded-md mx-1 grid grid-flow-row overflow-hidden text-black my-auto\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t<tr class=\"w-full grid grid-flow-col\">\r\n\t\t\t\t\t\t\t<th class=\"px-2 py-2 col-span-1 hidden md:block\"></th>\r\n\t\t\t\t\t\t\t<th class=\"px-4 py-2 col-span-1\">Client</th>\r\n\t\t\t\t\t\t\t<th class=\"px-4 py-2 col-span-1\">Totale</th>\r\n\t\t\t\t\t\t\t<th class=\"px-4 py-2 col-span-1\">Etat</th>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t</thead>\r\n\t\t\t\t\t<tbody class=\"w-full grid grid-flow-row overflow-auto\">\r\n\t\t\t\t\t\t<CommandeRow\r\n\t\t\t\t\t\t\tv-for=\"commande in showedCommandes\"\r\n\t\t\t\t\t\t\t:key=\"commande.id\"\r\n\t\t\t\t\t\t\t:commande=\"commande\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</tbody>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t\t<Pagination\r\n\t\t\t\tref=\"Pagination\"\r\n\t\t\t\t:currentPage=\"currentPage\"\r\n\t\t\t\t:pageSize=\"nbperpage\"\r\n\t\t\t\t:dataLength=\"commandes.length\"\r\n\t\t\t\t@page=\"currentPage = $event\"\r\n\t\t\t\t@next=\"currentPage++\"\r\n\t\t\t\t@prev=\"currentPage--\"\r\n\t\t\t\t@first=\"currentPage = 1\"\r\n\t\t\t\t@last=\"currentPage = $refs.Pagination.pageNumber\"\r\n\t\t\t/>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport { debounce } from \"lodash\";\r\nimport Pagination from \"@/components/Pagination\";\r\nimport CommandeRow from \"@/components/CommandeRow\";\r\nimport {\r\n\tDialog,\r\n\tDialogOverlay,\r\n\tDisclosure,\r\n\tDisclosureButton,\r\n\tDisclosurePanel,\r\n\tTransitionChild,\r\n\tTransitionRoot,\r\n} from \"@headlessui/vue\";\r\nimport SearchBar from \"@/components/SearchBar\";\r\nimport { Icon } from \"@iconify/vue\";\r\nimport { FilterIcon, PlusSmIcon, MinusSmIcon } from \"@heroicons/vue/solid\";\r\nimport { XIcon } from \"@heroicons/vue/outline\";\r\nexport default {\r\n\tname: \"Commandes\",\r\n\tbeforeMount() {\r\n\t\tthis.$store.dispatch(\"getCommandes\");\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmobileFiltersOpen: false,\r\n\t\t\tcurrentPage: 1,\r\n\t\t\tetatsel: [],\r\n\t\t};\r\n\t},\r\n\tcomponents: {\r\n\t\tDialog,\r\n\t\tPagination,\r\n\t\tCommandeRow,\r\n\t\tDialogOverlay,\r\n\t\tDisclosure,\r\n\t\tDisclosureButton,\r\n\t\tDisclosurePanel,\r\n\t\tTransitionChild,\r\n\t\tTransitionRoot,\r\n\t\tSearchBar,\r\n\t\tIcon,\r\n\t\tFilterIcon,\r\n\t\tXIcon,\r\n\t\tPlusSmIcon,\r\n\t\tMinusSmIcon,\r\n\t},\r\n\tcomputed: {\r\n\t\tnbperpage() {\r\n\t\t\tif (window.innerWidth >= 640 && window.innerWidth < 768) return 13;\r\n\t\t\telse if (window.innerWidth >= 768 && window.innerWidth < 1280)\r\n\t\t\t\treturn 3 * 5;\r\n\t\t\telse if (window.innerWidth > 1280) return 4 * 5;\r\n\t\t\telse return 8;\r\n\t\t},\r\n\t\tpageNumber() {\r\n\t\t\tlet nb = this.commandes.length / this.nbperpage;\r\n\t\t\tif (this.commandes.length % this.nbperpage != 0) nb++;\r\n\t\t\treturn parseInt(nb);\r\n\t\t},\r\n\t\tcommandes() {\r\n\t\t\treturn this.$store.getters.getCommandes;\r\n\t\t},\r\n\t\tshowedCommandes() {\r\n\t\t\tlet start = (this.currentPage - 1) * this.nbperpage;\r\n\t\t\tlet end = start + this.nbperpage;\r\n\t\t\treturn this.commandes.slice(start, end);\r\n\t\t},\r\n\t\tcurrentUser() {\r\n\t\t\treturn this.$store.getters.getCurrentUser;\r\n\t\t},\r\n\t},\r\n\tmethods: {\r\n\t\tsearchfn: debounce(async function () {\r\n\t\t\tconsole.log(this.search)\r\n\t\t\tthis.$store.dispatch(\"getCommandes\", {\r\n\t\t\t\tetat: this.etatsel,\r\n\t\t\t\t\"$Client.raisonSociale$\": this.$refs.searchbar.search,\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t}, 500),\r\n\t\topenCreateModal() {},\r\n\t},\r\n\twatch:{\r\n\t\tetatsel: function(){\r\n\t\t\tthis.searchfn();\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style></style>\r\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}