{"ast":null,"code":"import Modal from \"@/components/Modal\";\nimport { debounce } from \"lodash\";\nimport Pagination from \"@/components/Pagination\";\nimport { Dialog, DialogOverlay, Disclosure, DisclosureButton, DisclosurePanel, TransitionChild, TransitionRoot, Listbox, ListboxButton, ListboxOptions, ListboxOption } from \"@headlessui/vue\";\nimport { MinusSmIcon, PlusSmIcon, FilterIcon, CheckIcon, SelectorIcon } from \"@heroicons/vue/solid\";\nimport { XIcon } from \"@heroicons/vue/outline\";\nimport SearchBar from \"@/components/SearchBar\"; // import UserService from \"@/services/UserService\";\n\nimport ClientRow from \"@/components/ClientRow\";\nimport { Icon } from \"@iconify/vue\";\nexport default {\n  name: \"ClientIndex\",\n  components: {\n    Pagination,\n    SearchBar,\n    Dialog,\n    DialogOverlay,\n    Disclosure,\n    DisclosureButton,\n    DisclosurePanel,\n    ClientRow,\n    TransitionChild,\n    TransitionRoot,\n    FilterIcon,\n    MinusSmIcon,\n    PlusSmIcon,\n    XIcon,\n    Modal,\n    Icon,\n    CheckIcon,\n    SelectorIcon,\n    Listbox,\n    ListboxButton,\n    ListboxOptions,\n    ListboxOption\n  },\n\n  async beforeMount() {\n    // $(window).on('resize',this.)\n    await this.$store.dispatch(\"getClients\");\n    await this.$store.dispatch(\"getTypeClients\");\n  },\n\n  data() {\n    return {\n      newClient: {\n        raisonSociale: null,\n        numero: null,\n        numeroSecondaire: null,\n        email: null,\n        password: null,\n        paswordConfirm: null\n      },\n      typesel: [],\n      currentPage: 1,\n      mobileFiltersOpen: false\n    };\n  },\n\n  methods: {\n    searchfn: debounce(function (e) {\n      this.$store.dispatch(\"getClients\", {\n        TypeClientId: this.fonctionsel,\n        raisonSociale: e,\n        numero: e,\n        numeroSecondaire: e,\n        username: e\n      });\n    }, 500),\n\n    openModal(client) {\n      this.$refs.modal.open = true;\n      this.$refs.modal.client = client;\n    },\n\n    pencilCLick() {\n      this.$refs.fileInput.click();\n    },\n\n    avatarChanged() {\n      this.$refs.avatarDisplay.src = URL.createObjectURL(this.$refs.fileInput.files[0]);\n    },\n\n    openCreateModal() {\n      this.$refs.createModal.open = true;\n    },\n\n    addClient() {\n      this.$store.dispatch(\"addClient\", this.newClient).then(() => {\n        this.$refs.createModal.open = false;\n        this.$store.dispatch(\"getClients\").then(() => {\n          this.$refs.searchbar.search = this.newClient.username;\n        });\n      });\n    }\n\n  },\n  computed: {\n    clients() {\n      return this.$store.getters.getClients;\n    },\n\n    nbperpage() {\n      if (window.innerWidth >= 640 && window.innerWidth < 768) return 2 * 5;else if (window.innerWidth >= 768 && window.innerWidth < 1280) return 16;else if (window.innerWidth > 1280) return 4 * 5;else return 1 * 5;\n    },\n\n    filters() {\n      return [{\n        id: \"nom\",\n        name: \"Types\",\n        options: this.types\n      }];\n    },\n\n    showedClients() {\n      let cp = this.$refs?.Pagination?.currentPage || 1;\n      let clients = this.clients;\n      if (!clients) return [];\n      return clients.slice((cp - 1) * this.nbperpage, cp * this.nbperpage);\n    },\n\n    types() {\n      return this.$store.getters.getTypeClients;\n    },\n\n    currentUser() {\n      return this.$store.getters.getCurrentUser;\n    }\n\n  },\n  watch: {\n    typesel: function () {\n      this.$store.dispatch(\"getClients\", {\n        TypeClientId: this.typesel,\n        raisonSociale: this.$refs.searchbar.search,\n        numero: this.$refs.searchbar.search,\n        numeroSecondaire: this.$refs.searchbar.search,\n        username: this.$refs.searchbar.search\n      });\n    }\n  }\n};","map":{"version":3,"sources":["C:\\Users\\Dell\\Desktop\\vost-app\\src\\views\\client\\Client.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div\r\n\t\tclass=\"flex flex-col w-full h-screen bg-gray-700 overflow-hidden space-y-1\"\r\n\t>\r\n\t\t<div\r\n\t\t\tclass=\"flex self-start w-full items-center space-x-3 h-16 py-1 px-2 md:items-center\"\r\n\t\t>\r\n\t\t\t<SearchBar ref=\"searchbar\" @search=\"searchfn\" />\r\n\t\t\t<div class=\"rounded-full py-2 px-2 bg-gray-500\">\r\n\t\t\t\t<FilterIcon\r\n\t\t\t\t\t@click=\"mobileFiltersOpen = !mobileFiltersOpen\"\r\n\t\t\t\t\tclass=\"h-7 fill-current text-white\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"rounded-full py-2 px-2 bg-gray-500\" v-if=\"currentUser.Profile.Autorisations.find(el=>el.nom == 'add-client')\">\r\n\t\t\t\t<Icon\r\n\t\t\t\t\ticon=\"ant-design:user-add-outlined\"\r\n\t\t\t\t\t@click=\"openCreateModal\"\r\n\t\t\t\t\tclass=\"h-7 w-7 fill-current text-white\"\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"bg-blue-900\">\r\n\t\t\t<div>\r\n\t\t\t\t<!-- Mobile filter dialog -->\r\n\t\t\t\t<TransitionRoot as=\"template\" :show=\"mobileFiltersOpen\">\r\n\t\t\t\t\t<Dialog\r\n\t\t\t\t\t\tas=\"div\"\r\n\t\t\t\t\t\tclass=\"fixed inset-0 flex z-40\"\r\n\t\t\t\t\t\t@close=\"mobileFiltersOpen = false\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<TransitionChild\r\n\t\t\t\t\t\t\tas=\"template\"\r\n\t\t\t\t\t\t\tenter=\"transition-opacity ease-linear duration-300\"\r\n\t\t\t\t\t\t\tenter-from=\"opacity-0\"\r\n\t\t\t\t\t\t\tenter-to=\"opacity-100\"\r\n\t\t\t\t\t\t\tleave=\"transition-opacity ease-linear duration-300\"\r\n\t\t\t\t\t\t\tleave-from=\"opacity-100\"\r\n\t\t\t\t\t\t\tleave-to=\"opacity-0\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<DialogOverlay class=\"fixed inset-0 bg-black bg-opacity-25\" />\r\n\t\t\t\t\t\t</TransitionChild>\r\n\r\n\t\t\t\t\t\t<TransitionChild\r\n\t\t\t\t\t\t\tas=\"template\"\r\n\t\t\t\t\t\t\tenter=\"transition ease-in-out duration-300 transform\"\r\n\t\t\t\t\t\t\tenter-from=\"translate-x-full\"\r\n\t\t\t\t\t\t\tenter-to=\"translate-x-0\"\r\n\t\t\t\t\t\t\tleave=\"transition ease-in-out duration-300 transform\"\r\n\t\t\t\t\t\t\tleave-from=\"translate-x-0\"\r\n\t\t\t\t\t\t\tleave-to=\"translate-x-full\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\"ml-auto relative max-w-xs w-full h-full bg-gray-900 shadow-xl py-4 pb-12 flex flex-col overflow-y-auto\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<div class=\"px-4 flex items-center justify-between\">\r\n\t\t\t\t\t\t\t\t\t<h2 class=\"text-lg font-medium text-gray-300\">Filters</h2>\r\n\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"-mr-2 w-7 h-7 bg-gray-800 p-1 rounded-md flex items-center justify-center text-gray-400\"\r\n\t\t\t\t\t\t\t\t\t\t@click=\"mobileFiltersOpen = false\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"sr-only text-white\">Close menu</span>\r\n\t\t\t\t\t\t\t\t\t\t<XIcon class=\"h-6 w-6 text-gray-300\" aria-hidden=\"true\" />\r\n\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<!-- Filters -->\r\n\t\t\t\t\t\t\t\t<form class=\"mt-4 border-t border-gray-400\">\r\n\t\t\t\t\t\t\t\t\t<Disclosure\r\n\t\t\t\t\t\t\t\t\t\tas=\"div\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"border-t border-gray-400 px-4 py-6\"\r\n\t\t\t\t\t\t\t\t\t\tv-slot=\"{ open }\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<h3 class=\"-mx-2 -my-3 flow-root\">\r\n\t\t\t\t\t\t\t\t\t\t\t<DisclosureButton as=\"template\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"px-2 py-3 bg-gray-700 w-full flex items-center justify-between text-gray-400 hover:text-gray-200\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"font-medium text-gray-400\"> Types </span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"ml-6 flex items-center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<PlusSmIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"!open\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-5 w-5\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<MinusSmIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-else\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-5 w-5\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</DisclosureButton>\r\n\t\t\t\t\t\t\t\t\t\t</h3>\r\n\t\t\t\t\t\t\t\t\t\t<DisclosurePanel class=\"pt-6\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div v-if=\"types?.length > 0\" class=\"space-y-6\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tv-for=\"type in types\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t:key=\"type.id\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"flex items-center\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:value=\"type.id\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:checked=\"type.checked\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"h-4 w-4 border-gray-400 rounded text-blue-600 focus:ring-blue-500\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"typesel\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<label class=\"ml-3 min-w-0 flex-1 text-gray-500\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ type.type }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</DisclosurePanel>\r\n\t\t\t\t\t\t\t\t\t</Disclosure>\r\n\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</TransitionChild>\r\n\t\t\t\t\t</Dialog>\r\n\t\t\t\t</TransitionRoot>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"flex-1 flex flex-col overflow-hidden\">\r\n\t\t\t<div\r\n\t\t\t\tv-if=\"showedClients?.length != 0\"\r\n\t\t\t\tclass=\"w-full flex flex-1 flex-col overflow-y-auto\"\r\n\t\t\t>\r\n\t\t\t\t<ul\r\n\t\t\t\t\tclass=\"w-full h-full overflow-hidden flex flex-row flex-wrap justify-evenly\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<ClientRow\r\n\t\t\t\t\t\tv-for=\"client in showedClients\"\r\n\t\t\t\t\t\t:key=\"client.id\"\r\n\t\t\t\t\t\t:client=\"client\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<Pagination\r\n\t\t\t\tref=\"Pagination\"\r\n\t\t\t\t:currentPage=\"currentPage\"\r\n\t\t\t\t:pageSize=\"nbperpage\"\r\n\t\t\t\t:dataLength=\"clients?.length || 0\"\r\n\t\t\t\t@page=\"currentPage = $event\"\r\n\t\t\t\t@next=\"currentPage++\"\r\n\t\t\t\t@prev=\"currentPage--\"\r\n\t\t\t\t@first=\"currentPage = 1\"\r\n\t\t\t\t@last=\"currentPage = $refs.Pagination.pageNumber\"\r\n\t\t\t/>\r\n\t\t</div>\r\n\t</div>\r\n\t<Modal ref=\"createModal\" primaryColor=\"haja\" @submit=\"addClient\">\r\n\t\t<template v-slot:title>Ajouter un client</template>\r\n\t\t<template v-slot:body>\r\n\t\t\t<div class=\"flex flex-col w-full pt-16 pb-5 overflow-hidden\">\r\n\t\t\t\t<div class=\"flex flex-col space-y-3 mt-4 px-2\">\r\n\t\t\t\t\t<div class=\"flex flex-col w-full space-y-2 space-x-2\">\r\n\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\tclass=\"flex items-center text-bold h-full rounded-l-md text-md\"\r\n\t\t\t\t\t\t\t>Raison Sociale</label\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclass=\"flex flex-row items-cente w-auto focus-within:ring-1 rounded-md ring-blue-600 overflow-hidden\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tname=\"raison_social\"\r\n\t\t\t\t\t\t\t\tid=\"raison_social\"\r\n\t\t\t\t\t\t\t\tv-model=\"newClient.raisonSociale\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Raison social\"\r\n\t\t\t\t\t\t\t\tclass=\"rounded-r-md border-0 focus:ring-0\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"flex flex-col w-full space-y-2 space-x-2\">\r\n\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\tclass=\"flex items-center text-bold h-full rounded-l-md text-md\"\r\n\t\t\t\t\t\t\t>Username</label\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclass=\"flex flex-row items-cente w-auto focus-within:ring-1 rounded-md ring-blue-600 overflow-hidden\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\t\tid=\"username\"\r\n\t\t\t\t\t\t\t\tv-model=\"newClient.username\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Username\"\r\n\t\t\t\t\t\t\t\tclass=\"rounded-r-md border-0 focus:ring-0\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"flex flex-col w-full space-y-2 space-x-2\">\r\n\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\tfor=\"numero\"\r\n\t\t\t\t\t\t\tclass=\"flex items-center text-bold h-full rounded-l-md text-md\"\r\n\t\t\t\t\t\t\t>Numero</label\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclass=\"flex flex-row items-cente w-auto focus-within:ring-1 rounded-md ring-blue-600 overflow-hidden\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\tfor=\"numero\"\r\n\t\t\t\t\t\t\t\tclass=\"flex items-center uppercase text-bold rounded-l-md px-2 bg-gray-200 text-gray-800 text-md border-t border-l border-b\"\r\n\t\t\t\t\t\t\t\t>+213</label\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"tel\"\r\n\t\t\t\t\t\t\t\tname=\"numero\"\r\n\t\t\t\t\t\t\t\tid=\"numero\"\r\n\t\t\t\t\t\t\t\tv-model=\"newClient.numero\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Numero de telephone\"\r\n\t\t\t\t\t\t\t\tclass=\"rounded-r-md border-0 focus:ring-0\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"flex flex-col w-full space-y-2 space-x-2\">\r\n\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\tfor=\"numero\"\r\n\t\t\t\t\t\t\tclass=\"flex items-center text-bold h-full rounded-l-md text-md\"\r\n\t\t\t\t\t\t\t>Numero secondaire</label\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclass=\"flex flex-row items-cente w-auto focus-within:ring-1 rounded-md ring-blue-600\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\tfor=\"numero\"\r\n\t\t\t\t\t\t\t\tclass=\"flex items-center uppercase text-bold flex-1 rounded-l-md px-2 bg-gray-200 text-gray-800 text-md border-t border-l border-b\"\r\n\t\t\t\t\t\t\t\t>+213</label\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"tel\"\r\n\t\t\t\t\t\t\t\tname=\"numero_secondaire\"\r\n\t\t\t\t\t\t\t\tid=\"numero_secondaire\"\r\n\t\t\t\t\t\t\t\tv-model=\"newClient.numeroSecondaire\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Numero de telephone (optionel)\"\r\n\t\t\t\t\t\t\t\tclass=\"rounded-r-md border-0 focus:ring-0\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"flex flex-col w-full\">\r\n\t\t\t\t\t\t<div class=\"flex flex-col items-start w-full space-y-2 space-x-2\">\r\n\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\tfor=\"passwordConfirm\"\r\n\t\t\t\t\t\t\t\tclass=\"flex items-center text-bold h-full rounded-l-md text-md\"\r\n\t\t\t\t\t\t\t\t>Type</label\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Listbox v-model=\"newClient.TypeClientId\">\r\n\t\t\t\t\t\t\t\t<div class=\"relative w-full mx-1 space-x-auto\">\r\n\t\t\t\t\t\t\t\t\t<ListboxButton\r\n\t\t\t\t\t\t\t\t\t\tclass=\"h-10 relative w-full py-2 pl-3 pr-10 text-left bg-white rounded-lg cursor-default focus:outline-none focus-visible:ring-2 focus-visible:ring-opacity-75 focus-visible:ring-white focus-visible:ring-offset-orange-300 focus-visible:ring-offset-2 focus-visible:border-indigo-500 sm:text-sm border-1\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"block truncate\">{{\r\n\t\t\t\t\t\t\t\t\t\t\ttypes.find((el) => el.id == newClient.TypeClientId)\r\n\t\t\t\t\t\t\t\t\t\t\t\t?.type || \"Type\"\r\n\t\t\t\t\t\t\t\t\t\t}}</span>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<SelectorIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-5 h-5 text-gray-400\"\r\n\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</ListboxButton>\r\n\r\n\t\t\t\t\t\t\t\t\t<transition\r\n\t\t\t\t\t\t\t\t\t\tleave-active-class=\"transition duration-100 ease-in\"\r\n\t\t\t\t\t\t\t\t\t\tleave-from-class=\"opacity-100\"\r\n\t\t\t\t\t\t\t\t\t\tleave-to-class=\"opacity-0\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<ListboxOptions\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"absolute mt-1 w-11/12 overflow-auto text-base bg-white rounded-md shadow-lg max-h-60 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm text-left\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<ListboxOption\r\n\t\t\t\t\t\t\t\t\t\t\t\tv-slot=\"{ active, selected }\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tv-for=\"f in types\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:key=\"f.id\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:value=\"f.id\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tas=\"template\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t:class=\"[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tactive\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'text-amber-900 bg-amber-100'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'text-gray-900',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'cursor-default select-none relative py-2 pl-10 pr-4',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:class=\"[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselected ? 'font-medium' : 'font-normal',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'block truncate',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>{{ f.type }}</span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"selected\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"absolute inset-y-0 left-0 flex items-center pl-3 text-amber-600\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckIcon class=\"w-5 h-5\" aria-hidden=\"true\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t</ListboxOption>\r\n\t\t\t\t\t\t\t\t\t\t</ListboxOptions>\r\n\t\t\t\t\t\t\t\t\t</transition>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Listbox>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"flex flex-col w-full\">\r\n\t\t\t\t\t\t<div class=\"flex flex-col items-start space-y-2 space-x-2 w-full\">\r\n\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\tfor=\"password\"\r\n\t\t\t\t\t\t\t\tclass=\"flex items-center text-bold h-full rounded-l-md px-2\"\r\n\t\t\t\t\t\t\t\t>Mot de passe</label\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\tid=\"password\"\r\n\t\t\t\t\t\t\t\tv-model=\"newClient.password\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Mot de passe\"\r\n\t\t\t\t\t\t\t\tclass=\"rounded-md border-0 w-auto\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"flex flex-col w-full\">\r\n\t\t\t\t\t\t<div class=\"flex flex-col items-start w-max space-y-2 space-x-2\">\r\n\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\tfor=\"passwordConfirm\"\r\n\t\t\t\t\t\t\t\tclass=\"flex items-center text-bold h-full rounded-l-md text-md\"\r\n\t\t\t\t\t\t\t\t>Confirmation</label\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\tname=\"passwordConfirm\"\r\n\t\t\t\t\t\t\t\tid=\"passwordConfirm\"\r\n\t\t\t\t\t\t\t\tv-model=\"newClient.passwordConfirm\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Confirmation\"\r\n\t\t\t\t\t\t\t\tclass=\"rounded-md border-0 w-auto\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</template>\r\n\t\t<template v-slot:submit>Ajouter</template>\r\n\t</Modal>\r\n</template>\r\n\r\n<script>\r\nimport Modal from \"@/components/Modal\";\r\nimport { debounce } from \"lodash\";\r\nimport Pagination from \"@/components/Pagination\";\r\nimport {\r\n\tDialog,\r\n\tDialogOverlay,\r\n\tDisclosure,\r\n\tDisclosureButton,\r\n\tDisclosurePanel,\r\n\tTransitionChild,\r\n\tTransitionRoot,\r\n\tListbox,\r\n\tListboxButton,\r\n\tListboxOptions,\r\n\tListboxOption,\r\n} from \"@headlessui/vue\";\r\nimport {\r\n\tMinusSmIcon,\r\n\tPlusSmIcon,\r\n\tFilterIcon,\r\n\tCheckIcon,\r\n\tSelectorIcon,\r\n} from \"@heroicons/vue/solid\";\r\nimport { XIcon } from \"@heroicons/vue/outline\";\r\nimport SearchBar from \"@/components/SearchBar\";\r\n// import UserService from \"@/services/UserService\";\r\nimport ClientRow from \"@/components/ClientRow\";\r\nimport { Icon } from \"@iconify/vue\";\r\nexport default {\r\n\tname: \"ClientIndex\",\r\n\tcomponents: {\r\n\t\tPagination,\r\n\t\tSearchBar,\r\n\t\tDialog,\r\n\t\tDialogOverlay,\r\n\t\tDisclosure,\r\n\t\tDisclosureButton,\r\n\t\tDisclosurePanel,\r\n\t\tClientRow,\r\n\t\tTransitionChild,\r\n\t\tTransitionRoot,\r\n\t\tFilterIcon,\r\n\t\tMinusSmIcon,\r\n\t\tPlusSmIcon,\r\n\t\tXIcon,\r\n\t\tModal,\r\n\t\tIcon,\r\n\t\tCheckIcon,\r\n\t\tSelectorIcon,\r\n\t\tListbox,\r\n\t\tListboxButton,\r\n\t\tListboxOptions,\r\n\t\tListboxOption,\r\n\t},\r\n\tasync beforeMount() {\r\n\t\t// $(window).on('resize',this.)\r\n\t\tawait this.$store.dispatch(\"getClients\");\r\n\t\tawait this.$store.dispatch(\"getTypeClients\");\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tnewClient: {\r\n\t\t\t\traisonSociale: null,\r\n\t\t\t\tnumero: null,\r\n\t\t\t\tnumeroSecondaire: null,\r\n\t\t\t\temail: null,\r\n\t\t\t\tpassword: null,\r\n\t\t\t\tpaswordConfirm: null,\r\n\t\t\t},\r\n\t\t\ttypesel: [],\r\n\t\t\tcurrentPage: 1,\r\n\t\t\tmobileFiltersOpen: false,\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\tsearchfn: debounce(function (e) {\r\n\t\t\tthis.$store.dispatch(\"getClients\", {\r\n\t\t\t\tTypeClientId: this.fonctionsel,\r\n\t\t\t\traisonSociale: e,\r\n\t\t\t\tnumero: e,\r\n\t\t\t\tnumeroSecondaire: e,\r\n\t\t\t\tusername: e,\r\n\t\t\t});\r\n\t\t}, 500),\r\n\t\topenModal(client) {\r\n\t\t\tthis.$refs.modal.open = true;\r\n\t\t\tthis.$refs.modal.client = client;\r\n\t\t},\r\n\r\n\t\tpencilCLick() {\r\n\t\t\tthis.$refs.fileInput.click();\r\n\t\t},\r\n\t\tavatarChanged() {\r\n\t\t\tthis.$refs.avatarDisplay.src = URL.createObjectURL(\r\n\t\t\t\tthis.$refs.fileInput.files[0]\r\n\t\t\t);\r\n\t\t},\r\n\t\topenCreateModal() {\r\n\t\t\tthis.$refs.createModal.open = true;\r\n\t\t},\r\n\t\taddClient() {\r\n\t\t\tthis.$store.dispatch(\"addClient\", this.newClient).then(()=>{\r\n\t\t\t\tthis.$refs.createModal.open = false;\r\n\t\t\t\tthis.$store.dispatch(\"getClients\").then(()=>{\r\n\t\t\t\t\tthis.$refs.searchbar.search = this.newClient.username\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t},\r\n\t},\r\n\tcomputed: {\r\n\t\tclients() {\r\n\t\t\treturn this.$store.getters.getClients;\r\n\t\t},\r\n\t\tnbperpage() {\r\n\t\t\tif (window.innerWidth >= 640 && window.innerWidth < 768) return 2 * 5;\r\n\t\t\telse if (window.innerWidth >= 768 && window.innerWidth < 1280) return 16;\r\n\t\t\telse if (window.innerWidth > 1280) return 4 * 5;\r\n\t\t\telse return 1 * 5;\r\n\t\t},\r\n\t\tfilters() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tid: \"nom\",\r\n\t\t\t\t\tname: \"Types\",\r\n\t\t\t\t\toptions: this.types,\r\n\t\t\t\t},\r\n\t\t\t];\r\n\t\t},\r\n\t\tshowedClients() {\r\n\t\t\tlet cp = this.$refs?.Pagination?.currentPage || 1;\r\n\t\t\tlet clients = this.clients;\r\n\t\t\tif (!clients) return [];\r\n\t\t\treturn clients.slice((cp - 1) * this.nbperpage, cp * this.nbperpage);\r\n\t\t},\r\n\r\n\t\ttypes() {\r\n\t\t\treturn this.$store.getters.getTypeClients;\r\n\t\t},\r\n\t\tcurrentUser() {\r\n\t\t\treturn this.$store.getters.getCurrentUser;\r\n\t\t},\r\n\t},\r\n\twatch: {\r\n\t\ttypesel: function () {\r\n\t\t\tthis.$store.dispatch(\"getClients\", {\r\n\t\t\t\tTypeClientId: this.typesel,\r\n\t\t\t\traisonSociale: this.$refs.searchbar.search,\r\n\t\t\t\tnumero: this.$refs.searchbar.search,\r\n\t\t\t\tnumeroSecondaire: this.$refs.searchbar.search,\r\n\t\t\t\tusername: this.$refs.searchbar.search,\r\n\t\t\t});\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.diamond {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\ttext-align: center;\r\n\ttransform: rotate(45deg);\r\n}\r\n.diamond > div {\r\n\ttransform: rotate(-45deg);\r\n}\r\n</style>\r\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}