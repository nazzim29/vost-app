{"ast":null,"code":"import \"@heroicons/vue/solid\";\nimport { Listbox, ListboxButton, ListboxOptions, ListboxOption, Disclosure, DisclosureButton, DisclosurePanel } from \"@headlessui/vue\";\nimport { CheckIcon, SelectorIcon, ChevronUpIcon, MinusIcon, PlusIcon } from \"@heroicons/vue/solid\";\nimport { Icon } from \"@iconify/vue\";\nimport fileDownload from \"js-file-download\";\nimport Api from \"@/services/api\"; // import { Buffer } from \"buffer\";\n\nexport default {\n  data() {\n    return {\n      errorFileModal: false,\n      query: \"\",\n      isEditing: false,\n      newProduct: {\n        produit: null,\n        produits_commande: {\n          prix: null,\n          quantite: null\n        }\n      },\n      observer: null,\n      limit: 10,\n      search: \"\",\n      addedProducts: []\n    };\n  },\n\n  methods: {\n    handleBDC() {\n      if (this.commande.bonDeCommande != null) {\n        //todo\n        //\n        return Api.get(`/commande/${this.commande.id}/document`, {}, {\n          responseType: \"arraybuffer\",\n          reponseEncoding: \"binary\" // headers: { \"Accept-Encoding\": \"gzip, deflate, br\" },\n\n        }).then(response => {\n          fileDownload(response.data, `Bon De Commande ${this.commande.id}.pdf`, \"application/pdf\");\n        }).catch(error => {\n          console.log(error);\n        });\n      }\n\n      var input = document.createElement(\"input\");\n      input.type = \"file\";\n      input.click();\n      input.onchange = this.uploadFile; // const formData = new FormData();\n      //open file selector and get file\n    },\n\n    async uploadFile(event) {\n      var file = event.target.files[0];\n\n      if (file.type != \"application/pdf\") {\n        console.log(\"File is not a pdf\");\n        this.errorFileModal = true;\n        return;\n      }\n\n      var formData = new FormData();\n      formData.append(\"file\", file);\n      this.$store.dispatch(\"uploadBonDeCommande\", {\n        formData,\n        id: this.$route.params.id\n      });\n    },\n\n    numbersOnly(event) {\n      if (isNaN(parseInt(event.data))) event.target.value = event.target.value.slice(0, event.target.value.length - 1);\n    },\n\n    scrolllist(e) {\n      if (e.target.scrollHeight - e.target.scrollTop == e.target.clientHeight && this.hasNextPage) this.limit += 10;\n    },\n\n    async onOpen() {\n      if (this.hasNextPage) {\n        await this.$nextTick();\n        this.observer.observe(this.$refs.load);\n      }\n    },\n\n    onClose() {\n      this.observer.disconnect();\n    },\n\n    async infiniteScroll([{\n      isIntersecting,\n      target\n    }]) {\n      console.log(isIntersecting);\n\n      if (isIntersecting) {\n        const ul = target.offsetParent;\n        const scrollTop = target.offsetParent.scrollTop;\n        this.limit += 10;\n        await this.$nextTick();\n        ul.scrollTop = scrollTop;\n      }\n    },\n\n    inputgroupfocushandler(e) {\n      e.target.parentNode.classList.add(\"border\");\n      e.target.parentNode.classList.add(\"border-primary\"); // e.target.parentNode.classList.add('border-blue-500')\n    },\n\n    inputgroupblurhandler(e) {\n      e.target.parentNode.classList.remove(\"border\");\n      e.target.parentNode.classList.remove(\"border-primary\"); // e.target.parentNode.classList.add('border-blue-500')\n    },\n\n    startEditMode() {\n      this.isEditing = true;\n    },\n\n    deleteCommande() {\n      this.$store.dispatch(\"deleteCommande\", this.commande.id);\n      this.$router.go(-1);\n    },\n\n    saveCommande() {\n      if (this.$route.params.id == \"new\") {\n        this.$store.dispatch(\"addCommande\", this.commande);\n      } else {\n        this.$store.dispatch(\"updateCommande\", this.commande);\n        this.isEditing = false;\n      }\n    },\n\n    addProduct() {\n      if (this.newProduct.produit == null || this.newProduct.produits_commande.prix == null) return;\n      if (!this.newProduct.produits_commande.quantite) this.newProduct.produits_commande.quantite = 1; //make api call /commandes/:id/addProduct\n\n      this.$store.dispatch(\"commande/addProducts\", {\n        commandeId: this.commande.id,\n        product: this.newProduct\n      }); // this.addedProducts.push({\n      // \t...this.newProduct.produit,\n      // \tproduits_commande: this.newProduct.produits_commande,\n      // });\n\n      this.newProduct = {\n        produit: null,\n        produits_commande: {\n          prix: null,\n          quantite: null\n        }\n      };\n    },\n\n    updateProduit(product) {\n      console.log(product);\n      this.$store.dispatch(\"commande/updateProduit\", {\n        commandeId: this.commande.id,\n        product\n      });\n    },\n\n    deleteProduit(id) {\n      this.$store.dispatch(\"commande/deleteProduit\", {\n        commandeId: this.commande.id,\n        productId: id\n      });\n      this.$store.dispatch(\"showCommande\", this.commande.id);\n    },\n\n    validerCommande() {\n      this.$store.dispatch(\"commande/validate\", {\n        idCommande: this.commande.id,\n        next: this.$router\n      });\n    },\n\n    save() {// if(this.$route.params.id == 'new'){}\n      // this.$store.dispatch(\"commande/addProducts\", {\n      // \tcommandeId: this.commande.id,\n      // \tproducts: this.addedProducts,\n      // });\n      // this.addedProducts = [];\n      // this.isEditing = false;\n    }\n\n  },\n  components: {\n    Listbox,\n    ListboxButton,\n    ListboxOptions,\n    ListboxOption,\n    CheckIcon,\n    SelectorIcon,\n    ChevronUpIcon,\n    Disclosure,\n    DisclosureButton,\n    DisclosurePanel,\n    MinusIcon,\n    PlusIcon,\n    Icon\n  },\n\n  beforeMount() {\n    if (this.$route.params.id != \"new\") this.$store.dispatch(\"showCommande\", this.$route.params.id);else {\n      this.$store.dispatch(\"showCommande\", \"new\");\n      this.isEditing = true;\n    }\n    console.log(this.commande);\n    this.$store.dispatch(\"getClients\");\n    this.$store.dispatch(\"getProduits\");\n  },\n\n  mounted() {\n    this.observer = new IntersectionObserver(this.infiniteScroll);\n  },\n\n  computed: {\n    currentUser() {\n      return this.$store.getters.getCurrentUser;\n    },\n\n    commande: {\n      get() {\n        return this.$store.getters.getCommande;\n      },\n\n      set(v) {\n        this.$store.dispatch(\"setCommande\", v);\n      }\n\n    },\n\n    clients() {\n      const r = this.$store.getters.getClients;\n      return r.sort(function compare(a, b) {\n        if (a.raisonSociale < b.raisonSociale) {\n          return -1;\n        }\n\n        if (a.raisonSociale > b.raisonSociale) {\n          return 1;\n        }\n\n        return 0;\n      });\n    },\n\n    paginated() {\n      return this.canAddProducts.slice(0, this.limit);\n    },\n\n    hasNextPage() {\n      return this.paginated.length < this.canAddProducts.length;\n    },\n\n    products() {\n      return this.$store.getters.getProduits;\n    },\n\n    canAddProducts() {\n      let i = this.products.filter(el => {\n        // console.log(thi)\n        if (this.commande.Produits.find(d => d.nom == el.nom) || this.addedProducts.includes(d => d.nom == el.nom)) return false;\n        if (this.search != \"\" && el.nom.toLowerCase().indexOf(this.search.toLowerCase()) == -1) return false;\n        return true;\n      });\n      console.log({\n        i\n      });\n      return i;\n    }\n\n  }\n};","map":{"version":3,"sources":["C:\\Users\\Dell\\Desktop\\vost-app\\src\\views\\commandes\\CommandeShow.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div class=\"h-full w-full items-center justify-center p-2 space-y-5\">\r\n\t\t<div\r\n\t\t\tclass=\"flex flex-row justify-end items-center p-1 space-x-2\"\r\n\t\t\tv-if=\"$route.params.id != 'new'\"\r\n\t\t>\r\n\t\t\t<button\r\n\t\t\t\tclass=\"btn gap-2 btn-sm btn-error\"\r\n\t\t\t\t@click=\"deleteCommande\"\r\n\t\t\t\tv-if=\"\r\n\t\t\t\t\tcurrentUser.Profile.Autorisations.find(\r\n\t\t\t\t\t\t(el) => el.nom == 'delete-commande'\r\n\t\t\t\t\t)\r\n\t\t\t\t\"\r\n\t\t\t>\r\n\t\t\t\t<Icon icon=\"bi:archive\" class=\"w-5 h-5 text-red-500\" />\r\n\t\t\t\t<label>Archiver</label>\r\n\t\t\t</button>\r\n\t\t\t<button\r\n\t\t\t\tclass=\"btn gap-2 btn-sm btn-success\"\r\n\t\t\t\t@click=\"validerCommande\"\r\n\t\t\t\tv-if=\"\r\n\t\t\t\t\tcurrentUser.Profile.Autorisations.find(\r\n\t\t\t\t\t\t(el) => el.nom == 'update-commande'\r\n\t\t\t\t\t) && !commande.validationAdmin\r\n\t\t\t\t\"\r\n\t\t\t>\r\n\t\t\t\t<Icon icon=\"akar-icons:check\" class=\"w-5 h-5\" />\r\n\t\t\t\t<label>Valider</label>\r\n\t\t\t</button>\r\n\t\t\t<button\r\n\t\t\t\tclass=\"btn gap-2 btn-sm\"\r\n\t\t\t\t@click=\"handleBDC\"\r\n\t\t\t\tv-if=\"\r\n\t\t\t\t\tcurrentUser.Profile.Autorisations.find(\r\n\t\t\t\t\t\t(el) => el.nom == 'update-commande'\r\n\t\t\t\t\t) &&\r\n\t\t\t\t\tcommande.validationAdmin &&\r\n\t\t\t\t\tcommande.validationClient\r\n\t\t\t\t\"\r\n\t\t\t>\r\n\t\t\t\t<Icon\r\n\t\t\t\t\t:icon=\"\r\n\t\t\t\t\t\tcommande.bonDeCommande\r\n\t\t\t\t\t\t\t? 'akar-icons:file'\r\n\t\t\t\t\t\t\t: 'akar-icons:cloud-upload'\r\n\t\t\t\t\t\"\r\n\t\t\t\t\tclass=\"w-5 h-5\"\r\n\t\t\t\t/>\r\n\t\t\t\t<label>Bon de commande</label>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t\t<div class=\"card glass\">\r\n\t\t\t<div class=\"card-body\">\r\n\t\t\t\t<!-- <h2 class=\"card-title\">#{{ commande.id }}</h2> -->\r\n\t\t\t\t<div class=\"flex flex-row h-full gap-3\">\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclass=\"bg-yellow-500 rounded-md w-1/4 h-full flex flex-row  py-2 px-1 hover:scale-110 hover:shadow-2xl hover:mx-3 transition-all duration-300 items-center\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div class=\"p-2 rounded-full bg-yellow-400 justify-self-start \">\r\n\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\ticon=\"akar-icons:person\"\r\n\t\t\t\t\t\t\t\tclass=\"w-10 h-10 text-gray-600\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<span class=\"text-md font-semibold text-gray-600 mx-auto\">{{ commande.Client.raisonSociale }}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclass=\"bg-yellow-500 rounded-md w-1/4 h-full flex flex-row py-2 px-1 hover:scale-110 hover:shadow-2xl transition-all duration-300 items-center hover:mx-3\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<div class=\"p-2 rounded-full bg-yellow-400 justify-self-start\">\r\n\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\ticon=\"fa-solid:cash-register\"\r\n\t\t\t\t\t\t\t\tclass=\"w-9 h-9 text-gray-600\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<span class=\"text-md font-semibold text-gray-600 mx-auto\">{{ commande.montant }} DA</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"bg-white rounded-md p-2\">\r\n\t\t\t<Disclosure v-slot=\"{ open }\">\r\n\t\t\t\t<DisclosureButton\r\n\t\t\t\t\tclass=\"flex justify-between w-full px-4 py-2 text-sm font-medium text-left text-blue-900 bg-blue-100 rounded-lg hover:bg-blue-200 focus:outline-none focus-visible:ring focus-visible:ring-blue-500 focus-visible:ring-opacity-75\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<span>Details de la commande</span>\r\n\t\t\t\t\t<ChevronUpIcon\r\n\t\t\t\t\t\t:class=\"open ? 'transform rotate-180' : ''\"\r\n\t\t\t\t\t\tclass=\"w-5 h-5 text-blue-500 transition-transform duration-100\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</DisclosureButton>\r\n\t\t\t\t<transition\r\n\t\t\t\t\tenter-active-class=\"transition duration-100 ease-out\"\r\n\t\t\t\t\tenter-from-class=\"transform scale-95 opacity-0\"\r\n\t\t\t\t\tenter-to-class=\"transform scale-100 opacity-100\"\r\n\t\t\t\t\tleave-active-class=\"transition duration-75 ease-out\"\r\n\t\t\t\t\tleave-from-class=\"transform scale-100 opacity-100\"\r\n\t\t\t\t\tleave-to-class=\"transform scale-95 opacity-0\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<DisclosurePanel\r\n\t\t\t\t\t\tclass=\"flex flex-col flex-wrap w-full p-5 space-y-3 bg-white\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\ticon=\"bi:brush\"\r\n\t\t\t\t\t\t\tclass=\"h-5 w-5 text-gray-600 self-end\"\r\n\t\t\t\t\t\t\t@click=\"isEditing\"\r\n\t\t\t\t\t\t\tv-if=\"\r\n\t\t\t\t\t\t\t\t!isEditing &&\r\n\t\t\t\t\t\t\t\tcurrentUser.Profile.Autorisations.find(\r\n\t\t\t\t\t\t\t\t\t(el) => el.nom == 'update-commande'\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<label class=\"text-md font-semibold\"\r\n\t\t\t\t\t\t\t>Identifiant: {{ commande.id }}</label\r\n\t\t\t\t\t\t>\r\n\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tv-if=\"isEditing\"\r\n\t\t\t\t\t\t\tclass=\"flex flex-row items-center space-x-3 w-full\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<label class=\"text-md font-semibold\">Client</label>\r\n\t\t\t\t\t\t\t<Listbox v-model=\"commande.Client\">\r\n\t\t\t\t\t\t\t\t<div class=\"relative w-52\">\r\n\t\t\t\t\t\t\t\t\t<ListboxButton\r\n\t\t\t\t\t\t\t\t\t\tclass=\"relative w-full py-2 pl-3 pr-10 text-left bg-white rounded-lg shadow-md cursor-default focus:outline-none focus-visible:ring-2 focus-visible:ring-opacity-75 focus-visible:ring-white focus-visible:ring-offset-orange-300 focus-visible:ring-offset-2 focus-visible:border-indigo-500 sm:text-sm\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"block truncate\">{{\r\n\t\t\t\t\t\t\t\t\t\t\tcommande.Client?.raisonSociale\r\n\t\t\t\t\t\t\t\t\t\t}}</span>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<SelectorIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-5 h-5 text-gray-400\"\r\n\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</ListboxButton>\r\n\r\n\t\t\t\t\t\t\t\t\t<transition\r\n\t\t\t\t\t\t\t\t\t\tleave-active-class=\"transition duration-100 ease-in\"\r\n\t\t\t\t\t\t\t\t\t\tleave-from-class=\"opacity-100\"\r\n\t\t\t\t\t\t\t\t\t\tleave-to-class=\"opacity-0\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<ListboxOptions\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"absolute w-full py-1 mt-1 overflow-auto text-base bg-white rounded-md shadow-lg max-h-60 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm z-50\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<ListboxOption\r\n\t\t\t\t\t\t\t\t\t\t\t\tv-slot=\"{ active, selected }\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tv-for=\"client in clients\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:key=\"client.id\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:value=\"client\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tas=\"template\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t:class=\"[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tactive\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'text-amber-900 bg-amber-100'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'text-gray-900',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'cursor-default select-none relative py-2 pl-10 pr-4',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t:class=\"[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselected ? 'font-medium' : 'font-normal',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'block truncate',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>{{ client.raisonSociale }}</span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"selected\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"absolute inset-y-0 left-0 flex items-center pl-3 text-amber-600\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckIcon class=\"w-5 h-5\" aria-hidden=\"true\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t</ListboxOption>\r\n\t\t\t\t\t\t\t\t\t\t</ListboxOptions>\r\n\t\t\t\t\t\t\t\t\t</transition>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Listbox>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<label v-if=\"!isEditing\" class=\"text-md font-semibold\"\r\n\t\t\t\t\t\t\t>Client:\r\n\t\t\t\t\t\t\t<router-link\r\n\t\t\t\t\t\t\t\tv-if=\"commande.Client\"\r\n\t\t\t\t\t\t\t\t:to=\"{\r\n\t\t\t\t\t\t\t\t\tname: 'ClientShow',\r\n\t\t\t\t\t\t\t\t\tparams: { id: commande.Client.id },\r\n\t\t\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t\t\t>{{ commande.Client.raisonSociale }}</router-link\r\n\t\t\t\t\t\t\t></label\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<label class=\"text-md font-semibold\"\r\n\t\t\t\t\t\t\t\t>Etat: {{ commande.etat }}</label\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<label class=\"text-md font-semibold\"\r\n\t\t\t\t\t\t\t\t>Montant: {{ commande.montant }}</label\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tclass=\"btn self-end btn-primary\"\r\n\t\t\t\t\t\t\tv-if=\"isEditing\"\r\n\t\t\t\t\t\t\t@click=\"() => (open = false || saveCommande())\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<label>Enregistrer</label>\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</DisclosurePanel>\r\n\t\t\t\t</transition>\r\n\t\t\t</Disclosure>\r\n\t\t</div>\r\n\t\t<div class=\"bg-white rounded-md p-2\">\r\n\t\t\t<Disclosure v-slot=\"{ open }\">\r\n\t\t\t\t<DisclosureButton\r\n\t\t\t\t\tclass=\"flex justify-between w-full px-4 py-2 text-sm font-medium text-left text-blue-900 bg-blue-100 rounded-lg hover:bg-blue-200 focus:outline-none focus-visible:ring focus-visible:ring-blue-500 focus-visible:ring-opacity-75\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<span>Details de la commande</span>\r\n\t\t\t\t\t<ChevronUpIcon\r\n\t\t\t\t\t\t:class=\"open ? 'transform rotate-180' : ''\"\r\n\t\t\t\t\t\tclass=\"w-5 h-5 text-blue-500 transition-transform duration-100\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</DisclosureButton>\r\n\t\t\t\t<transition\r\n\t\t\t\t\tenter-active-class=\"transition duration-100 ease-out\"\r\n\t\t\t\t\tenter-from-class=\"transform scale-95 opacity-0\"\r\n\t\t\t\t\tenter-to-class=\"transform scale-100 opacity-100\"\r\n\t\t\t\t\tleave-active-class=\"transition duration-75 ease-out\"\r\n\t\t\t\t\tleave-from-class=\"transform scale-100 opacity-100\"\r\n\t\t\t\t\tleave-to-class=\"transform scale-95 opacity-0\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<DisclosurePanel class=\"w-full p-5 space-y-3 bg-white flex flex-col\">\r\n\t\t\t\t\t\t<div v-if=\"isEditing\" class=\"flex flex-row space-x-3\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclass=\"btn self-end btn-sm btn-primary\"\r\n\t\t\t\t\t\t\t\t@click=\"isEditing = false\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<label>Enregistrer</label>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclass=\"btn self-end btn-sm btn-primary\"\r\n\t\t\t\t\t\t\t\t@click=\"addProduct\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<PlusIcon class=\"w-8 h-8 cursor-pointer text-white\" />\r\n\t\t\t\t\t\t\t\t<label>Ajouter</label>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tv-if=\"\r\n\t\t\t\t\t\t\t\tcurrentUser.Profile.Autorisations.find(\r\n\t\t\t\t\t\t\t\t\t(el) => el.nom == 'update-commande'\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\tclass=\"flex flex-row space-x-3 justify-end\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<button class=\"btn btn-secondary btn-sm\" @click=\"startEditMode\">\r\n\t\t\t\t\t\t\t\t<label>Modifier</label>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<table\r\n\t\t\t\t\t\t\tclass=\"w-full table items-center\"\r\n\t\t\t\t\t\t\tv-if=\"commande.Produits.length != 0 || isEditing\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<thead class=\"w-full flex flex-col\">\r\n\t\t\t\t\t\t\t\t<tr\r\n\t\t\t\t\t\t\t\t\tv-if=\"isEditing\"\r\n\t\t\t\t\t\t\t\t\tclass=\"grid grid-cols-1 md:grid-cols-5 items-center\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<td\r\n\t\t\t\t\t\t\t\t\t\tclass=\"h-full whitespace-pre-wrap text-center md:col-span-2\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<Listbox v-model=\"newProduct.produit\" v-slot=\"{ open }\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"relative w-full\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ListboxButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t@focus=\"onOpen\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t@blur=\"onClose\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"relative w-full py-2 pl-3 pr-10 text-left bg-white rounded-lg shadow-md cursor-default focus:outline-none focus-visible:ring-2 focus-visible:ring-opacity-75 focus-visible:ring-white focus-visible:ring-offset-orange-300 focus-visible:ring-offset-2 focus-visible:border-indigo-500 sm:text-sm\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"block truncate\">{{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewProduct.produit?.nom || \"Produits...\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SelectorIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-5 h-5 text-gray-400\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</ListboxButton>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<transition\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tleave-active-class=\"transition duration-100 ease-in\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tleave-from-class=\"opacity-100\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tleave-to-class=\"opacity-0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ListboxOptions\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstatic\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-show=\"open\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@scroll=\"scrolllist\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"absolute w-max py-1 mt-1 overflow-auto text-base bg-white rounded-md shadow-lg max-h-60 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm z-50\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ListboxOption\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-slot=\"{ active, selected }\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-for=\"product in paginated\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:key=\"product.id\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:value=\"product\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tas=\"template\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:class=\"[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tactive\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'text-amber-900 bg-amber-100'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'text-gray-900',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'cursor-default select-none relative py-2 pl-10 pr-4',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:class=\"[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselected ? 'font-medium' : 'font-normal',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'block truncate',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>{{ product.nom }} ({{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tproduct.contenance\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}kg)</span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"selected\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"absolute inset-y-0 left-0 flex items-center pl-3 text-amber-600\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-5 h-5\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ListboxOption>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ListboxOption v-show=\"hasNextPage\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span ref=\"load\"> loading</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ListboxOption>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</ListboxOptions>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</transition>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</Listbox>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td class=\"h-full whitespace-pre-wrap text-center\">\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-full h-full p-2 border-2 border-gray-200 rounded-md text-md\"\r\n\t\t\t\t\t\t\t\t\t\t\t:value=\"(newProduct.produit?.contenance || 0) + ' Da'\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td class=\"h-full whitespace-pre-wrap text-center\">\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-full p-2 border-2 border-gray-200 rounded-md text-md\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"newProduct.produits_commande.prix\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Prix...\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td class=\"h-full whitespace-pre-wrap text-center\">\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-full p-2 border-2 border-gray-200 rounded-md text-md\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"newProduct.produits_commande.quantite\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Quantité...\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t<tr class=\"md:grid grid-cols-5 hidden\">\r\n\t\t\t\t\t\t\t\t\t<td class=\"whitespace-pre-wrap text-center\"></td>\r\n\t\t\t\t\t\t\t\t\t<td class=\"whitespace-pre-wrap text-center\">prix initiale</td>\r\n\t\t\t\t\t\t\t\t\t<td class=\"whitespace-pre-wrap text-center\">prix</td>\r\n\t\t\t\t\t\t\t\t\t<td class=\"whitespace-pre-wrap text-center\">quantité</td>\r\n\t\t\t\t\t\t\t\t\t<td class=\"whitespace-pre-wrap text-center\">remise</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t<tbody class=\"grid gap-3\">\r\n\t\t\t\t\t\t\t\t<tr\r\n\t\t\t\t\t\t\t\t\tv-for=\"produit in [...commande.Produits, ...addedProducts]\"\r\n\t\t\t\t\t\t\t\t\t:key=\"produit\"\r\n\t\t\t\t\t\t\t\t\tclass=\"grid relative md:grid-cols-5 border-gray-400 border rounded-md bg-gray-200 shadow-md mt-5\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<td class=\"col-span-1\">\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"whitespace-pre-wrap text-center flex items-center justify-center\"\r\n\t\t\t\t\t\t\t\t\t\t\t>{{ produit.nom }} ({{ produit.contenance }}Kg)</span\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td\r\n\t\t\t\t\t\t\t\t\t\tclass=\"col-span-1 whitespace-pre-wrap text-center flex items-center justify-center\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"md:hidden font-semibold\">Prix Initiale: </span>\r\n\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"whitespace-pre-wrap text-center flex items-center justify-center\"\r\n\t\t\t\t\t\t\t\t\t\t\t>{{ produit.prix }} DA</span\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t<td\r\n\t\t\t\t\t\t\t\t\t\tv-if=\"isEditing\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"col-span-1 text-center flex flex-row py-4 form-control items-center justify-center\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"md:hidden font-semibold md:mr-0 mr-2\"\r\n\t\t\t\t\t\t\t\t\t\t\t>Prix :\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"produit.produits_commande.prix\"\r\n\t\t\t\t\t\t\t\t\t\t\t@change=\"updateProduit(produit)\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"input input-primary w-20 h-6 focus:outline-none text-center\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<label class=\"label items-center\">DA</label>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td\r\n\t\t\t\t\t\t\t\t\t\tv-else\r\n\t\t\t\t\t\t\t\t\t\tclass=\"col-span-1 whitespace-pre-wrap flex justify-center items-center\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"md:hidden font-semibold\">Prix: </span>\r\n\t\t\t\t\t\t\t\t\t\t{{ produit.produits_commande.prix }} DA\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t<td\r\n\t\t\t\t\t\t\t\t\t\tv-if=\"isEditing\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"col-span-1 text-center flex flex-row py-4 form-control items-center justify-center\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"md:hidden font-semibold mr-2 md:mr-0\"\r\n\t\t\t\t\t\t\t\t\t\t\t>Quantité:\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"inline-flex overflow-hidden rounded-lg bg-gray-400 justify-evenly\"\r\n\t\t\t\t\t\t\t\t\t\t\t:class=\"{}\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<MinusIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"cursor-pointer h-8 w-8 flex-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t@click=\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tproduit.produits_commande.quantite-- &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdateProduit(produit)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t:value=\"produit.produits_commande.quantite\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t@focus=\"inputgroupfocushandler\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t@blur=\"inputgroupblurhandler\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t@input=\"numbersOnly\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t@change=\"updateProduit(produit)\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"input focus:outline-none flex-2 w-16 h-auto text-center peer rounded-none focus:border-0 focus:shadow-none focus:ring-0\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<PlusIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-8 h-8 cursor-pointer flex-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t@click=\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tproduit.produits_commande.quantite++ &&\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tupdateProduit(produit)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td\r\n\t\t\t\t\t\t\t\t\t\tv-else\r\n\t\t\t\t\t\t\t\t\t\tclass=\"col-span-1 whitespace-pre-wrap text-center flex items-center justify-center\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"md:hidden font-semibold\">Quantité: </span>\r\n\t\t\t\t\t\t\t\t\t\t{{ produit.produits_commande.quantite }} KG\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t<td\r\n\t\t\t\t\t\t\t\t\t\tclass=\"col-span-1 whitespace-pre-wrap text-center flex justify-center items-center\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"md:hidden font-semibold\">Remise: </span>\r\n\t\t\t\t\t\t\t\t\t\t{{ produit.prix - produit.produits_commande.prix }} DA\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tclass=\"absolute -top-4 -right-4 w-8 h-8 text-red-600 rounded-full bg-white\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-full h-full\"\r\n\t\t\t\t\t\t\t\t\t\t\ticon=\"dashicons:remove\"\r\n\t\t\t\t\t\t\t\t\t\t\t@click=\"deleteProduit(produit.id)\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t<h4 v-else class=\"font-semibold text-center\">\r\n\t\t\t\t\t\t\tCette commande ne contient aucun produit\r\n\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t</DisclosurePanel>\r\n\t\t\t\t</transition>\r\n\t\t\t</Disclosure>\r\n\t\t</div>\r\n\t\t<input\r\n\t\t\ttype=\"checkbox\"\r\n\t\t\tid=\"my-modal-4\"\r\n\t\t\tv-model=\"errorFileModal\"\r\n\t\t\tclass=\"modal-toggle\"\r\n\t\t/>\r\n\t\t<label\r\n\t\t\tfor=\"my-modal-4\"\r\n\t\t\tclass=\"modal modal-bottom sm:modal-middle cursor-pointer\"\r\n\t\t>\r\n\t\t\t<div class=\"modal-box relative\">\r\n\t\t\t\t<h3 class=\"text-lg font-bold\">\r\n\t\t\t\t\tErreur lors de la selection du Fichier\r\n\t\t\t\t</h3>\r\n\t\t\t\t<p class=\"py-2\">Seule les fichiers PDF sont autorisés.</p>\r\n\t\t\t\t<div class=\"modal-action\">\r\n\t\t\t\t\t<label\r\n\t\t\t\t\t\tfor=\"my-modal\"\r\n\t\t\t\t\t\t@click=\"errorFileModal = false\"\r\n\t\t\t\t\t\tclass=\"btn btn-sm btn-error\"\r\n\t\t\t\t\t\t>Ok</label\r\n\t\t\t\t\t>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</label>\r\n\t\t<!-- <div class=\"bg-white rounded-md p-2\">\r\n\t\t\t<Disclosure v-slot=\"{ open }\">\r\n\t\t\t\t<DisclosureButton\r\n\t\t\t\t\tclass=\"flex justify-between w-full px-4 py-2 text-sm font-medium text-left text-blue-900 bg-blue-100 rounded-lg hover:bg-blue-200 focus:outline-none focus-visible:ring focus-visible:ring-blue-500 focus-visible:ring-opacity-75\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<span>Paiements</span>\r\n\t\t\t\t\t<ChevronUpIcon\r\n\t\t\t\t\t\t:class=\"open ? 'transform rotate-180' : ''\"\r\n\t\t\t\t\t\tclass=\"w-5 h-5 text-blue-500 transition-transform duration-100\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</DisclosureButton>\r\n\t\t\t\t<transition\r\n\t\t\t\t\tenter-active-class=\"transition duration-100 ease-out\"\r\n\t\t\t\t\tenter-from-class=\"transform scale-95 opacity-0\"\r\n\t\t\t\t\tenter-to-class=\"transform scale-100 opacity-100\"\r\n\t\t\t\t\tleave-active-class=\"transition duration-75 ease-out\"\r\n\t\t\t\t\tleave-from-class=\"transform scale-100 opacity-100\"\r\n\t\t\t\t\tleave-to-class=\"transform scale-95 opacity-0\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<DisclosurePanel class=\"w-full p-5 space-y-3 bg-white flex flex-col\">\r\n\t\t\t\t\t\t<div v-if=\"isEditing\" class=\"flex flex-row space-x-3\">\r\n\t\t\t\t\t\t\t<button class=\"btn self-end btn-primary\" @click=\"addPaiement\">\r\n\t\t\t\t\t\t\t\t<PlusIcon class=\"w-8 h-8 cursor-pointer text-white\" />\r\n\t\t\t\t\t\t\t\t<label>Ajouter</label>\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<table class=\"w-full table items-center\">\r\n\t\t\t\t\t\t\t<thead class=\"w-full flex flex-col\">\r\n\t\t\t\t\t\t\t\t<tr v-if=\"isEditing\" class=\"grid grid-cols-5\">\r\n\t\t\t\t\t\t\t\t\t<td class=\"whitespace-pre-wrap text-center col-span-2\">\r\n\t\t\t\t\t\t\t\t\t\t<Listbox v-model=\"commande.produit\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"relative w-full\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ListboxButton\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"relative w-full py-2 pl-3 pr-10 text-left bg-white rounded-lg shadow-md cursor-default focus:outline-none focus-visible:ring-2 focus-visible:ring-opacity-75 focus-visible:ring-white focus-visible:ring-offset-orange-300 focus-visible:ring-offset-2 focus-visible:border-indigo-500 sm:text-sm\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"block truncate\">{{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnewProduct.produit?.nom || \"Produits...\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<SelectorIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-5 h-5 text-gray-400\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</ListboxButton>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t<transition\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tleave-active-class=\"transition duration-100 ease-in\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tleave-from-class=\"opacity-100\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tleave-to-class=\"opacity-0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ListboxOptions\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"absolute w-max py-1 mt-1 overflow-auto text-base bg-white rounded-md shadow-lg max-h-60 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm z-50\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ListboxOption\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-slot=\"{ active, selected }\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-for=\"product in products\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:key=\"product.id\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:value=\"product\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tas=\"template\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:class=\"[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tactive\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 'text-amber-900 bg-amber-100'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 'text-gray-900',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'cursor-default select-none relative py-2 pl-10 pr-4',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t:class=\"[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tselected ? 'font-medium' : 'font-normal',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'block truncate',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>{{ product.nom }} ({{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tproduct.contenance\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}kg)</span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"selected\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"absolute inset-y-0 left-0 flex items-center pl-3 text-amber-600\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CheckIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-5 h-5\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</ListboxOption>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</ListboxOptions>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</transition>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</Listbox>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td class=\"whitespace-pre-wrap text-center\">\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\tdisabled\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-full h-full p-2 border-2 border-gray-200 rounded-md text-md\"\r\n\t\t\t\t\t\t\t\t\t\t\t:value=\"(newProduct.produit?.contenance || 0) + ' Da'\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td class=\"whitespace-pre-wrap text-center\">\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-full p-2 border-2 border-gray-200 rounded-md text-md\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"newProduct.produits_commande.prix\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Prix...\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td class=\"whitespace-pre-wrap text-center\">\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"w-full p-2 border-2 border-gray-200 rounded-md text-md\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"newProduct.produits_commande.quantite\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Quantité...\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t<tr class=\"grid grid-cols-5\">\r\n\t\t\t\t\t\t\t\t\t<td class=\"whitespace-pre-wrap text-center\"></td>\r\n\t\t\t\t\t\t\t\t\t<td class=\"whitespace-pre-wrap text-center\">prix initiale</td>\r\n\t\t\t\t\t\t\t\t\t<td class=\"whitespace-pre-wrap text-center\">prix</td>\r\n\t\t\t\t\t\t\t\t\t<td class=\"whitespace-pre-wrap text-center\">quantité</td>\r\n\t\t\t\t\t\t\t\t\t<td class=\"whitespace-pre-wrap text-center\">remise</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t<tr\r\n\t\t\t\t\t\t\t\t\tv-for=\"produit in commande.Produits\"\r\n\t\t\t\t\t\t\t\t\t:key=\"produit\"\r\n\t\t\t\t\t\t\t\t\tclass=\"relative grid grid-cols-5\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<td\r\n\t\t\t\t\t\t\t\t\t\tclass=\"col-span-1 whitespace-pre-wrap text-center flex items-center justify-center\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{{ produit.nom }} ({{ produit.contenance }}Kg)\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td\r\n\t\t\t\t\t\t\t\t\t\tclass=\"col-span-1 whitespace-pre-wrap text-center flex items-center justify-center\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{{ produit.prix }} DA\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t<td\r\n\t\t\t\t\t\t\t\t\t\tv-if=\"isEditing\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"col-span-1 text-center flex flex-row py-4 form-control items-center justify-center\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"produit.produits_commande.prix\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"input input-primary w-20 h-6 focus:outline-none text-center\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<label class=\"label items-center\">DA</label>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td\r\n\t\t\t\t\t\t\t\t\t\tv-else\r\n\t\t\t\t\t\t\t\t\t\tclass=\"col-span-1 whitespace-pre-wrap flex justify-center items-center\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{{ produit.produits_commande.prix }} DA\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t<td\r\n\t\t\t\t\t\t\t\t\t\tv-if=\"isEditing\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"col-span-1 text-center flex flex-row py-4 form-control items-center justify-center\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"inline-flex overflow-hidden rounded-lg bg-gray-400 justify-evenly\"\r\n\t\t\t\t\t\t\t\t\t\t\t:class=\"{}\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<MinusIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"cursor-pointer h-8 w-8 flex-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t@click=\"produit.produits_commande.quantite--\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t:value=\"produit.produits_commande.quantite\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t@focus=\"inputgroupfocushandler\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t@blur=\"inputgroupblurhandler\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t@input=\"numbersOnly\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"input focus:outline-none flex-2 w-16 h-auto text-center peer rounded-none focus:border-0 focus:shadow-none focus:ring-0\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t<PlusIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"w-8 h-8 cursor-pointer flex-1\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t@click=\"produit.produits_commande.quantite++\"\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td\r\n\t\t\t\t\t\t\t\t\t\tv-else\r\n\t\t\t\t\t\t\t\t\t\tclass=\"col-span-1 whitespace-pre-wrap text-center flex items-center justify-center\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{{ produit.produits_commande.quantite }} KG\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\r\n\t\t\t\t\t\t\t\t\t<td\r\n\t\t\t\t\t\t\t\t\t\tclass=\"col-span-1 whitespace-pre-wrap text-center flex justify-center items-center\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{{ produit.prix - produit.produits_commande.prix }} DA\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t</DisclosurePanel>\r\n\t\t\t\t</transition>\r\n\t\t\t</Disclosure>\r\n\t\t</div> -->\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport {} from \"@heroicons/vue/solid\";\r\nimport {\r\n\tListbox,\r\n\tListboxButton,\r\n\tListboxOptions,\r\n\tListboxOption,\r\n\tDisclosure,\r\n\tDisclosureButton,\r\n\tDisclosurePanel,\r\n} from \"@headlessui/vue\";\r\nimport {\r\n\tCheckIcon,\r\n\tSelectorIcon,\r\n\tChevronUpIcon,\r\n\tMinusIcon,\r\n\tPlusIcon,\r\n} from \"@heroicons/vue/solid\";\r\nimport { Icon } from \"@iconify/vue\";\r\nimport fileDownload from \"js-file-download\";\r\nimport Api from \"@/services/api\";\r\n// import { Buffer } from \"buffer\";\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\terrorFileModal: false,\r\n\t\t\tquery: \"\",\r\n\t\t\tisEditing: false,\r\n\t\t\tnewProduct: {\r\n\t\t\t\tproduit: null,\r\n\t\t\t\tproduits_commande: {\r\n\t\t\t\t\tprix: null,\r\n\t\t\t\t\tquantite: null,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tobserver: null,\r\n\t\t\tlimit: 10,\r\n\t\t\tsearch: \"\",\r\n\t\t\taddedProducts: [],\r\n\t\t};\r\n\t},\r\n\tmethods: {\r\n\t\thandleBDC() {\r\n\t\t\tif (this.commande.bonDeCommande != null) {\r\n\t\t\t\t//todo\r\n\t\t\t\t//\r\n\t\t\t\treturn Api.get(\r\n\t\t\t\t\t`/commande/${this.commande.id}/document`,\r\n\t\t\t\t\t{},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tresponseType: \"arraybuffer\",\r\n\t\t\t\t\t\treponseEncoding: \"binary\",\r\n\t\t\t\t\t\t// headers: { \"Accept-Encoding\": \"gzip, deflate, br\" },\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t\t\t.then((response) => {\r\n\t\t\t\t\t\tfileDownload(\r\n\t\t\t\t\t\t\tresponse.data,\r\n\t\t\t\t\t\t\t`Bon De Commande ${this.commande.id}.pdf`,\r\n\t\t\t\t\t\t\t\"application/pdf\"\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((error) => {\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tvar input = document.createElement(\"input\");\r\n\t\t\tinput.type = \"file\";\r\n\t\t\tinput.click();\r\n\t\t\tinput.onchange = this.uploadFile;\r\n\t\t\t// const formData = new FormData();\r\n\t\t\t//open file selector and get file\r\n\t\t},\r\n\t\tasync uploadFile(event) {\r\n\t\t\tvar file = event.target.files[0];\r\n\t\t\tif (file.type != \"application/pdf\") {\r\n\t\t\t\tconsole.log(\"File is not a pdf\");\r\n\t\t\t\tthis.errorFileModal = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar formData = new FormData();\r\n\t\t\tformData.append(\"file\", file);\r\n\t\t\tthis.$store.dispatch(\"uploadBonDeCommande\", {\r\n\t\t\t\tformData,\r\n\t\t\t\tid: this.$route.params.id,\r\n\t\t\t});\r\n\t\t},\r\n\t\tnumbersOnly(event) {\r\n\t\t\tif (isNaN(parseInt(event.data)))\r\n\t\t\t\tevent.target.value = event.target.value.slice(\r\n\t\t\t\t\t0,\r\n\t\t\t\t\tevent.target.value.length - 1\r\n\t\t\t\t);\r\n\t\t},\r\n\t\tscrolllist(e) {\r\n\t\t\tif (\r\n\t\t\t\te.target.scrollHeight - e.target.scrollTop == e.target.clientHeight &&\r\n\t\t\t\tthis.hasNextPage\r\n\t\t\t)\r\n\t\t\t\tthis.limit += 10;\r\n\t\t},\r\n\t\tasync onOpen() {\r\n\t\t\tif (this.hasNextPage) {\r\n\t\t\t\tawait this.$nextTick();\r\n\t\t\t\tthis.observer.observe(this.$refs.load);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonClose() {\r\n\t\t\tthis.observer.disconnect();\r\n\t\t},\r\n\t\tasync infiniteScroll([{ isIntersecting, target }]) {\r\n\t\t\tconsole.log(isIntersecting);\r\n\t\t\tif (isIntersecting) {\r\n\t\t\t\tconst ul = target.offsetParent;\r\n\t\t\t\tconst scrollTop = target.offsetParent.scrollTop;\r\n\t\t\t\tthis.limit += 10;\r\n\t\t\t\tawait this.$nextTick();\r\n\t\t\t\tul.scrollTop = scrollTop;\r\n\t\t\t}\r\n\t\t},\r\n\t\tinputgroupfocushandler(e) {\r\n\t\t\te.target.parentNode.classList.add(\"border\");\r\n\t\t\te.target.parentNode.classList.add(\"border-primary\");\r\n\t\t\t// e.target.parentNode.classList.add('border-blue-500')\r\n\t\t},\r\n\t\tinputgroupblurhandler(e) {\r\n\t\t\te.target.parentNode.classList.remove(\"border\");\r\n\t\t\te.target.parentNode.classList.remove(\"border-primary\");\r\n\t\t\t// e.target.parentNode.classList.add('border-blue-500')\r\n\t\t},\r\n\t\tstartEditMode() {\r\n\t\t\tthis.isEditing = true;\r\n\t\t},\r\n\r\n\t\tdeleteCommande() {\r\n\t\t\tthis.$store.dispatch(\"deleteCommande\", this.commande.id);\r\n\t\t\tthis.$router.go(-1);\r\n\t\t},\r\n\t\tsaveCommande() {\r\n\t\t\tif (this.$route.params.id == \"new\") {\r\n\t\t\t\tthis.$store.dispatch(\"addCommande\", this.commande);\r\n\t\t\t} else {\r\n\t\t\t\tthis.$store.dispatch(\"updateCommande\", this.commande);\r\n\t\t\t\tthis.isEditing = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\taddProduct() {\r\n\t\t\tif (\r\n\t\t\t\tthis.newProduct.produit == null ||\r\n\t\t\t\tthis.newProduct.produits_commande.prix == null\r\n\t\t\t)\r\n\t\t\t\treturn;\r\n\t\t\tif (!this.newProduct.produits_commande.quantite)\r\n\t\t\t\tthis.newProduct.produits_commande.quantite = 1;\r\n\t\t\t//make api call /commandes/:id/addProduct\r\n\t\t\tthis.$store.dispatch(\"commande/addProducts\", {\r\n\t\t\t\tcommandeId: this.commande.id,\r\n\t\t\t\tproduct: this.newProduct,\r\n\t\t\t});\r\n\t\t\t// this.addedProducts.push({\r\n\t\t\t// \t...this.newProduct.produit,\r\n\t\t\t// \tproduits_commande: this.newProduct.produits_commande,\r\n\t\t\t// });\r\n\t\t\tthis.newProduct = {\r\n\t\t\t\tproduit: null,\r\n\t\t\t\tproduits_commande: {\r\n\t\t\t\t\tprix: null,\r\n\t\t\t\t\tquantite: null,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t},\r\n\t\tupdateProduit(product) {\r\n\t\t\tconsole.log(product);\r\n\t\t\tthis.$store.dispatch(\"commande/updateProduit\", {\r\n\t\t\t\tcommandeId: this.commande.id,\r\n\t\t\t\tproduct,\r\n\t\t\t});\r\n\t\t},\r\n\t\tdeleteProduit(id) {\r\n\t\t\tthis.$store.dispatch(\"commande/deleteProduit\", {\r\n\t\t\t\tcommandeId: this.commande.id,\r\n\t\t\t\tproductId: id,\r\n\t\t\t});\r\n\t\t\tthis.$store.dispatch(\"showCommande\", this.commande.id);\r\n\t\t},\r\n\t\tvaliderCommande() {\r\n\t\t\tthis.$store.dispatch(\"commande/validate\", {\r\n\t\t\t\tidCommande: this.commande.id,\r\n\t\t\t\tnext: this.$router,\r\n\t\t\t});\r\n\t\t},\r\n\t\tsave() {\r\n\t\t\t// if(this.$route.params.id == 'new'){}\r\n\t\t\t// this.$store.dispatch(\"commande/addProducts\", {\r\n\t\t\t// \tcommandeId: this.commande.id,\r\n\t\t\t// \tproducts: this.addedProducts,\r\n\t\t\t// });\r\n\t\t\t// this.addedProducts = [];\r\n\t\t\t// this.isEditing = false;\r\n\t\t},\r\n\t},\r\n\tcomponents: {\r\n\t\tListbox,\r\n\t\tListboxButton,\r\n\t\tListboxOptions,\r\n\t\tListboxOption,\r\n\t\tCheckIcon,\r\n\t\tSelectorIcon,\r\n\t\tChevronUpIcon,\r\n\t\tDisclosure,\r\n\t\tDisclosureButton,\r\n\t\tDisclosurePanel,\r\n\t\tMinusIcon,\r\n\t\tPlusIcon,\r\n\t\tIcon,\r\n\t},\r\n\tbeforeMount() {\r\n\t\tif (this.$route.params.id != \"new\")\r\n\t\t\tthis.$store.dispatch(\"showCommande\", this.$route.params.id);\r\n\t\telse {\r\n\t\t\tthis.$store.dispatch(\"showCommande\", \"new\");\r\n\t\t\tthis.isEditing = true;\r\n\t\t}\r\n\t\tconsole.log(this.commande);\r\n\t\tthis.$store.dispatch(\"getClients\");\r\n\t\tthis.$store.dispatch(\"getProduits\");\r\n\t},\r\n\tmounted() {\r\n\t\tthis.observer = new IntersectionObserver(this.infiniteScroll);\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\tcurrentUser() {\r\n\t\t\treturn this.$store.getters.getCurrentUser;\r\n\t\t},\r\n\t\tcommande: {\r\n\t\t\tget() {\r\n\t\t\t\treturn this.$store.getters.getCommande;\r\n\t\t\t},\r\n\t\t\tset(v) {\r\n\t\t\t\tthis.$store.dispatch(\"setCommande\", v);\r\n\t\t\t},\r\n\t\t},\r\n\t\tclients() {\r\n\t\t\tconst r = this.$store.getters.getClients;\r\n\t\t\treturn r.sort(function compare(a, b) {\r\n\t\t\t\tif (a.raisonSociale < b.raisonSociale) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t}\r\n\t\t\t\tif (a.raisonSociale > b.raisonSociale) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t});\r\n\t\t},\r\n\t\tpaginated() {\r\n\t\t\treturn this.canAddProducts.slice(0, this.limit);\r\n\t\t},\r\n\t\thasNextPage() {\r\n\t\t\treturn this.paginated.length < this.canAddProducts.length;\r\n\t\t},\r\n\t\tproducts() {\r\n\t\t\treturn this.$store.getters.getProduits;\r\n\t\t},\r\n\t\tcanAddProducts() {\r\n\t\t\tlet i = this.products.filter((el) => {\r\n\t\t\t\t// console.log(thi)\r\n\t\t\t\tif (\r\n\t\t\t\t\tthis.commande.Produits.find((d) => d.nom == el.nom) ||\r\n\t\t\t\t\tthis.addedProducts.includes((d) => d.nom == el.nom)\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\tif (\r\n\t\t\t\t\tthis.search != \"\" &&\r\n\t\t\t\t\tel.nom.toLowerCase().indexOf(this.search.toLowerCase()) == -1\r\n\t\t\t\t)\r\n\t\t\t\t\treturn false;\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t\tconsole.log({ i });\r\n\t\t\treturn i;\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style>\r\ninput::-webkit-outer-spin-button,\r\ninput::-webkit-inner-spin-button {\r\n\t-webkit-appearance: none;\r\n\tmargin: 0;\r\n}\r\n\r\n/* Firefox */\r\ninput[type=\"number\"] {\r\n\t-moz-appearance: textfield;\r\n}\r\n.style-chooser .vs__search::placeholder,\r\n.style-chooser .vs__dropdown-toggle,\r\n.style-chooser .vs__dropdown-menu {\r\n\tbackground: #dfe5fb;\r\n\tborder: none;\r\n\tcolor: #394066;\r\n\ttext-transform: lowercase;\r\n\tfont-variant: small-caps;\r\n}\r\n\r\n.style-chooser .vs__clear,\r\n.style-chooser .vs__open-indicator {\r\n\tfill: #394066;\r\n}\r\n</style>\r\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}