"use strict";(self["webpackChunkvost_app"]=self["webpackChunkvost_app"]||[]).push([[981],{4493:function(e,t,s){s.r(t),s.d(t,{default:function(){return pe}});var n=s(3396),a=s(7139),l=s(9242);const i={class:"h-full w-full items-center justify-center p-2 space-y-5",style:{"font-family":"Roboto"}},o=(0,n._)("div",{class:"flex flex-row justify-end items-center p-1 h-16"},null,-1),r={class:"card glass overflow-visible"},c={class:"card-body"},u={class:"flex md:flex-row flex-col h-full gap-3"},d={key:0,class:"rounded-md w-full md:w-16 h-16 flex flex-row py-2 px-1 hover:scale-110 hover:shadow-2xl hover:mx-3 transition-all duration-300 items-center",style:{"background-color":"#ffee00"}},p={class:"text-md font-semibold text-gray-600 mx-auto"},m={class:"rounded-md w-full md:w-2/6 h-16 flex flex-row py-2 px-1 hover:scale-110 hover:shadow-2xl hover:mx-3 transition-all duration-300 items-center",style:{"background-color":"#ffee00"}},w={class:"p-2 rounded-full bg-white justify-self-start",style:{"background-color":"rgba(255, 255, 255, 0.4)"}},f={class:"relative mt-1"},g={class:"relative w-full cursor-default overflow-hidden rounded-lg bg-white text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-teal-300 sm:text-sm"},h={key:0,class:"relative cursor-default select-none py-2 px-4 text-gray-700"},v={key:1,class:"text-md font-semibold text-gray-600 mx-auto"},x={class:"rounded-md w-full md:w-1/4 h-16 flex flex-row py-2 px-1 hover:scale-110 hover:shadow-2xl transition-all duration-300 hover:mx-3 items-center",style:{"background-color":"#ffee00"}},b={class:"p-2 rounded-full bg-white justify-self-start",style:{"background-color":"rgba(255, 255, 255, 0.4)"}},y={class:"text-md font-semibold text-gray-600 mx-auto"},_=(0,n._)("label",null,"Enregistrer",-1),C=[_],k={class:"w-full"},V={class:"bg-white rounded-md p-2"},D=(0,n._)("span",null,"Liste des ventes",-1),W={class:"w-full table items-center"},P={class:"w-full flex flex-col"},L={key:0,class:"md:grid grid-cols-4 hidden"},j={class:"whitespace-pre-wrap text-center col-span-1"},z={class:"relative mt-1 h-full"},I={class:"block truncate"},O={class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2"},Z={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-3 text-amber-600"},$={class:"whitespace-pre-wrap text-center"},q=["max"],B={class:"whitespace-pre-wrap text-center"},N={class:"align-middle"},T={class:"whitespace-pre-wrap text-center"},E=(0,n._)("label",null,"Ajouter",-1),M=[E],U=(0,n._)("tr",{class:"md:grid grid-cols-4 hidden"},[(0,n._)("td",{class:"whitespace-pre-wrap text-center"}),(0,n._)("td",{class:"whitespace-pre-wrap text-center"},"Montant"),(0,n._)("td",{class:"whitespace-pre-wrap text-center"}," Reste a payer "),(0,n._)("td",{class:"whitespace-pre-wrap text-center"},"Etat")],-1),S={class:"grid gap-3"},A={class:"col-span-1"},R={class:"whitespace-pre-wrap text-center flex items-center justify-center"},Y={class:"col-span-1 whitespace-pre-wrap flex justify-center items-center"},H={class:"font-semibold"},K={class:"col-span-1 whitespace-pre-wrap text-center flex items-center justify-center"},F={class:"font-semibold"},J={class:"col-span-1 whitespace-pre-wrap text-center flex items-center justify-center"},Q={class:"font-semibold"},G={class:"grid md:grid-cols-4"},X=(0,n._)("td",{class:"whitespace-pre-wrap text-center"},null,-1),ee=(0,n._)("td",{class:"whitespace-pre-wrap text-center"},null,-1),te=(0,n._)("td",{class:"whitespace-pre-wrap text-center"},"Total",-1),se={class:"whitespace-pre-wrap text-center text-md"};function ne(e,t,s,_,E,ne){const ae=(0,n.up)("Icon"),le=(0,n.up)("ComboboxInput"),ie=(0,n.up)("SelectorIcon"),oe=(0,n.up)("ComboboxButton"),re=(0,n.up)("CheckIcon"),ce=(0,n.up)("ComboboxOption"),ue=(0,n.up)("ComboboxOptions"),de=(0,n.up)("TransitionRoot"),pe=(0,n.up)("Combobox"),me=(0,n.up)("ChevronUpIcon"),we=(0,n.up)("DisclosureButton"),fe=(0,n.up)("ListboxButton"),ge=(0,n.up)("ListboxOption"),he=(0,n.up)("ListboxOptions"),ve=(0,n.up)("Listbox"),xe=(0,n.up)("DisclosurePanel"),be=(0,n.up)("Disclosure");return(0,n.wg)(),(0,n.iD)("div",i,[o,(0,n._)("div",r,[(0,n._)("div",c,[(0,n._)("div",u,[ne.isNew?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",d,[(0,n._)("span",p,(0,a.zw)(ne.paiement.id),1)])),(0,n._)("div",m,[(0,n._)("div",w,[(0,n.Wm)(ae,{icon:"akar-icons:person",class:"w-10 h-10 text-gray-600"})]),ne.isNew?((0,n.wg)(),(0,n.j4)(pe,{key:0,modelValue:E.newPaiement.Client,"onUpdate:modelValue":t[2]||(t[2]=e=>E.newPaiement.Client=e)},{default:(0,n.w5)((()=>[(0,n._)("div",f,[(0,n._)("div",g,[(0,n.Wm)(le,{class:"w-full border-none py-2 pl-3 pr-10 text-sm leading-5 text-gray-900 focus:ring-0",displayValue:e=>e.raisonSociale,onChange:t[0]||(t[0]=e=>E.queryClient=e.target.value)},null,8,["displayValue"]),(0,n.Wm)(oe,{class:"absolute inset-y-0 right-0 flex items-center pr-2"},{default:(0,n.w5)((()=>[(0,n.Wm)(ie,{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})])),_:1})]),(0,n.Wm)(de,{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",onAfterLeave:t[1]||(t[1]=e=>E.queryClient="")},{default:(0,n.w5)((()=>[(0,n.Wm)(ue,{class:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:(0,n.w5)((()=>[0===ne.filtredClients.length&&""!==E.queryClient?((0,n.wg)(),(0,n.iD)("div",h," Nothing found. ")):(0,n.kq)("",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(ne.filtredClients,(e=>((0,n.wg)(),(0,n.j4)(ce,{as:"template",key:e.id,value:e},{default:(0,n.w5)((({selected:t,active:s})=>[(0,n._)("li",{class:(0,a.C_)(["relative cursor-default select-none py-2 pl-10 pr-4",{"bg-teal-600 text-white":s,"text-gray-900":!s}])},[(0,n._)("span",{class:(0,a.C_)(["block truncate",{"font-medium":t,"font-normal":!t}])},(0,a.zw)(e.raisonSociale),3),t?((0,n.wg)(),(0,n.iD)("span",{key:0,class:(0,a.C_)(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":s,"text-teal-600":!s}])},[(0,n.Wm)(re,{class:"h-5 w-5","aria-hidden":"true"})],2)):(0,n.kq)("",!0)],2)])),_:2},1032,["value"])))),128))])),_:1})])),_:1})])])),_:1},8,["modelValue"])):((0,n.wg)(),(0,n.iD)("span",v,(0,a.zw)(ne.paiement.Client?.raisonSociale),1))]),(0,n._)("div",x,[(0,n._)("div",b,[(0,n.Wm)(ae,{icon:"fa-solid:cash-register",class:"w-9 h-9 text-gray-600"})]),(0,n._)("span",y,(0,a.zw)(ne.montantTotal||0)+" DZD",1)])]),E.isEditing?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn self-end btn-primary",onClick:t[3]||(t[3]=(...e)=>ne.savePaiement&&ne.savePaiement(...e))},C)):(0,n.kq)("",!0)])]),(0,n._)("div",k,[(0,n._)("div",V,[(0,n.Wm)(be,null,{default:(0,n.w5)((({open:e})=>[(0,n.Wm)(we,{class:"flex justify-between w-full px-4 py-2 text-sm font-medium text-left text-blue-900 bg-blue-100 rounded-lg hover:bg-blue-200 focus:outline-none focus-visible:ring focus-visible:ring-blue-500 focus-visible:ring-opacity-75"},{default:(0,n.w5)((()=>[D,(0,n.Wm)(me,{class:(0,a.C_)([e?"rotate-180 transform":"","h-5 w-5 text-purple-500"])},null,8,["class"])])),_:2},1024),(0,n.Wm)(xe,{class:"px-4 pt-4 pb-2 text-sm text-gray-500"},{default:(0,n.w5)((()=>[(0,n.Wm)(l.uT,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-out","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:(0,n.w5)((()=>[(0,n.Wm)(xe,{class:"w-full p-5 space-y-3 bg-white flex flex-col"},{default:(0,n.w5)((()=>[(0,n._)("table",W,[(0,n._)("thead",P,[ne.isNew?((0,n.wg)(),(0,n.iD)("tr",L,[(0,n._)("td",j,[(0,n.Wm)(ve,{modelValue:E.newVente,"onUpdate:modelValue":t[4]||(t[4]=e=>E.newVente=e)},{default:(0,n.w5)((()=>[(0,n._)("div",z,[(0,n.Wm)(fe,{class:"relative h-full w-full cursor-default rounded-lg bg-white py-2 pl-3 pr-10 text-left shadow-md focus:outline-none focus-visible:border-indigo-500 focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-orange-300 sm:text-sm"},{default:(0,n.w5)((()=>[(0,n._)("span",I,(0,a.zw)(E.newVente.id),1),(0,n._)("span",O,[(0,n.Wm)(ie,{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})])])),_:1}),(0,n.Wm)(l.uT,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:(0,n.w5)((()=>[(0,n.Wm)(he,{class:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(ne.ventes,(e=>((0,n.wg)(),(0,n.j4)(ge,{key:e.id,value:{...e,ventes_payement:{montant:0}},as:"template"},{default:(0,n.w5)((({active:t,selected:s})=>[(0,n._)("li",{class:(0,a.C_)([t?"bg-amber-100 text-amber-900":"text-gray-900","relative cursor-default select-none py-2 pl-10 pr-4"])},[(0,n._)("span",{class:(0,a.C_)([s?"font-medium":"font-normal","block truncate"])},(0,a.zw)(e.id),3),s?((0,n.wg)(),(0,n.iD)("span",Z,[(0,n.Wm)(re,{class:"h-5 w-5","aria-hidden":"true"})])):(0,n.kq)("",!0)],2)])),_:2},1032,["value"])))),128))])),_:1})])),_:1})])])),_:1},8,["modelValue"])]),(0,n._)("td",$,[(0,n.wy)((0,n._)("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=e=>E.newVente.ventes_payement.montant=e),class:"w-full text-center",max:E.newVente.montant-E.newVente.versement,min:"0"},null,8,q),[[l.nr,E.newVente.ventes_payement.montant]])]),(0,n._)("td",B,[(0,n._)("div",N,(0,a.zw)(E.newVente.montant-(E.newVente.versement+E.newVente.ventes_payement.montant)||0)+" DZD ",1)]),(0,n._)("td",T,[(0,n._)("button",{class:"btn self-end btn-primary",onClick:t[6]||(t[6]=e=>{E.newPaiement.Ventes.push(E.newVente),E.newVente={ventes_payement:{montant:0}}})},M)])])):(0,n.kq)("",!0),U]),(0,n._)("tbody",S,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(ne.isNew?E.newPaiement.Ventes:ne.paiement.Ventes,(e=>((0,n.wg)(),(0,n.iD)("tr",{class:"grid md:grid-cols-4 border-gray-400 border rounded-md bg-gray-200 shadow-md",key:e.id},[(0,n._)("td",A,[(0,n._)("span",R,(0,a.zw)(e?.id),1)]),(0,n._)("td",Y,[(0,n._)("span",H,(0,a.zw)(e?.montant)+" DZD ",1)]),(0,n._)("td",K,[(0,n._)("span",F,(0,a.zw)(e.montant-e.versement)+" DZD",1)]),(0,n._)("td",J,[(0,n._)("span",Q,(0,a.zw)(e.etat),1)])])))),128)),(0,n._)("tfoot",null,[(0,n._)("tr",G,[X,ee,te,(0,n._)("td",se,(0,a.zw)(ne.montantTotal)+" DZD",1)])])])])])),_:1})])),_:1})])),_:1})])),_:1})])])])}var ae=s(6770),le=s(4521),ie=s(4808),oe=s(1621),re=s(6088),ce={data(){return{errorFileModal:!1,queryClient:"",newPaiement:{Ventes:[]},newVente:{ventes_payement:{montant:0}},isEditing:!1}},methods:{numbersOnly(e){isNaN(parseInt(e.data))&&(e.target.value=e.target.value.slice(0,e.target.value.length-1))},downloadBon(){},startEditMode(){this.isEditing=!0},savePaiement(){this.$store.dispatch("addPaiement",this.newPaiement).then((()=>{this.$router.goBack()}))}},components:{ChevronUpIcon:le.Z,Disclosure:ae.pJ,DisclosureButton:ae.lG,DisclosurePanel:ae.V2,Icon:re.JO,Combobox:ae.hQ,ComboboxButton:ae.Q$,ComboboxInput:ae.gA,ComboboxOptions:ae.L5,ComboboxOption:ae.O2,Listbox:ae.Ri,ListboxButton:ae.Y4,ListboxOptions:ae.O_,ListboxOption:ae.wt,CheckIcon:ie.Z,SelectorIcon:oe.Z},beforeMount(){this.isNew?this.isEditing=!0:this.$store.dispatch("showPaiement",this.$route.params.id),this.$store.dispatch("getClients")},watch:{"newPaiement.Client":function(){this.$store.dispatch("getVentes",{ClientId:this.newPaiement.Client.id})}},computed:{currentUser(){return this.$store.getters.getCurrentUser},montantTotal(){return this.isNew?this.newPaiement.Ventes.reduce(((e,t)=>e+t.ventes_payement.montant),0):(console.log("heu"),this.paiement.Ventes.reduce(((e,t)=>e+t.montant),0))},filtredClients(){return this.$store.getters.getClients.filter((e=>e.raisonSociale.toLowerCase().includes(this.queryClient.toLowerCase())))},ventes(){return this.$store.getters.getVentes.filter((e=>e.montant-e.versement>0&&0==this.newPaiement.Ventes.some((t=>t.id==e.id))))},isNew(){return"new"==this.$route.params.id},paiement(){return this.$store.getters.getPaiement}}},ue=s(89);const de=(0,ue.Z)(ce,[["render",ne]]);var pe=de},4808:function(e,t,s){s.d(t,{Z:function(){return a}});var n=s(3396);function a(e,t){return(0,n.wg)(),(0,n.j4)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[(0,n.Wm)("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])}},4521:function(e,t,s){s.d(t,{Z:function(){return a}});var n=s(3396);function a(e,t){return(0,n.wg)(),(0,n.j4)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[(0,n.Wm)("path",{"fill-rule":"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z","clip-rule":"evenodd"})])}},1621:function(e,t,s){s.d(t,{Z:function(){return a}});var n=s(3396);function a(e,t){return(0,n.wg)(),(0,n.j4)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[(0,n.Wm)("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"})])}}}]);
//# sourceMappingURL=981.7c0b4ced.js.map