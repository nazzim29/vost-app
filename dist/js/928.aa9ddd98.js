"use strict";(self["webpackChunkvost_app"]=self["webpackChunkvost_app"]||[]).push([[928],{1639:function(e,t,s){s.r(t),s.d(t,{default:function(){return _t}});var l=s(3396),r=s(9242),o=s(7139);const n=e=>((0,l.dD)("data-v-4ecfe59a"),e=e(),(0,l.Cn)(),e),a={class:"flex flex-col w-full h-screen bg-gray-700 overflow-hidden space-y-1"},i={class:"flex self-start w-full items-center space-x-3 h-16 py-1 px-2 md:items-center"},d={class:"rounded-full py-2 px-2 bg-gray-500"},c={key:0,class:"rounded-full py-2 px-2 bg-gray-500"},u={class:"bg-blue-900"},f={class:"ml-auto relative max-w-xs w-full h-full bg-gray-900 shadow-xl py-4 pb-12 flex flex-col overflow-y-auto"},m={class:"px-4 flex items-center justify-between"},p=n((()=>(0,l._)("h2",{class:"text-lg font-medium text-gray-300"},"Filters",-1))),w=n((()=>(0,l._)("span",{class:"sr-only text-white"},"Close menu",-1))),x={class:"mt-4 border-t border-gray-400"},h={class:"-mx-2 -my-3 flow-root"},b={class:"px-2 py-3 bg-gray-700 w-full flex items-center justify-between text-gray-400 hover:text-gray-200"},g=n((()=>(0,l._)("span",{class:"font-medium text-gray-400"}," Fonctions ",-1))),y={class:"ml-6 flex items-center"},v={key:0,class:"space-y-6"},_=["value","checked"],U={class:"ml-3 min-w-0 flex-1 text-gray-500"},k={class:"flex-1 flex flex-col overflow-hidden"},C={key:0,class:"w-full flex flex-1 flex-col overflow-y-auto"},I={class:"w-full max-h-fit grid grid-rows-10 md:grid-cols-4 space-y-2 md:space-y-2 items-center"},P=(0,l.Uk)("Ajouter un utilisateur"),W={class:"flex flex-col w-full py-10"},M={class:"relative mt-20 self-center w-28 h-28"},$={ref:"avatarDisplay",class:"w-full object-fit h-full rounded-md overflow-hidden",src:"https://therminic2018.eu/wp-content/uploads/2018/07/dummy-avatar.jpg"},j={class:"flex flex-col space-y-3 mt-4 px-2"},D={class:"flex flex-col w-full space-y-2 space-x-2"},L=n((()=>(0,l._)("label",{class:"flex items-center text-bold h-full rounded-l-md text-md"},"Username",-1))),S={class:"flex flex-row items-cente focus-within:ring-1 rounded-md ring-blue-600 overflow-hidden"},V=n((()=>(0,l._)("label",{for:"username",class:"flex items-center uppercase text-bold rounded-l-md px-2 bg-gray-200 text-gray-800 text-xl border-t border-l border-b"},"@",-1))),O={class:"flex flex-col w-full"},z={class:"flex flex-col items-start space-y-2 space-x-2 w-full"},Z=n((()=>(0,l._)("label",{for:"nom",class:"flex items-center text-bold h-full rounded-l-md text-md"},"Nom",-1))),F={class:"flex flex-col w-full"},B={class:"flex flex-col items-start w-full space-y-2 space-x-2"},R=n((()=>(0,l._)("label",{for:"prenom",class:"flex items-center text-bold h-full rounded-l-md px-2text-xl"},"Prenom",-1))),N={class:"flex flex-col w-full space-y-2 space-x-2"},q=n((()=>(0,l._)("label",{for:"numero",class:"flex items-center text-bold h-full rounded-l-md text-md"},"Numero",-1))),Y={class:"flex flex-row items-cente w-3/4 focus-within:ring-1 rounded-md ring-blue-600"},A=n((()=>(0,l._)("label",{for:"numero",class:"flex items-center uppercase text-bold rounded-l-md px-2 bg-gray-200 text-gray-800 text-md border-t border-l border-b"},"+213",-1))),T={class:"flex flex-col w-full"},H={class:"flex flex-col items-start w-full space-y-2 space-x-2"},K=n((()=>(0,l._)("label",{for:"passwordConfirm",class:"flex items-center text-bold h-full rounded-l-md text-md"},"Fonction",-1))),E={class:"relative w-3/4"},J={class:"block truncate"},X={class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},G={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-3 text-amber-600"},Q={class:"flex flex-col w-full"},ee={class:"flex flex-col items-start space-y-2 space-x-2 w-full"},te=n((()=>(0,l._)("label",{for:"password",class:"flex items-center text-bold h-full rounded-l-md px-2text-xl"},"Mot de passe",-1))),se={class:"flex flex-col w-full"},le={class:"flex flex-col items-start w-max space-y-2 space-x-2"},re=n((()=>(0,l._)("label",{for:"passwordConfirm",class:"flex items-center text-bold h-full rounded-l-md text-md"},"Confirmation",-1))),oe=(0,l.Uk)("Ajouter");function ne(e,t,s,n,ne,ae){const ie=(0,l.up)("SearchBar"),de=(0,l.up)("FilterIcon"),ce=(0,l.up)("Icon"),ue=(0,l.up)("DialogOverlay"),fe=(0,l.up)("TransitionChild"),me=(0,l.up)("XIcon"),pe=(0,l.up)("PlusSmIcon"),we=(0,l.up)("MinusSmIcon"),xe=(0,l.up)("DisclosureButton"),he=(0,l.up)("DisclosurePanel"),be=(0,l.up)("Disclosure"),ge=(0,l.up)("Dialog"),ye=(0,l.up)("TransitionRoot"),ve=(0,l.up)("UserRow"),_e=(0,l.up)("Pagination"),Ue=(0,l.up)("PencilIcon"),ke=(0,l.up)("SelectorIcon"),Ce=(0,l.up)("ListboxButton"),Ie=(0,l.up)("CheckIcon"),Pe=(0,l.up)("ListboxOption"),We=(0,l.up)("ListboxOptions"),Me=(0,l.up)("Listbox"),$e=(0,l.up)("Modal");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",a,[(0,l._)("div",i,[(0,l.Wm)(ie,{ref:"searchbar",onSearch:ae.searchfn},null,8,["onSearch"]),(0,l._)("div",d,[(0,l.Wm)(de,{onClick:t[0]||(t[0]=e=>ne.mobileFiltersOpen=!ne.mobileFiltersOpen),class:"h-7 fill-current text-white"})]),ae.currentUser.Profile.Autorisations.find((e=>"add-utilisateur"==e.nom))?((0,l.wg)(),(0,l.iD)("div",c,[(0,l.Wm)(ce,{icon:"ant-design:user-add-outlined",onClick:ae.openCreateModal,class:"h-7 w-7 fill-current text-white"},null,8,["onClick"])])):(0,l.kq)("",!0)]),(0,l._)("div",u,[(0,l._)("div",null,[(0,l.Wm)(ye,{as:"template",show:ne.mobileFiltersOpen},{default:(0,l.w5)((()=>[(0,l.Wm)(ge,{as:"div",class:"fixed inset-0 flex z-40",onClose:t[3]||(t[3]=e=>ne.mobileFiltersOpen=!1)},{default:(0,l.w5)((()=>[(0,l.Wm)(fe,{as:"template",enter:"transition-opacity ease-linear duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:(0,l.w5)((()=>[(0,l.Wm)(ue,{class:"fixed inset-0 bg-black bg-opacity-25"})])),_:1}),(0,l.Wm)(fe,{as:"template",enter:"transition ease-in-out duration-300 transform","enter-from":"translate-x-full","enter-to":"translate-x-0",leave:"transition ease-in-out duration-300 transform","leave-from":"translate-x-0","leave-to":"translate-x-full"},{default:(0,l.w5)((()=>[(0,l._)("div",f,[(0,l._)("div",m,[p,(0,l._)("button",{type:"button",class:"-mr-2 w-7 h-7 bg-gray-800 p-1 rounded-md flex items-center justify-center text-gray-400",onClick:t[1]||(t[1]=e=>ne.mobileFiltersOpen=!1)},[w,(0,l.Wm)(me,{class:"h-6 w-6 text-gray-300","aria-hidden":"true"})])]),(0,l._)("form",x,[(0,l.Wm)(be,{as:"div",class:"border-t border-gray-400 px-4 py-6"},{default:(0,l.w5)((({open:e})=>[(0,l._)("h3",h,[(0,l.Wm)(xe,{as:"template"},{default:(0,l.w5)((()=>[(0,l._)("div",b,[g,(0,l._)("span",y,[e?((0,l.wg)(),(0,l.j4)(we,{key:1,class:"h-5 w-5","aria-hidden":"true"})):((0,l.wg)(),(0,l.j4)(pe,{key:0,class:"h-5 w-5","aria-hidden":"true"}))])])])),_:2},1024)]),(0,l.Wm)(he,{class:"pt-6"},{default:(0,l.w5)((()=>[ae.fonctions?.length>0?((0,l.wg)(),(0,l.iD)("div",v,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ae.fonctions,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e.id,class:"flex items-center"},[(0,l.wy)((0,l._)("input",{value:e.id,type:"checkbox",checked:e.checked,class:"h-4 w-4 border-gray-400 rounded text-blue-600 focus:ring-blue-500","onUpdate:modelValue":t[2]||(t[2]=e=>ne.fonctionsel=e)},null,8,_),[[r.e8,ne.fonctionsel]]),(0,l._)("label",U,(0,o.zw)(e.nom),1)])))),128))])):(0,l.kq)("",!0)])),_:1})])),_:1})])])])),_:1})])),_:1})])),_:1},8,["show"])])]),(0,l._)("div",k,[0!=ae.showedusers?.length?((0,l.wg)(),(0,l.iD)("div",C,[(0,l._)("ul",I,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ae.showedusers,(e=>((0,l.wg)(),(0,l.j4)(ve,{key:e.id,user:e,onDelete:ae.openModal},null,8,["user","onDelete"])))),128))])])):(0,l.kq)("",!0),(0,l.Wm)(_e,{ref:"Pagination",currentPage:ne.currentPage,pageSize:ae.nbperpage,dataLength:ae.users.length,onPage:t[4]||(t[4]=e=>ne.currentPage=e),onNext:t[5]||(t[5]=e=>ne.currentPage++),onPrev:t[6]||(t[6]=e=>ne.currentPage--),onFirst:t[7]||(t[7]=e=>ne.currentPage=1),onLast:t[8]||(t[8]=t=>ne.currentPage=e.$refs.Pagination.pageNumber)},null,8,["currentPage","pageSize","dataLength"])])]),(0,l.Wm)($e,{ref:"createModal",primaryColor:"haja",onSubmit:ae.addUser},{title:(0,l.w5)((()=>[P])),body:(0,l.w5)((()=>[(0,l._)("div",W,[(0,l._)("div",M,[(0,l._)("img",$,null,512),(0,l.Wm)(Ue,{class:"absolute w-5 bottom-1 right-1",onClick:ae.pencilCLick},null,8,["onClick"]),(0,l._)("input",{type:"file",style:{display:"none"},class:"absolute w-5 bottom-1 right-1",ref:"fileInput",onChange:t[9]||(t[9]=(...e)=>ae.avatarChanged&&ae.avatarChanged(...e))},null,544)]),(0,l._)("div",j,[(0,l._)("div",D,[L,(0,l._)("div",S,[V,(0,l.wy)((0,l._)("input",{type:"text",name:"username",id:"username","onUpdate:modelValue":t[10]||(t[10]=e=>ne.newUser.username=e),placeholder:"Username",class:"rounded-r-md border-0 focus:ring-0 h-fit"},null,512),[[r.nr,ne.newUser.username]])])]),(0,l._)("div",O,[(0,l._)("div",z,[Z,(0,l.wy)((0,l._)("input",{type:"text",name:"nom",id:"nom","onUpdate:modelValue":t[11]||(t[11]=e=>ne.newUser.nom=e),placeholder:"Nom",class:"rounded-md border-0 w-3/4"},null,512),[[r.nr,ne.newUser.nom]])])]),(0,l._)("div",F,[(0,l._)("div",B,[R,(0,l.wy)((0,l._)("input",{type:"text",name:"prenom",id:"prenom","onUpdate:modelValue":t[12]||(t[12]=e=>ne.newUser.prenom=e),placeholder:"Prenom",class:"rounded-md border-0 w-3/4"},null,512),[[r.nr,ne.newUser.prenom]])])]),(0,l._)("div",N,[q,(0,l._)("div",Y,[A,(0,l.wy)((0,l._)("input",{type:"tel",name:"numero",id:"numero","onUpdate:modelValue":t[13]||(t[13]=e=>ne.newUser.numero=e),placeholder:"Numero de telephone",class:"rounded-r-md border-0 focus:ring-0"},null,512),[[r.nr,ne.newUser.numero]])])]),(0,l._)("div",T,[(0,l._)("div",H,[K,(0,l.Wm)(Me,{modelValue:ne.newUser.ProfileId,"onUpdate:modelValue":t[14]||(t[14]=e=>ne.newUser.ProfileId=e)},{default:(0,l.w5)((()=>[(0,l._)("div",E,[(0,l.Wm)(Ce,{class:"h-10 relative w-full py-2 pl-3 pr-10 text-left bg-white rounded-lg cursor-default focus:outline-none focus-visible:ring-2 focus-visible:ring-opacity-75 focus-visible:ring-white focus-visible:ring-offset-orange-300 focus-visible:ring-offset-2 focus-visible:border-indigo-500 sm:text-sm border-1"},{default:(0,l.w5)((()=>[(0,l._)("span",J,(0,o.zw)(ae.fonctions.find((e=>e.id==ne.newUser.ProfileId))?.nom||"Fonction"),1),(0,l._)("span",X,[(0,l.Wm)(ke,{class:"w-5 h-5 text-gray-400","aria-hidden":"true"})])])),_:1}),(0,l.Wm)(r.uT,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:(0,l.w5)((()=>[(0,l.Wm)(We,{class:"absolute w-full py-1 mt-1 mb-3 overflow-auto text-base bg-white rounded-md shadow-lg max-h-60 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm text-left"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ae.fonctions,(e=>((0,l.wg)(),(0,l.j4)(Pe,{key:e.id,value:e.id,as:"template"},{default:(0,l.w5)((({active:t,selected:s})=>[(0,l._)("li",{class:(0,o.C_)([t?"text-amber-900 bg-amber-100":"text-gray-900","cursor-default select-none relative py-2 pl-10 pr-4"])},[(0,l._)("span",{class:(0,o.C_)([s?"font-medium":"font-normal","block truncate"])},(0,o.zw)(e.nom),3),s?((0,l.wg)(),(0,l.iD)("span",G,[(0,l.Wm)(Ie,{class:"w-5 h-5","aria-hidden":"true"})])):(0,l.kq)("",!0)],2)])),_:2},1032,["value"])))),128))])),_:1})])),_:1})])])),_:1},8,["modelValue"])])]),(0,l._)("div",Q,[(0,l._)("div",ee,[te,(0,l.wy)((0,l._)("input",{type:"password",name:"password",id:"password","onUpdate:modelValue":t[15]||(t[15]=e=>ne.newUser.password=e),placeholder:"Mot de passe",class:"rounded-md border-0 w-3/4"},null,512),[[r.nr,ne.newUser.password]])])]),(0,l._)("div",se,[(0,l._)("div",le,[re,(0,l.wy)((0,l._)("input",{type:"password",name:"passwordConfirm",id:"passwordConfirm","onUpdate:modelValue":t[16]||(t[16]=e=>ne.newUser.passwordConfirm=e),placeholder:"Confirmation",class:"rounded-md border-0"},null,512),[[r.nr,ne.newUser.passwordConfirm]])])])])])])),submit:(0,l.w5)((()=>[oe])),_:1},8,["onSubmit"])],64)}var ae=s(4147),ie=s(4806),de=s(2207),ce=s(6770),ue=s(1463),fe=s(2819),me=s(7648),pe=s(4808),we=s(1621),xe=s(8582),he=s(5217),be=s(6515);const ge={class:"overflow-hidden flex flex-col divide-y-2 space-y-1 bg-white rounded-xl mx-2 shadow-2xl items-center max-h-32"},ye={class:"flex flex-row space-x-2 w-full order-2 -mt-3 px-2"},ve=(0,l._)("img",{class:"w-10 h-10 rounded-md overflow-hidden",src:"https://therminic2018.eu/wp-content/uploads/2018/07/dummy-avatar.jpg"},null,-1),_e={class:"flex flex-col flex-1"},Ue={class:"text-bold w-32 whitespace-nowrap overflow-hidden text-ellipsis"},ke={class:"text-light text-gray-400 text-sm"},Ce={class:"w-full inline-flex space-x-2 items-center justify-center order-3"},Ie={class:""},Pe={class:"w-full flex items-center justify-center order-4"},We={class:"order-1 w-4 flex justify-center items-center self-end border-none h-5"},Me=(0,l.Uk)(" Editer "),$e=(0,l.Uk)(" Supprimer "),je=(0,l.Uk)("Supprimer un utilisateur"),De=(0,l.Uk)("Supprimer"),Le=(0,l.Uk)("Ajouter un utilisateur"),Se={class:"flex flex-col w-full py-10"},Ve={class:"relative mt-20 self-center w-28 h-28"},Oe={ref:"avatarDisplay",class:"w-full object-fit h-full rounded-md overflow-hidden",src:"https://therminic2018.eu/wp-content/uploads/2018/07/dummy-avatar.jpg"},ze={class:"flex flex-col space-y-3 mt-4 px-2"},Ze={class:"flex flex-col w-full space-y-2 space-x-2"},Fe=(0,l._)("label",{class:"flex items-center text-bold h-full rounded-l-md text-md"},"Username",-1),Be={class:"flex flex-row items-cente focus-within:ring-1 rounded-md ring-blue-600 overflow-hidden"},Re=(0,l._)("label",{for:"username",class:"flex items-center uppercase text-bold rounded-l-md px-2 bg-gray-200 text-gray-800 text-xl border-t border-l border-b"},"@",-1),Ne={class:"flex flex-col w-full"},qe={class:"flex flex-col items-start space-y-2 space-x-2 w-full"},Ye=(0,l._)("label",{for:"nom",class:"flex items-center text-bold h-full rounded-l-md text-md"},"Nom",-1),Ae={class:"flex flex-col w-full"},Te={class:"flex flex-col items-start w-full space-y-2 space-x-2"},He=(0,l._)("label",{for:"prenom",class:"flex items-center text-bold h-full rounded-l-md px-2text-xl"},"Prenom",-1),Ke={class:"flex flex-col w-full space-y-2 space-x-2"},Ee=(0,l._)("label",{for:"numero",class:"flex items-center text-bold h-full rounded-l-md text-md"},"Numero",-1),Je={class:"flex flex-row items-cente w-3/4 focus-within:ring-1 rounded-md ring-blue-600"},Xe=(0,l._)("label",{for:"numero",class:"flex items-center uppercase text-bold rounded-l-md px-2 bg-gray-200 text-gray-800 text-md border-t border-l border-b"},"+213",-1),Ge={class:"flex flex-col w-full"},Qe={class:"flex flex-col items-start w-full space-y-2 space-x-2"},et=(0,l._)("label",{for:"passwordConfirm",class:"flex items-center text-bold h-full rounded-l-md text-md"},"Fonction",-1),tt={class:"relative w-3/4"},st={class:"block truncate"},lt={class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},rt={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-3 text-amber-600"},ot={class:"flex flex-col w-full"},nt={class:"flex flex-col items-start space-y-2 space-x-2 w-full"},at=(0,l._)("label",{for:"password",class:"flex items-center text-bold h-full rounded-l-md px-2text-xl"},"Mot de passe",-1),it={class:"flex flex-col w-full"},dt={class:"flex flex-col items-start w-max space-y-2 space-x-2"},ct=(0,l._)("label",{for:"passwordConfirm",class:"flex items-center text-bold h-full rounded-l-md text-md"},"Confirmation",-1),ut=(0,l.Uk)("Enregistrer ");function ft(e,t,s,n,a,i){const d=(0,l.up)("Icon"),c=(0,l.up)("DotsVerticalIcon"),u=(0,l.up)("MenuButton"),f=(0,l.up)("PencilIcon"),m=(0,l.up)("MenuItem"),p=(0,l.up)("UserRemoveIcon"),w=(0,l.up)("MenuItems"),x=(0,l.up)("Menu"),h=(0,l.up)("Modal"),b=(0,l.up)("SelectorIcon"),g=(0,l.up)("ListboxButton"),y=(0,l.up)("CheckIcon"),v=(0,l.up)("ListboxOption"),_=(0,l.up)("ListboxOptions"),U=(0,l.up)("Listbox");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("li",ge,[(0,l._)("div",ye,[ve,(0,l._)("div",_e,[(0,l._)("label",Ue,(0,o.zw)(s.user.nom.toUpperCase())+" "+(0,o.zw)(s.user.prenom.toLowerCase()),1),(0,l._)("h3",ke,"@"+(0,o.zw)(s.user.username),1)])]),(0,l._)("div",Ce,[(0,l.Wm)(d,{icon:s.user?.Profile?.icon,class:"h-5 w-5",style:(0,o.j5)({color:s.user?.Profile?.couleur})},null,8,["icon","style"]),(0,l._)("label",Ie,(0,o.zw)(s.user?.Profile?.nom),1)]),(0,l._)("div",Pe,[(0,l._)("label",null,(0,o.zw)(s.user.numero),1)]),(0,l._)("div",We,[i.currentUser.Profile.Autorisations.find((e=>"update-utilisateur"==e.nom))||i.currentUser.Profile.Autorisations.find((e=>"delete-utilisateur"==e.nom))?((0,l.wg)(),(0,l.j4)(x,{key:0,as:"div",class:"h-full"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{class:"h-full",onClick:t[0]||(t[0]=e=>a.extended=!a.extended)},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{class:"h-6 w-6 text-black focus:outline-none transform rotate-90 mr-4"})])),_:1}),(0,l.Wm)(r.uT,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-200 ease-out","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{class:"fixed -ml-28 bg-white shadow-2xl border space-y-2 divide-y divide-gray-300 devide-solid rounded-md py-2 px-0 flex flex-col"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[i.currentUser.Profile.Autorisations.find((e=>"update-utilisateur"==e.nom))?((0,l.wg)(),(0,l.j4)(m,{key:0},{default:(0,l.w5)((()=>[(0,l._)("button",{onClick:t[1]||(t[1]=t=>e.$refs.editModal.open=!0),class:"w-full hover:bg-gray-300 flex flex-row justify-start items-center px-2 rounded-sm"},[(0,l.Wm)(f,{class:"h-5 w-5 ml-2 mr-2 text-bold text-blue-800"}),Me])])),_:1})):(0,l.kq)("",!0),i.currentUser.Profile.Autorisations.find((e=>"delete-utilisateur"==e.nom))?((0,l.wg)(),(0,l.j4)(m,{key:1},{default:(0,l.w5)((()=>[(0,l._)("button",{class:"w-full hover:bg-gray-300 flex flex-row justify-start items-center px-2 rounded-sm",onClick:t[2]||(t[2]=t=>e.$refs.deleteModal.open=!0)},[(0,l.Wm)(p,{class:"h-5 w-5 ml-2 mr-2 text-bold text-red-800"}),$e])])),_:1})):(0,l.kq)("",!0)])])),_:1})])),_:1})])),_:1})):(0,l.kq)("",!0)])]),(0,l.Wm)(h,{ref:"deleteModal",primaryColor:"red-400",onSubmit:i.deleteUser},{title:(0,l.w5)((()=>[je])),body:(0,l.w5)((()=>[(0,l.Uk)("Etes-vous sur de vouloir supprimer l'utilisateur "+(0,o.zw)(s.user.nom.toUpperCase())+" "+(0,o.zw)(s.user.prenom.toLowerCase()),1)])),submit:(0,l.w5)((()=>[De])),_:1},8,["onSubmit"]),(0,l.Wm)(h,{ref:"editModal",primaryColor:"haja",onSubmit:i.updateUser},{title:(0,l.w5)((()=>[Le])),body:(0,l.w5)((()=>[(0,l._)("div",Se,[(0,l._)("div",Ve,[(0,l._)("img",Oe,null,512),(0,l.Wm)(f,{class:"absolute w-5 bottom-1 right-1",onClick:i.pencilCLick},null,8,["onClick"]),(0,l._)("input",{type:"file",style:{display:"none"},class:"absolute w-5 bottom-1 right-1",ref:"fileInput",onChange:t[3]||(t[3]=(...e)=>i.avatarChanged&&i.avatarChanged(...e))},null,544)]),(0,l._)("div",ze,[(0,l._)("div",Ze,[Fe,(0,l._)("div",Be,[Re,(0,l.wy)((0,l._)("input",{type:"text",name:"username",id:"username","onUpdate:modelValue":t[4]||(t[4]=e=>a.newUser.username=e),placeholder:"Username",class:"rounded-r-md border-0 focus:ring-0 h-fit"},null,512),[[r.nr,a.newUser.username]])])]),(0,l._)("div",Ne,[(0,l._)("div",qe,[Ye,(0,l.wy)((0,l._)("input",{type:"text",name:"nom",id:"nom","onUpdate:modelValue":t[5]||(t[5]=e=>a.newUser.nom=e),placeholder:"Nom",class:"rounded-md border-0 w-3/4"},null,512),[[r.nr,a.newUser.nom]])])]),(0,l._)("div",Ae,[(0,l._)("div",Te,[He,(0,l.wy)((0,l._)("input",{type:"text",name:"prenom",id:"prenom","onUpdate:modelValue":t[6]||(t[6]=e=>a.newUser.prenom=e),placeholder:"Prenom",class:"rounded-md border-0 w-3/4"},null,512),[[r.nr,a.newUser.prenom]])])]),(0,l._)("div",Ke,[Ee,(0,l._)("div",Je,[Xe,(0,l.wy)((0,l._)("input",{type:"tel",name:"numero",id:"numero","onUpdate:modelValue":t[7]||(t[7]=e=>a.newUser.numero=e),placeholder:"Numero de telephone",class:"rounded-r-md border-0 focus:ring-0"},null,512),[[r.nr,a.newUser.numero]])])]),(0,l._)("div",Ge,[(0,l._)("div",Qe,[et,(0,l.Wm)(U,{modelValue:a.newUser.ProfileId,"onUpdate:modelValue":t[8]||(t[8]=e=>a.newUser.ProfileId=e)},{default:(0,l.w5)((()=>[(0,l._)("div",tt,[(0,l.Wm)(g,{class:"h-10 relative w-full py-2 pl-3 pr-10 text-left bg-white rounded-lg cursor-default focus:outline-none focus-visible:ring-2 focus-visible:ring-opacity-75 focus-visible:ring-white focus-visible:ring-offset-orange-300 focus-visible:ring-offset-2 focus-visible:border-indigo-500 sm:text-sm border-1"},{default:(0,l.w5)((()=>[(0,l._)("span",st,(0,o.zw)(i.fonctions.find((e=>e.id==a.newUser.ProfileId))?.nom||"Fonction"),1),(0,l._)("span",lt,[(0,l.Wm)(b,{class:"w-5 h-5 text-gray-400","aria-hidden":"true"})])])),_:1}),(0,l.Wm)(r.uT,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{class:"absolute w-full py-1 mt-1 mb-3 overflow-auto text-base bg-white rounded-md shadow-lg max-h-60 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm text-left"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(i.fonctions,(e=>((0,l.wg)(),(0,l.j4)(v,{key:e.id,value:e.id,as:"template"},{default:(0,l.w5)((({active:t,selected:s})=>[(0,l._)("li",{class:(0,o.C_)([t?"text-amber-900 bg-amber-100":"text-gray-900","cursor-default select-none relative py-2 pl-10 pr-4"])},[(0,l._)("span",{class:(0,o.C_)([s?"font-medium":"font-normal","block truncate"])},(0,o.zw)(e.nom),3),s?((0,l.wg)(),(0,l.iD)("span",rt,[(0,l.Wm)(y,{class:"w-5 h-5","aria-hidden":"true"})])):(0,l.kq)("",!0)],2)])),_:2},1032,["value"])))),128))])),_:1})])),_:1})])])),_:1},8,["modelValue"])])]),(0,l._)("div",ot,[(0,l._)("div",nt,[at,(0,l.wy)((0,l._)("input",{type:"password",name:"password",id:"password","onUpdate:modelValue":t[9]||(t[9]=e=>a.newUser.password=e),placeholder:"Mot de passe",class:"rounded-md border-0 w-3/4"},null,512),[[r.nr,a.newUser.password]])])]),(0,l._)("div",it,[(0,l._)("div",dt,[ct,(0,l.wy)((0,l._)("input",{type:"password",name:"passwordConfirm",id:"passwordConfirm","onUpdate:modelValue":t[10]||(t[10]=e=>a.newUser.passwordConfirm=e),placeholder:"Confirmation",class:"rounded-md border-0"},null,512),[[r.nr,a.newUser.passwordConfirm]])])])])])])),submit:(0,l.w5)((()=>[ut])),_:1},8,["onSubmit"])],64)}var mt=s(6088),pt=s(8622),wt=s(9931),xt={components:{MenuItems:ce.sd,Menu:ce.v2,MenuButton:ce.j2,MenuItem:ce.sN,DotsVerticalIcon:pt.Z,UserRemoveIcon:wt.Z,Icon:mt.JO,Modal:ae.Z,PencilIcon:he.Z,CheckIcon:pe.Z,SelectorIcon:we.Z,Listbox:ce.Ri,ListboxButton:ce.Y4,ListboxOptions:ce.O_,ListboxOption:ce.wt},data(){return{extended:!1,newUser:this.user}},mounted(){},props:["user"],methods:{async deleteUser(){this.$store.dispatch("deleteUser",this.user.id).then((()=>{this.$refs.deleteModal.open=!1,this.$store.dispatch("getUsers")}))},updateUser(){this.$store.dispatch("updateUser",this.newUser),this.$refs.editModal.open=!1},pencilCLick(){this.$refs.fileInput.click()},avatarChanged(){this.$refs.avatarDisplay.src=URL.createObjectURL(this.$refs.fileInput.files[0])}},computed:{currentUser(){return this.$store.getters.getCurrentUser},fonctions(){return this.$store.getters.getFonctions}}},ht=s(89);const bt=(0,ht.Z)(xt,[["render",ft]]);var gt=bt,yt={name:"UsersIndex",components:{Pagination:de.Z,SearchBar:be.Z,Dialog:ce.Vq,DialogOverlay:ce.t9,Disclosure:ce.pJ,DisclosureButton:ce.lG,DisclosurePanel:ce.V2,UserRow:gt,TransitionChild:ce.xY,TransitionRoot:ce.Qm,FilterIcon:ue.Z,MinusSmIcon:fe.Z,PlusSmIcon:me.Z,XIcon:xe.Z,Modal:ae.Z,Icon:mt.JO,PencilIcon:he.Z,CheckIcon:pe.Z,SelectorIcon:we.Z,Listbox:ce.Ri,ListboxButton:ce.Y4,ListboxOptions:ce.O_,ListboxOption:ce.wt},async beforeMount(){await this.$store.dispatch("getUsers"),await this.$store.dispatch("getFonctions")},data(){return{newUser:{},fonctionsel:[],currentPage:1,mobileFiltersOpen:!1,subCategories:[],subcategorytitle:"hey"}},methods:{searchfn:(0,ie.debounce)((function(e){this.$store.dispatch("getUsers",{ProfileId:this.fonctionsel,nom:e,prenom:e,username:e,numero:e})}),500),openModal(e){this.$refs.modal.open=!0,this.$refs.modal.user=e},pencilCLick(){this.$refs.fileInput.click()},avatarChanged(){this.$refs.avatarDisplay.src=URL.createObjectURL(this.$refs.fileInput.files[0])},openCreateModal(){this.$refs.createModal.open=!0},addUser(){this.$store.dispatch("addUser",this.newUser),this.$refs.createModal.open=!1}},computed:{users(){return this.$store.getters.getUsers},nbperpage(){return window.innerWidth>=640&&window.innerWidth<768?10:window.innerWidth>=768&&window.innerWidth<1280?16:window.innerWidth>1280?20:5},filters(){return[{id:"nom",name:"Fonctions",options:this.fonctions}]},showedusers(){let e=this.$refs?.Pagination?.currentPage||1,t=this.users;return t?t.slice((e-1)*this.nbperpage,e*this.nbperpage):[]},fonctions(){return this.$store.getters.getFonctions},currentUser(){return this.$store.getters.getCurrentUser}},watch:{fonctionsel:function(){this.$store.dispatch("getUsers",{...0!=this.fonctionsel.length&&{ProfileId:this.fonctionsel},...""!=this.$refs.searchbar.search&&{nom:this.$refs.searchbar.search},...""!=this.$refs.searchbar.search&&{prenom:this.$refs.searchbar.search},...""!=this.$refs.searchbar.search&&{username:this.$refs.searchbar.search},...""!=this.$refs.searchbar.search&&{numero:this.$refs.searchbar.search}})}}};const vt=(0,ht.Z)(yt,[["render",ne],["__scopeId","data-v-4ecfe59a"]]);var _t=vt},8622:function(e,t,s){s.d(t,{Z:function(){return r}});var l=s(3396);function r(e,t){return(0,l.wg)(),(0,l.j4)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[(0,l.Wm)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})])}},9931:function(e,t,s){s.d(t,{Z:function(){return r}});var l=s(3396);function r(e,t){return(0,l.wg)(),(0,l.j4)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},[(0,l.Wm)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7a4 4 0 11-8 0 4 4 0 018 0zM9 14a6 6 0 00-6 6v1h12v-1a6 6 0 00-6-6zM21 12h-6"})])}}}]);
//# sourceMappingURL=928.aa9ddd98.js.map