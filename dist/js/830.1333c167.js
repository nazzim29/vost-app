"use strict";(self["webpackChunkvost_app"]=self["webpackChunkvost_app"]||[]).push([[830],{4147:function(e,t,o){o.d(t,{Z:function(){return h}});var n=o(3396);const i=e=>((0,n.dD)("data-v-694f6d0c"),e=e(),(0,n.Cn)(),e),s={class:"fixed inset-0 overflow-hidden text-center",style:{"z-index":"9999"}},l=i((()=>(0,n._)("span",{class:"inline-block h-full align-middle","aria-hidden":"true"}," â€‹ ",-1))),a={class:"overflow-hidden mx-5 pt-2 inline-flex flex-col align-middle transition-all transform bg-white shadow-xl rounded-2xl",style:{"max-height":"calc(100vh - 16px)"}},d={class:"flex flex-1 overflow-hidden min-h-16 items-center overflow-y-auto"},c={class:"w-full flex flex-row justify-end space-x-2 pr-2 py-1.5 shadow-top",style:{"z-index":"9999"}};function r(e,t,o,i,r,u){const f=(0,n.up)("DialogOverlay"),p=(0,n.up)("TransitionChild"),m=(0,n.up)("DialogTitle"),h=(0,n.up)("Dialog"),w=(0,n.up)("TransitionRoot");return(0,n.wg)(),(0,n.j4)(w,{appear:"",show:r.open,as:"template"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{onClose:u.closeModal},{default:(0,n.w5)((()=>[(0,n._)("div",s,[(0,n.Wm)(p,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{class:"fixed inset-0"})])),_:1}),l,(0,n.Wm)(p,{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:(0,n.w5)((()=>[(0,n._)("div",a,[(0,n.Wm)(m,{as:"h3",class:"text-lg font-medium leading-6 text-gray-900 shadow-md pb-1"},{default:(0,n.w5)((()=>[(0,n.WI)(e.$slots,"title",{},void 0,!0)])),_:3}),(0,n._)("div",d,[(0,n.WI)(e.$slots,"body",{obj:r.obj},void 0,!0)]),(0,n._)("div",c,[(0,n._)("button",{type:"button",class:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:t[0]||(t[0]=(...e)=>u.closeModal&&u.closeModal(...e))}," Cancel "),(0,n._)("button",{type:"button",class:"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:t[1]||(t[1]=e=>this.$emit("submit",this.obj))},[(0,n.WI)(e.$slots,"submit",{},void 0,!0)])])])])),_:3})])])),_:3},8,["onClose"])])),_:3},8,["show"])}var u=o(6770),f={components:{TransitionRoot:u.Qm,TransitionChild:u.xY,Dialog:u.Vq,DialogOverlay:u.t9,DialogTitle:u.$N},data(){return{open:!1,obj:null}},methods:{closeModal(){this.open=!1},openModal(){this.open=!0}}},p=o(89);const m=(0,p.Z)(f,[["render",r],["__scopeId","data-v-694f6d0c"]]);var h=m},2830:function(e,t,o){o.r(t),o.d(t,{default:function(){return Q}});var n=o(3396),i=o(7139),s=o(9242);const l=e=>((0,n.dD)("data-v-18de5a9e"),e=e(),(0,n.Cn)(),e),a={class:"flex flex-col h-screen w-full overflow-hidden"},d={class:"mx-2 mt-3 w-full flex flex-row"},c={class:"block truncate text-gray-700 font-semibold text-center"},r={class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},u=["onClick"],f={key:0,class:"flex items-center pl-3 text-amber-600"},p=l((()=>(0,n._)("span",{class:"ml-1"},"Ajouter",-1))),m={class:"bg-white shadow-lg rounded-md flex-1 m-2 p-1 overflow-y-auto"},h={class:"w-full grid grid-rows-7 ml-1 md:ml-0"},w=(0,n.uE)('<div class="md:grid grid-cols-3 hidden" data-v-18de5a9e><div class="font-bold w-full text-center border" data-v-18de5a9e>Gestion</div><div class="grid grid-cols-4 col-span-2" data-v-18de5a9e><div class="font-bold w-full text-gray-600 text-center border" data-v-18de5a9e> Lister </div><div class="font-bold w-full text-gray-600 text-center border" data-v-18de5a9e> Ajouter </div><div class="font-bold w-full text-gray-600 text-center border" data-v-18de5a9e> Archiver </div><div class="font-bold w-full text-gray-600 text-center border" data-v-18de5a9e> Modifier </div></div></div>',1),b={class:"md:border md:items-center md:justify-center md:inline-flex"},g={class:"grid md:grid-cols-4 md:grid-flow-col col-span-2"},v={class:"inline-flex items-center space-evenly space-x-1 md:justify-center w-full h-10"},x=["id","checked","onChange"],y=["for"],_={key:0,class:"inline-flex md:grid md:grid-row-2 items-center space-evenly md:justify-center ml-5 md:ml-0"},F={class:"h-16 inline-flex items-center justify-end space-x-1 pb-2 pr-2"},k=["disable"],C={class:"inline-flex items-center"},W=(0,n.Uk)(" Ajouter une fonction "),j={class:"flex flex-col w-full space-y-2"},$={class:"w-full"},D=l((()=>(0,n._)("label",{class:"block text-gray-700 text-sm font-semibold mb-2",for:"nom"},"Nom",-1))),M={class:"flex flex-col w-full"},A=l((()=>(0,n._)("label",{for:"color"},"Choisissez une couleur: ",-1))),z={class:"w-full inline-flex items-center"},L={class:"w-full flex flex-col"},I=l((()=>(0,n._)("label",{for:"icon"},"Choisissez une icon :",-1))),O={key:0,class:"grid grid-cols-6 border-1 border-blue-900 h-36 overflow-y-auto mt-2"},U={class:"w-full"},V=l((()=>(0,n._)("label",{class:"block text-gray-700 text-sm font-semibold mb-2",for:"description"},"Description",-1))),Z=(0,n.Uk)("Ajouter");function T(e,t,o,l,T,Y){const q=(0,n.up)("SelectorIcon"),H=(0,n.up)("ListboxButton"),B=(0,n.up)("Icon"),K=(0,n.up)("CheckIcon"),P=(0,n.up)("ListboxOption"),S=(0,n.up)("ListboxOptions"),R=(0,n.up)("Listbox"),E=(0,n.up)("Modal");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",a,[(0,n._)("div",d,[(0,n.Wm)(R,{modelValue:T.selectedFonction,"onUpdate:modelValue":t[0]||(t[0]=e=>T.selectedFonction=e)},{default:(0,n.w5)((()=>[(0,n.Wm)(H,{class:"relative w-44 py-2 pl-3 pr-10 text-left bg-white rounded-lg shadow-md cursor-default focus:outline-none focus-visible:ring-2 focus-visible:ring-opacity-75 focus-visible:ring-white focus-visible:ring-offset-orange-300 focus-visible:ring-offset-2 focus-visible:border-indigo-500 sm:text-sm"},{default:(0,n.w5)((()=>[(0,n._)("span",c,(0,i.zw)(T.selectedFonction&&T.selectedFonction.nom),1),(0,n._)("span",r,[(0,n.Wm)(q,{class:"w-5 h-5 text-gray-400","aria-hidden":"true"})])])),_:1}),(0,n.Wm)(s.uT,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:(0,n.w5)((()=>[(0,n.Wm)(S,{class:"absolute w-44 py-1 mt-10 overflow-auto text-base bg-white rounded-md shadow-lg max-h-60 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(Y.fonctions,(e=>((0,n.wg)(),(0,n.j4)(P,{key:e.id,value:e,as:"template"},{default:(0,n.w5)((({active:t,selected:o})=>[(0,n._)("li",{class:(0,i.C_)([t?"text-gray-900 bg-gray-100":"text-gray-500",o?"bg-indigo-100":"bg-white","cursor-default select-none group  relative py-2 px-2 pr-4 text-left inline-flex w-full justify-between items-center transition-all duration-100"])},[(0,n._)("span",{class:(0,i.C_)([o?"font-semibold":"font-normal","block truncate"])},(0,i.zw)(e.nom),3),(0,n._)("div",{class:"p-1",onClick:t=>Y.deleteFonction(e)},[(0,n.Wm)(B,{icon:"bi:archive",class:(0,i.C_)(["w-5 h-5 ml-2 hidden text-red-500 md:hover:text-red-500 md:group-hover:block"]),"aria-hidden":"true"})],8,u),o?((0,n.wg)(),(0,n.iD)("span",f,[(0,n.Wm)(K,{class:"w-5 h-5","aria-hidden":"true"})])):(0,n.kq)("",!0)],2)])),_:2},1032,["value"])))),128))])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,n._)("button",{onClick:t[1]||(t[1]=(...e)=>Y.openCreateModal&&Y.openCreateModal(...e)),class:"ml-2 items-center border-2 border-green-300 rounded-md px-3 bg-gray-200 hover:bg-gray-400 hover:text-white py-2 inline-flex"},[(0,n.Wm)(B,{icon:"carbon:bookmark-add",class:"w-5 h-5"}),p])]),(0,n._)("div",m,[(0,n._)("div",h,[w,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(Y.categories,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"grid md:grid-cols-3 space-y-2 md:space-y-0",key:e},[(0,n._)("div",b,(0,i.zw)(Y.capitalize(e)),1),(0,n._)("div",g,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(Y.autorisations.filter((t=>t.categorie===e)).sort((e=>e.id)),(e=>((0,n.wg)(),(0,n.iD)("div",{class:(0,i.C_)(["flex flex-col md:justify-center md:border",(e.nom.startsWith("add")?"order-2 ":e.nom.startsWith("delete")&&"order-3")||e.nom.startsWith("update")&&"order-4"||e.nom.startsWith("read")&&"order-1"]),key:e},[(0,n._)("div",v,[(0,n._)("input",{type:"checkbox",id:e.nom,class:(0,i.C_)(["focus:outline-none focus:ring-0 rounded-md w-5 h-5"]),checked:T.selectedFonction&&T.selectedFonction.Autorisations.map((e=>e.id)).includes(e.id),onChange:t=>Y.updateAutorisation(e,"all")},null,40,x),(0,n._)("label",{for:e.nom,class:"md:hidden"},(0,i.zw)(e.description),9,y)]),T.selectedFonction&&T.selectedFonction.Autorisations.find((t=>t.id==e.id))&&!e.nom.startsWith("add")&&T.selectedFonction.Autorisations.find((t=>t.id===e.id)).autorisations_fonctions?((0,n.wg)(),(0,n.iD)("div",_)):(0,n.kq)("",!0)],2)))),128))])])))),128))])]),(0,n._)("div",F,[(0,n._)("button",{onClick:t[2]||(t[2]=(...e)=>Y.deleteFonction&&Y.deleteFonction(...e)),class:(0,i.C_)(["bg-red-500 text-white text-sm sm:text-base font-semibold rounded-md py-1.5 px-1 focus:outline-none focus:ring-2 focus:ring-red-500 md:hidden"])}," Archiver le Profile ",2),(0,n._)("button",{onClick:t[3]||(t[3]=(...e)=>Y.updateFonction&&Y.updateFonction(...e)),class:(0,i.C_)(["bg-green-500 text-white font-semibold rounded-md py-1 px-2 focus:outline-none focus:ring-2 focus:ring-green-500",T.selectedFonction?.updated&&"bg-opacity-50"]),disable:!T.selectedFonction?.updated||!1}," Enregistrer ",10,k)])]),(0,n.Wm)(E,{ref:"createModal",primaryColor:"haja",onSubmit:Y.saveFonction},{title:(0,n.w5)((()=>[(0,n._)("div",C,[(0,n.Wm)(B,{icon:"carbon:bookmark-add",class:"w-5 h-5 mr-2"}),W])])),body:(0,n.w5)((()=>[(0,n._)("div",j,[(0,n._)("div",$,[D,(0,n.wy)((0,n._)("input",{type:"text",name:"nom","onUpdate:modelValue":t[4]||(t[4]=e=>T.newFonction.nom=e),class:"rounded-md w-full"},null,512),[[s.nr,T.newFonction.nom]])]),(0,n._)("div",M,[A,(0,n._)("div",z,[(0,n.wy)((0,n._)("input",{class:"rounded-md w-20",type:"color",name:"color","onUpdate:modelValue":t[5]||(t[5]=e=>T.newFonction.couleur=e)},null,512),[[s.nr,T.newFonction.couleur]]),(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>T.newFonction.couleur=e),type:"text",class:"rounded-md border-none text-gray-400 w-24",disabled:""},null,512),[[s.nr,T.newFonction.couleur]])])]),(0,n._)("div",L,[I,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>T.newFonction.icon=e),class:"rounded-md text-gray-400 w-full"},null,512),[[s.nr,T.newFonction.icon]]),0!=T.icons.length?((0,n.wg)(),(0,n.iD)("div",O,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(T.icons,(e=>((0,n.wg)(),(0,n.j4)(B,{icon:e,key:e,onClick:t=>T.newFonction.icon=e,class:"w-12 h-12 p-0.5 rounded-md m-1 focus:border-indigo-900 focus:border hover:bg-gray-400"},null,8,["icon","onClick"])))),128))])):(0,n.kq)("",!0)]),(0,n._)("div",U,[V,(0,n.wy)((0,n._)("textarea",{"onUpdate:modelValue":t[8]||(t[8]=e=>T.newFonction.description=e),name:"description",class:"resize-x-none rounded-md w-full"},null,512),[[s.nr,T.newFonction.description]])])])])),submit:(0,n.w5)((()=>[Z])),_:1},8,["onSubmit"])],64)}var Y=o(4147),q=o(4808),H=o(1621),B=o(6770),K=o(6088),P=o(6265),S=o.n(P),R=o(4806),E=o.n(R),N={name:"Fonctions",components:{Modal:Y.Z,Listbox:B.Ri,ListboxButton:B.Y4,ListboxOptions:B.O_,ListboxOption:B.wt,CheckIcon:q.Z,SelectorIcon:H.Z,Icon:K.JO},methods:{capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)},openCreateModal(){this.$refs.createModal.open=!0},opendeletemodal(e){this.$refs.obj=e,this.$refs.deletedModal.open=!0},updateAutorisation(e,t){this.selectedFonction.Autorisations.find((t=>t.id===e.id))?this.selectedFonction.Autorisations=this.selectedFonction.Autorisations.filter((t=>t.id!=e.id)):this.selectedFonction.Autorisations.push({autorisations_fonctions:{type:t||"all"},...e}),this.selectedFonction.updated=!1},async updateFonction(){if(!this.selectedFonction.updated)try{this.$store.dispatch("updateFonction",this.selectedFonction).then((e=>{console.log(e),this.selectedFonction.updated=!0}))}catch(e){console.log(e)}},async saveFonction(){try{await this.$store.dispatch("addFonction",this.newFonction),this.$refs.createModal.open=!1}catch(e){console.log(e)}},async deleteFonction(e){console.log(e);try{await this.$store.dispatch("deleteFonction",e.id||this.selectedFonction.id)}catch(t){console.log(t)}},changedColor(e){this.newFonction.couleur=e}},async beforeMount(){await this.$store.dispatch("getFonctions"),await this.$store.dispatch("getAutorisations"),this.selectedFonction=this.fonctions[this.fonctions.map((e=>e.id)).indexOf(this.$store.state.users.user.Profile.id)]},data(){return{selectedFonction:null,newFonction:{},deletedFonction:{},icons:[],isMobile:!1,showColorPicker:!1}},computed:{autorisations(){return this.$store.state.fonctions.autorisations},categories(){return this.$store.state.fonctions.autorisations.map((e=>e.categorie)).filter(((e,t,o)=>o.indexOf(e)===t))},fonctions(){return this.$store.state.fonctions.fonctions}},watch:{"newFonction.icon":E().debounce((async function(){this.icons=(await S().get(`https://api.iconify.design/search?query=${this.newFonction.icon}`)).data.icons}),200),selectedFonction(){void 0===this.selectedFonction.updated&&(this.selectedFonction.updated=!0)},fonctions:function(){this.fonctions.find((e=>e.id==this.selectedFonction))||(this.selectedFonction=this.fonctions.find((e=>e.id==this.$store.state.users.user.Profile.id)))}}},G=o(89);const J=(0,G.Z)(N,[["render",T],["__scopeId","data-v-18de5a9e"]]);var Q=J},4808:function(e,t,o){o.d(t,{Z:function(){return i}});var n=o(3396);function i(e,t){return(0,n.wg)(),(0,n.j4)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[(0,n.Wm)("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])}},1621:function(e,t,o){o.d(t,{Z:function(){return i}});var n=o(3396);function i(e,t){return(0,n.wg)(),(0,n.j4)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[(0,n.Wm)("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"})])}}}]);
//# sourceMappingURL=830.1333c167.js.map