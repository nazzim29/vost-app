(self["webpackChunkvost_app"]=self["webpackChunkvost_app"]||[]).push([[437],{7023:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return Oe}});var n=o(3396),s=o(7139),a=o(9242);const l={class:"h-full w-full items-center justify-center p-2 space-y-5",style:{"font-family":"Roboto"}},i={key:0,class:"flex flex-row justify-end items-center p-1 space-x-2"},r=(0,n._)("label",null,"Archiver",-1),d=(0,n._)("label",null,"Valider",-1),c=(0,n._)("label",null,"Bon de commande",-1),u={class:"card glass overflow-visible"},m={class:"card-body"},p={class:"flex md:flex-row flex-col h-full gap-3"},f={key:0,class:"rounded-md w-full md:w-16 h-16 flex flex-row py-2 px-1 hover:scale-110 hover:shadow-2xl hover:my-3 md:hover:mx-3 transition-all duration-300 items-center",style:{"background-color":"#ffee00"}},h={class:"text-md font-semibold text-gray-600 mx-auto"},w={class:"rounded-md w-full md:w-2/6 h-16 flex flex-row py-2 px-1 hover:scale-110 hover:shadow-2xl hover:my-3 md:hover:mx-3 hover:md:my-0 transition-all duration-300 items-center",style:{"background-color":"#ffee00"}},g={class:"p-2 rounded-full bg-white justify-self-start",style:{"background-color":"rgba(255, 255, 255, 0.4)"}},b={class:"relative mt-1"},v={class:"relative w-full cursor-default overflow-hidden rounded-lg bg-white text-left focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-teal-300 sm:text-sm"},x={key:0,class:"relative cursor-default select-none py-2 px-4 text-gray-700"},y={key:1,class:"text-md font-semibold text-gray-600 mx-auto"},_={class:"rounded-md w-full md:w-1/4 h-16 flex flex-row py-2 px-1 hover:scale-110 hover:shadow-2xl hover:my-3 hover:md:mx-3 hover:md:my-0 transition-all duration-300 items-center",style:{"background-color":"#ffee00"}},C={class:"p-2 rounded-full bg-white justify-self-start",style:{"background-color":"rgba(255, 255, 255, 0.4)"}},k={class:"text-md font-semibold text-gray-600 mx-auto"},P={class:"rounded-md w-full md:w-1/4 h-16 flex flex-row py-2 px-1 hover:scale-110 hover:shadow-2xl transition-all duration-300 hover:my-3 hover:md:my-0 md:hover:mx-3 items-center",style:{"background-color":"#ffee00"}},D={class:"p-2 rounded-full bg-white justify-self-start",style:{"background-color":"rgba(255, 255, 255, 0.4)"}},W={class:"text-md font-semibold text-gray-600 mx-auto"},$=(0,n._)("label",null,"Enregistrer",-1),L=[$],q={class:"bg-white rounded-md p-2"},j=(0,n._)("span",null,"Details de la commande",-1),U={key:0,class:"flex flex-row space-x-3"},B=(0,n._)("label",null,"Enregistrer",-1),O=[B],E=(0,n._)("label",null,"Ajouter",-1),I={key:1,class:"flex flex-row space-x-3 justify-end"},z=(0,n._)("label",null,"Modifier",-1),A=[z],F={key:2,class:"w-full table items-center"},M={class:"w-full flex flex-col"},S={key:0,class:"grid grid-cols-1 md:grid-cols-5 items-center"},V={class:"h-full whitespace-pre-wrap text-center md:col-span-2"},R={class:"relative w-full"},N={class:"block truncate"},T={class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},Z={key:0,class:"absolute inset-y-0 left-0 flex items-center pl-3 text-amber-600"},H={ref:"load"},K={class:"h-full whitespace-pre-wrap text-center"},Q=["value"],Y={class:"h-full whitespace-pre-wrap text-center"},G={class:"h-full whitespace-pre-wrap text-center"},J=(0,n._)("tr",{class:"md:grid grid-cols-3 hidden"},[(0,n._)("td",{class:"whitespace-pre-wrap text-center"}),(0,n._)("td",{class:"whitespace-pre-wrap text-center"},"prix"),(0,n._)("td",{class:"whitespace-pre-wrap text-center"},"quantité")],-1),X={class:"grid gap-3"},ee={class:"col-span-1"},te={class:"whitespace-pre-wrap text-center flex items-center justify-center"},oe={key:0,class:"col-span-1 text-center flex flex-row py-4 form-control items-center justify-center"},ne=(0,n._)("span",{class:"md:hidden font-semibold md:mr-0 mr-2"},"Prix : ",-1),se=["onUpdate:modelValue","onChange"],ae=(0,n._)("label",{class:"label items-center"},"DA",-1),le={key:1,class:"col-span-1 whitespace-pre-wrap flex justify-center items-center"},ie=(0,n._)("span",{class:"md:hidden font-semibold"},"Prix: ",-1),re={key:2,class:"col-span-1 text-center flex flex-row py-4 form-control items-center justify-center"},de=(0,n._)("span",{class:"md:hidden font-semibold mr-2 md:mr-0"},"Quantité: ",-1),ce=["value","onChange"],ue={key:3,class:"col-span-1 whitespace-pre-wrap text-center flex items-center justify-center"},me=(0,n._)("span",{class:"md:hidden font-semibold"},"Quantité: ",-1),pe={class:"absolute -top-4 -right-4 w-8 h-8 text-red-600 rounded-full bg-white"},fe={key:3,class:"font-semibold text-center"},he={for:"my-modal-4",class:"modal modal-bottom sm:modal-middle cursor-pointer"},we={class:"modal-box relative"},ge=(0,n._)("h3",{class:"text-lg font-bold"}," Erreur lors de la selection du Fichier ",-1),be=(0,n._)("p",{class:"py-2"},"Seule les fichiers PDF sont autorisés.",-1),ve={class:"modal-action"};function xe(e,t,o,$,B,z){const xe=(0,n.up)("Icon"),ye=(0,n.up)("ComboboxInput"),_e=(0,n.up)("SelectorIcon"),Ce=(0,n.up)("ComboboxButton"),ke=(0,n.up)("CheckIcon"),Pe=(0,n.up)("ComboboxOption"),De=(0,n.up)("ComboboxOptions"),We=(0,n.up)("TransitionRoot"),$e=(0,n.up)("Combobox"),Le=(0,n.up)("ChevronUpIcon"),qe=(0,n.up)("DisclosureButton"),je=(0,n.up)("PlusIcon"),Ue=(0,n.up)("ListboxButton"),Be=(0,n.up)("ListboxOption"),Oe=(0,n.up)("ListboxOptions"),Ee=(0,n.up)("Listbox"),Ie=(0,n.up)("MinusIcon"),ze=(0,n.up)("DisclosurePanel"),Ae=(0,n.up)("Disclosure");return(0,n.wg)(),(0,n.iD)("div",l,["new"!=e.$route.params.id?((0,n.wg)(),(0,n.iD)("div",i,[z.currentUser.Profile.Autorisations.find((e=>"delete-commande"==e.nom))?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn gap-2 btn-sm btn-error",onClick:t[0]||(t[0]=(...e)=>z.deleteCommande&&z.deleteCommande(...e))},[(0,n.Wm)(xe,{icon:"bi:archive",class:"w-5 h-5 text-red-500"}),r])):(0,n.kq)("",!0),z.currentUser.Profile.Autorisations.find((e=>"update-commande"==e.nom))&&!z.commande.validationAdmin?((0,n.wg)(),(0,n.iD)("button",{key:1,class:"btn gap-2 btn-sm btn-success",onClick:t[1]||(t[1]=(...e)=>z.validerCommande&&z.validerCommande(...e))},[(0,n.Wm)(xe,{icon:"akar-icons:check",class:"w-5 h-5"}),d])):(0,n.kq)("",!0),z.currentUser.Profile.Autorisations.find((e=>"update-commande"==e.nom))&&z.commande.validationAdmin&&z.commande.validationClient?((0,n.wg)(),(0,n.iD)("button",{key:2,class:"btn gap-2 btn-sm",onClick:t[2]||(t[2]=(...e)=>z.handleBDC&&z.handleBDC(...e))},[(0,n.Wm)(xe,{icon:z.commande.bonDeCommande?"akar-icons:file":"akar-icons:cloud-upload",class:"w-5 h-5"},null,8,["icon"]),c])):(0,n.kq)("",!0)])):(0,n.kq)("",!0),(0,n._)("div",u,[(0,n._)("div",m,[(0,n._)("div",p,[z.commande.id?((0,n.wg)(),(0,n.iD)("div",f,[(0,n._)("span",h,(0,s.zw)(z.commande.id),1)])):(0,n.kq)("",!0),(0,n._)("div",w,[(0,n._)("div",g,[(0,n.Wm)(xe,{icon:"akar-icons:person",class:"w-10 h-10 text-gray-600"})]),B.isEditing?((0,n.wg)(),(0,n.j4)($e,{key:0,modelValue:z.commande.Client,"onUpdate:modelValue":t[5]||(t[5]=e=>z.commande.Client=e)},{default:(0,n.w5)((()=>[(0,n._)("div",b,[(0,n._)("div",v,[(0,n.Wm)(ye,{class:"w-full border-none py-2 pl-3 pr-10 text-sm leading-5 text-gray-900 focus:ring-0",displayValue:e=>e.raisonSociale||"",onChange:t[3]||(t[3]=e=>B.queryClient=e.target.value)},null,8,["displayValue"]),(0,n.Wm)(Ce,{class:"absolute inset-y-0 right-0 flex items-center pr-2"},{default:(0,n.w5)((()=>[(0,n.Wm)(_e,{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})])),_:1})]),(0,n.Wm)(We,{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",onAfterLeave:t[4]||(t[4]=e=>B.queryClient="")},{default:(0,n.w5)((()=>[(0,n.Wm)(De,{class:"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:(0,n.w5)((()=>[0===z.filtredClients.length&&""!==B.queryClient?((0,n.wg)(),(0,n.iD)("div",x," Nothing found. ")):(0,n.kq)("",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(z.filtredClients,(e=>((0,n.wg)(),(0,n.j4)(Pe,{as:"template",key:e.id,value:e},{default:(0,n.w5)((({selected:t,active:o})=>[(0,n._)("li",{class:(0,s.C_)(["relative cursor-default select-none py-2 pl-10 pr-4",{"bg-teal-600 text-white":o,"text-gray-900":!o}])},[(0,n._)("span",{class:(0,s.C_)(["block truncate",{"font-medium":t,"font-normal":!t}])},(0,s.zw)(e.raisonSociale),3),t?((0,n.wg)(),(0,n.iD)("span",{key:0,class:(0,s.C_)(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":o,"text-teal-600":!o}])},[(0,n.Wm)(ke,{class:"h-5 w-5","aria-hidden":"true"})],2)):(0,n.kq)("",!0)],2)])),_:2},1032,["value"])))),128))])),_:1})])),_:1})])])),_:1},8,["modelValue"])):((0,n.wg)(),(0,n.iD)("span",y,(0,s.zw)(z.commande.Client?.raisonSociale),1))]),(0,n._)("div",_,[(0,n._)("div",C,[(0,n.Wm)(xe,{icon:"akar-icons:check",class:"w-10 h-10 text-gray-600"})]),(0,n._)("span",k,(0,s.zw)(z.commande.etat),1)]),(0,n._)("div",P,[(0,n._)("div",D,[(0,n.Wm)(xe,{icon:"fa-solid:cash-register",class:"w-9 h-9 text-gray-600"})]),(0,n._)("span",W,(0,s.zw)(z.commande.montant)+" DZD",1)])]),B.isEditing?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn self-end btn-primary",onClick:t[6]||(t[6]=(...e)=>z.saveCommande&&z.saveCommande(...e))},L)):(0,n.kq)("",!0)])]),(0,n._)("div",q,[(0,n.Wm)(Ae,null,{default:(0,n.w5)((({open:e})=>[(0,n.Wm)(qe,{class:"flex justify-between w-full px-4 py-2 text-sm font-medium text-left text-blue-900 bg-blue-100 rounded-lg hover:bg-blue-200 focus:outline-none focus-visible:ring focus-visible:ring-blue-500 focus-visible:ring-opacity-75"},{default:(0,n.w5)((()=>[j,(0,n.Wm)(Le,{class:(0,s.C_)([e?"transform rotate-180":"","w-5 h-5 text-blue-500 transition-transform duration-100"])},null,8,["class"])])),_:2},1024),(0,n.Wm)(a.uT,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-out","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:(0,n.w5)((()=>[(0,n.Wm)(ze,{class:"w-full p-5 space-y-3 bg-white flex flex-col"},{default:(0,n.w5)((()=>[B.isEditing?((0,n.wg)(),(0,n.iD)("div",U,[(0,n._)("button",{class:"btn self-end btn-sm btn-primary",onClick:t[7]||(t[7]=e=>B.isEditing=!1)},O),(0,n._)("button",{class:"btn self-end btn-sm btn-primary",onClick:t[8]||(t[8]=(...e)=>z.addProduct&&z.addProduct(...e))},[(0,n.Wm)(je,{class:"w-8 h-8 cursor-pointer text-white"}),E])])):(0,n.kq)("",!0),z.currentUser.Profile.Autorisations.find((e=>"update-commande"==e.nom))?((0,n.wg)(),(0,n.iD)("div",I,[B.isEditing?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("button",{key:0,class:"btn btn-secondary btn-sm",onClick:t[9]||(t[9]=(...e)=>z.startEditMode&&z.startEditMode(...e))},A))])):(0,n.kq)("",!0),0!=z.commande.Produits.length||B.isEditing?((0,n.wg)(),(0,n.iD)("table",F,[(0,n._)("thead",M,[B.isEditing?((0,n.wg)(),(0,n.iD)("tr",S,[(0,n._)("td",V,[(0,n.Wm)(Ee,{modelValue:B.newProduct.produit,"onUpdate:modelValue":t[10]||(t[10]=e=>B.newProduct.produit=e)},{default:(0,n.w5)((({open:e})=>[(0,n._)("div",R,[(0,n.Wm)(Ue,{onFocus:z.onOpen,onBlur:z.onClose,class:"relative w-full py-2 pl-3 pr-10 text-left bg-white rounded-lg shadow-md cursor-default focus:outline-none focus-visible:ring-2 focus-visible:ring-opacity-75 focus-visible:ring-white focus-visible:ring-offset-orange-300 focus-visible:ring-offset-2 focus-visible:border-indigo-500 sm:text-sm"},{default:(0,n.w5)((()=>[(0,n._)("span",N,(0,s.zw)(B.newProduct.produit?.nom||"Produits..."),1),(0,n._)("span",T,[(0,n.Wm)(_e,{class:"w-5 h-5 text-gray-400","aria-hidden":"true"})])])),_:1},8,["onFocus","onBlur"]),(0,n.Wm)(a.uT,{"leave-active-class":"transition duration-100 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n.Wm)(Oe,{static:"",onScroll:z.scrolllist,class:"absolute w-max py-1 mt-1 overflow-auto text-base bg-white rounded-md shadow-lg max-h-60 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm z-50"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(z.paginated,(e=>((0,n.wg)(),(0,n.j4)(Be,{key:e.id,value:e,as:"template"},{default:(0,n.w5)((({active:t,selected:o})=>[(0,n._)("li",{class:(0,s.C_)([t?"text-amber-900 bg-amber-100":"text-gray-900","cursor-default select-none relative py-2 pl-10 pr-4"])},[(0,n._)("span",{class:(0,s.C_)([o?"font-medium":"font-normal","block truncate"])},(0,s.zw)(e.nom)+" ("+(0,s.zw)(e.contenance)+"kg)",3),o?((0,n.wg)(),(0,n.iD)("span",Z,[(0,n.Wm)(ke,{class:"w-5 h-5","aria-hidden":"true"})])):(0,n.kq)("",!0)],2)])),_:2},1032,["value"])))),128)),(0,n.wy)((0,n.Wm)(Be,null,{default:(0,n.w5)((()=>[(0,n._)("span",H," loading",512)])),_:1},512),[[a.F8,z.hasNextPage]])])),_:2},1032,["onScroll"]),[[a.F8,e]])])),_:2},1024)])])),_:2},1032,["modelValue"])]),(0,n._)("td",K,[(0,n._)("input",{disabled:"",class:"w-full h-full p-2 border-2 border-gray-200 rounded-md text-md",value:(B.newProduct.produit?.contenance||0)+" Da"},null,8,Q)]),(0,n._)("td",Y,[(0,n.wy)((0,n._)("input",{type:"number",class:"w-full p-2 border-2 border-gray-200 rounded-md text-md","onUpdate:modelValue":t[11]||(t[11]=e=>B.newProduct.produits_commande.prix=e),placeholder:"Prix..."},null,512),[[a.nr,B.newProduct.produits_commande.prix]])]),(0,n._)("td",G,[(0,n.wy)((0,n._)("input",{type:"number",class:"w-full p-2 border-2 border-gray-200 rounded-md text-md","onUpdate:modelValue":t[12]||(t[12]=e=>B.newProduct.produits_commande.quantite=e),placeholder:"Quantité..."},null,512),[[a.nr,B.newProduct.produits_commande.quantite]])])])):(0,n.kq)("",!0),J]),(0,n._)("tbody",X,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)([...z.commande.Produits,...B.addedProducts],(e=>((0,n.wg)(),(0,n.iD)("tr",{key:e,class:"grid relative md:grid-cols-3 border-gray-400 border rounded-md bg-gray-200 shadow-md mt-5"},[(0,n._)("td",ee,[(0,n._)("span",te,(0,s.zw)(e.nom)+" ("+(0,s.zw)(e.contenance)+"Kg)",1)]),B.isEditing?((0,n.wg)(),(0,n.iD)("td",oe,[ne,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t=>e.produits_commande.prix=t,onChange:t=>z.updateProduit(e),class:"input input-primary w-20 h-6 focus:outline-none text-center"},null,40,se),[[a.nr,e.produits_commande.prix]]),ae])):((0,n.wg)(),(0,n.iD)("td",le,[ie,(0,n.Uk)(" "+(0,s.zw)(e.produits_commande.prix)+" DA ",1)])),B.isEditing?((0,n.wg)(),(0,n.iD)("td",re,[de,(0,n._)("label",{class:(0,s.C_)(["inline-flex overflow-hidden rounded-lg bg-gray-400 justify-evenly",{}])},[(0,n.Wm)(Ie,{class:"cursor-pointer h-8 w-8 flex-1",onClick:t=>e.produits_commande.quantite--&&z.updateProduit(e)},null,8,["onClick"]),(0,n._)("input",{value:e.produits_commande.quantite,onFocus:t[13]||(t[13]=(...e)=>z.inputgroupfocushandler&&z.inputgroupfocushandler(...e)),onBlur:t[14]||(t[14]=(...e)=>z.inputgroupblurhandler&&z.inputgroupblurhandler(...e)),onInput:t[15]||(t[15]=(...e)=>z.numbersOnly&&z.numbersOnly(...e)),onChange:t=>z.updateProduit(e),class:"input focus:outline-none flex-2 w-16 h-auto text-center peer rounded-none focus:border-0 focus:shadow-none focus:ring-0"},null,40,ce),(0,n.Wm)(je,{class:"w-8 h-8 cursor-pointer flex-1",onClick:t=>e.produits_commande.quantite++&&z.updateProduit(e)},null,8,["onClick"])])])):((0,n.wg)(),(0,n.iD)("td",ue,[me,(0,n.Uk)(" "+(0,s.zw)(e.produits_commande.quantite)+" KG ",1)])),(0,n._)("div",pe,[(0,n.Wm)(xe,{class:"w-full h-full",icon:"dashicons:remove",onClick:t=>z.deleteProduit(e.id)},null,8,["onClick"])])])))),128))])])):((0,n.wg)(),(0,n.iD)("h4",fe," Cette commande ne contient aucun produit "))])),_:2},1024)])),_:2},1024)])),_:1})]),(0,n.wy)((0,n._)("input",{type:"checkbox",id:"my-modal-4","onUpdate:modelValue":t[16]||(t[16]=e=>B.errorFileModal=e),class:"modal-toggle"},null,512),[[a.e8,B.errorFileModal]]),(0,n._)("label",he,[(0,n._)("div",we,[ge,be,(0,n._)("div",ve,[(0,n._)("label",{for:"my-modal",onClick:t[17]||(t[17]=e=>B.errorFileModal=!1),class:"btn btn-sm btn-error"},"Ok")])])])])}var ye=o(6770),_e=o(4808),Ce=o(1621),ke=o(4521);function Pe(e,t){return(0,n.wg)(),(0,n.j4)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[(0,n.Wm)("path",{"fill-rule":"evenodd",d:"M3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})])}function De(e,t){return(0,n.wg)(),(0,n.j4)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[(0,n.Wm)("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})])}var We=o(6088),$e=o(2884),Le=o.n($e),qe=o(1006),je={data(){return{errorFileModal:!1,query:"",queryClient:"",isEditing:!1,newProduct:{produit:null,produits_commande:{prix:null,quantite:null}},observer:null,limit:10,search:"",addedProducts:[]}},methods:{handleBDC(){if(null!=this.commande.bonDeCommande)return qe.Z.get(`/commande/${this.commande.id}/document`,{},{responseType:"arraybuffer",reponseEncoding:"binary"}).then((e=>{Le()(e.data,`Bon De Commande ${this.commande.id}.pdf`,"application/pdf")})).catch((e=>{console.log(e)}));var e=document.createElement("input");e.type="file",e.click(),e.onchange=this.uploadFile},async uploadFile(e){var t=e.target.files[0];if("application/pdf"!=t.type)return console.log("File is not a pdf"),void(this.errorFileModal=!0);var o=new FormData;o.append("file",t),this.$store.dispatch("uploadBonDeCommande",{formData:o,id:this.$route.params.id})},numbersOnly(e){isNaN(parseInt(e.data))&&(e.target.value=e.target.value.slice(0,e.target.value.length-1))},scrolllist(e){e.target.scrollHeight-e.target.scrollTop==e.target.clientHeight&&this.hasNextPage&&(this.limit+=10)},async onOpen(){this.hasNextPage&&(await this.$nextTick(),this.observer.observe(this.$refs.load))},onClose(){this.observer.disconnect()},async infiniteScroll([{isIntersecting:e,target:t}]){if(console.log(e),e){const e=t.offsetParent,o=t.offsetParent.scrollTop;this.limit+=10,await this.$nextTick(),e.scrollTop=o}},inputgroupfocushandler(e){e.target.parentNode.classList.add("border"),e.target.parentNode.classList.add("border-primary")},inputgroupblurhandler(e){e.target.parentNode.classList.remove("border"),e.target.parentNode.classList.remove("border-primary")},startEditMode(){this.isEditing=!0},deleteCommande(){this.$store.dispatch("deleteCommande",this.commande.id),this.$router.go(-1)},saveCommande(){"new"==this.$route.params.id?this.$store.dispatch("addCommande",this.commande):(this.$store.dispatch("updateCommande",this.commande),this.isEditing=!1)},addProduct(){null!=this.newProduct.produit&&null!=this.newProduct.produits_commande.prix&&(this.newProduct.produits_commande.quantite||(this.newProduct.produits_commande.quantite=1),this.$store.dispatch("commande/addProducts",{commandeId:this.commande.id,product:this.newProduct}),this.newProduct={produit:null,produits_commande:{prix:null,quantite:null}})},updateProduit(e){console.log(e),this.$store.dispatch("commande/updateProduit",{commandeId:this.commande.id,product:e})},deleteProduit(e){this.$store.dispatch("commande/deleteProduit",{commandeId:this.commande.id,productId:e}),this.$store.dispatch("showCommande",this.commande.id)},validerCommande(){this.$store.dispatch("commande/validate",{idCommande:this.commande.id,next:this.$router})},save(){}},components:{Listbox:ye.Ri,ListboxButton:ye.Y4,ListboxOptions:ye.O_,ListboxOption:ye.wt,CheckIcon:_e.Z,SelectorIcon:Ce.Z,ChevronUpIcon:ke.Z,Disclosure:ye.pJ,DisclosureButton:ye.lG,DisclosurePanel:ye.V2,MinusIcon:Pe,PlusIcon:De,Icon:We.JO,Combobox:ye.hQ,ComboboxButton:ye.Q$,ComboboxInput:ye.gA,ComboboxOptions:ye.L5,ComboboxOption:ye.O2},beforeMount(){"new"!=this.$route.params.id?this.$store.dispatch("showCommande",this.$route.params.id):(this.$store.dispatch("showCommande","new"),this.isEditing=!0),console.log(this.commande),this.$store.dispatch("getClients"),this.$store.dispatch("getProduits")},mounted(){this.observer=new IntersectionObserver(this.infiniteScroll)},computed:{currentUser(){return this.$store.getters.getCurrentUser},commande:{get(){return this.$store.getters.getCommande},set(e){this.$store.dispatch("setCommande",e)}},clients(){const e=this.$store.getters.getClients;return e.sort((function(e,t){return e.raisonSociale<t.raisonSociale?-1:e.raisonSociale>t.raisonSociale?1:0}))},filtredClients(){return this.$store.getters.getClients.filter((e=>e.raisonSociale.toLowerCase().includes(this.queryClient.toLowerCase())))},paginated(){return this.canAddProducts.slice(0,this.limit)},hasNextPage(){return this.paginated.length<this.canAddProducts.length},products(){return this.$store.getters.getProduits},canAddProducts(){let e=this.products.filter((e=>!this.commande.Produits.find((t=>t.nom==e.nom))&&!this.addedProducts.includes((t=>t.nom==e.nom))&&(""==this.search||-1!=e.nom.toLowerCase().indexOf(this.search.toLowerCase()))));return console.log({i:e}),e}}},Ue=o(89);const Be=(0,Ue.Z)(je,[["render",xe]]);var Oe=Be},2884:function(e){e.exports=function(e,t,o,n){var s="undefined"!==typeof n?[n,e]:[e],a=new Blob(s,{type:o||"application/octet-stream"});if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(a,t);else{var l=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(a):window.webkitURL.createObjectURL(a),i=document.createElement("a");i.style.display="none",i.href=l,i.setAttribute("download",t),"undefined"===typeof i.download&&i.setAttribute("target","_blank"),document.body.appendChild(i),i.click(),setTimeout((function(){document.body.removeChild(i),window.URL.revokeObjectURL(l)}),200)}}},4808:function(e,t,o){"use strict";o.d(t,{Z:function(){return s}});var n=o(3396);function s(e,t){return(0,n.wg)(),(0,n.j4)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[(0,n.Wm)("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])}},4521:function(e,t,o){"use strict";o.d(t,{Z:function(){return s}});var n=o(3396);function s(e,t){return(0,n.wg)(),(0,n.j4)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[(0,n.Wm)("path",{"fill-rule":"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z","clip-rule":"evenodd"})])}},1621:function(e,t,o){"use strict";o.d(t,{Z:function(){return s}});var n=o(3396);function s(e,t){return(0,n.wg)(),(0,n.j4)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[(0,n.Wm)("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"})])}}}]);
//# sourceMappingURL=437.bd3ce7ac.js.map